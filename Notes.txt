Modèle pertinent :

Ce qu'on veut montrer == nombre de frappes / buts par equipe et donc victoire et défaite

variables explicatives qui ont du sens  : 
	- possession (encore que ?) --> FBREF
	- contre attaque 
	- formation --> FBREF
	- coach     === ces deux derniers ont pour but de montrer le style de jeu et peut-être expliqueront-ils les occasions --TRANSFERMARKT
	- effectifs == valeur de l'effectif c'est un peu le seul truc que je peux avoir (notes fifa ?) --TRANSFERMARKT
	- fautes subies ou penaltys+coup francs == aggressivité, capacité à provoquer la faute (trop de faute provoquée s'expliquerait peut-être par une différence de niveau forte entre les équipes) --> FBREF
	- saves du gardien (par match ou par équipe ?) --> expliquerait la part liée au gardien !! ATTENTION cependant à ce que ça ne soit pas trop corrélé avec le nombre de frappes mais, expliquerait peut-être la qualité offensive d'une équipe ???
	- Forme == le repos est il pertinent entre deux matchs (sachant que dans le foot, peu d'équipe jouent plus de 2 matchs par semaine) et série en cours (aspect psychologique de l'équipe) --> A recalculer
	- age moyen de l'équipe == capacité à jouer fort contrebalancée par l'expérience , qui a le plus d'effet ? --> TRANSFERMARKT??
	- Période de l'année (certains joueurs plus endurants dans le froid ou plus performant dans le chaud ???) --> PARTOUT EN VRAI
	- Si possible, nombre de passes moyen par match ? mais pas sûr de la pertinence + doublon avec possession peut-être --> FBREF

Comment connaitre la valeur d'une équipe avant chaque match (avec les absents etc....) Le PSG sans neymar, Mbappé et Messi c'est toujours bien mais c'est moins fou ?
Attention à l'effet coach = 
La possession, le nombre de passe, le nombre de frappe, le nombre de save du gardien vont aussi dépendre du schéma de jeu. Par conséquent le fait d'introduire le coach et la formation de l'équipe dans l'équation pourrait créer une corrélation forte entre toutes ces variables .


Où trouver les données  ::
Problème de ESPN == URL avec des codes matchs sans logique évidente
Problème de Whoscored == Site protégé, impossible de scrapper 
Problème de récupérer les csv == Mise à jour ?
Problème des API == API complètes payantes
Problème de azscore ou xscore je sais plus == url avec logique d'id de match random comme espn 

Dans les csv de football-data.co.uk :
Equipes
Date
Nb de buts
Nb de tirs
Nb de tirs cadrés
Résultat
Fautes
Corner
Jaunes
Rouges

fbref !!! YOUHOU !!! mais pb d'url encore
codes url dans un fichier text

Dans les fichiers fbref scores & fixtures:
Date
Heure
Equipe
compétition
Home/Away
Résultat
Nombre de buts
Nombre de buts encaissés
Possession
Attendance
Capitaine
Formation Arbitre

Dans les fichiers fbref shoots:
Tirs
Tirs cadrés
Distance moyenne
Free kicks
Penaltys

Dans les fichiers fbref passing:
Passes complétées
% de passes réussies

Dans les fichiers defensive actions:
Tacles
interceptions

Dans les fichiers miscallenous stats:
Cartons jaunes
Cartons rouges
Fautes 
Hors jeu

Récup sur transfermarkt :
Galère == tables en js
Selenium plus retouches à la main pour obtenir un fichier correct et exploitable mais à ne faire qu'une fois par saison donc EZ


Comment exprimer concretement les variables :
Modèle ==>
Nombre de but / Victoire-Défaite = Date + Home/away + Possession + Formation + Tirs? + Distance moyenne + % de passes completées + interceptions + Tacles + Cartons + Fautes + Valeur equipe

Intégration de variable de l'adversaire ? --> Valeur equipe adverse , Formation equipe adverse

Nombre de buts ou Victoire == Resulat dans les bases FBREF

- Date == Ou période de l'année (peut-être ne garder que le mois / fonctionnait bien sur la NBA)
- Home/Away = Tel quel dans les bases FBREF
- Possession == Juste la possession de l'equipe (Voir s'il ne serait pas pertinent de la comparer avec la possession moyenne de la saison) dans FBREF
- Formation == Voir si il est bien pertinent de garder la formation sous forme de str --> Peut-être créer trois nouvelles variables = nb defenseurs, nb milieu, nb attaquants (seul problème, les formations type 4-2-3-1 mais peut être possible en faisant 11 - (nb_att + nb_def))
- Tirs : gros risque de corrélation avec la var a expliquée surtout si je garde le nombre de but. + tirs ou tirs cadrés ?
- Distance == FBREF, interessant mais potentiellement fortement correlée au nombre de tirs
- % de passes completées == tel quel dans FBREF
- interceptions == FBREF 
- Tacles == FBREF, voir la pertinence
- Cartons == Jaunes ou rouges ? voir pertinence également
- Fautes == soit cartons soit ça en gros
- valeur équipe == supprimer les caractères inutiles (€ et m)
- age
- valeur équipe adverse == idem
- formation équipe adverse == pareil (nb de défenseur etc...) 
- Nb de jours de repos == recalculer depuis FBREF

CORRELATION DES VARIABLES, OBSERVATIONS SUR LA SAISON 21 22 (a confirmer avec les données des autres saisons):
possession ==>
tirs cadrés : 0.39
cmp% : 0.57
repos : 0.46

age ==>
value : 0.18

tirs cardés ==>
possession : 0.39
cmp% : 0.33

distance ==>
tirs cadrés : 0.2

cmp% ==>
possession : 0.57
value : 0.47

int ==>
possession : -0.26
cmp% : -0.26

fls ==>
cmp% : -0.27

value ==> 
cmp% : 0.47

repos ==>
value : 0.17

opp_value ==>
possession : -0.38

VICTOIRE ==>
possession : 0.17
tirs cadrés : 0.41
cmp% : 0.18
value : 0.28
opp_value : -0.26 (s'annule avec la value) 

Il peut-être intéressant de travailler sur la différence de valeur plutôt que sur les valeurs directement

diff_value ==>
possession : 0.53
tirs cadrés : 0.33
cmp% : 0.34
VICTOIRE : 0.4

On garde la diff c'est mieux!
Test sur les équipes à domicile mais rien de fou 

le nombre de milieu et d'attaquant semble être plus corrélés à la victoire ou à la défaite(nul) que le nombre de défenseur. Voir avec la différence peut-être.

Pour les années précédente, je suis bloqué car je n'ai plus accès au site (access denied == robots). tester un autre jour ou sur un autre ordi. ==> j'ai été IP ban quelques temps car trop de requêtes en même temps. J'envoyais 3 URL quasi en même temps tous les 2 minutes du coup normal. CloudShare qui gere ça me renvoyait une erreur 1015 qui est un ban temporaire rien de grave. J'ai juste ajouter des time.sleep dans le script de scraping et je lance 1 année à la fois.

Matrice de corrélation pour les données de 2020 à 2023 :
Résultats les plus forts :
0.57 cmp% et possession
0.45 cmp% et value
0.39 victoire et tirs cadrés
0.45 diff value et possession
0.34 diff value et tirs cadrés
0.4 diff value et victoire
0.31 possession et tirs cadrés

Whatabout Victoire #ce qui nous intéresse
Majoritairement la valeur, les tirs cadrés, la possession et la distance moyenne de tir

Regressions tests:
Premier test : Explique la variable victoire


<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1207
Model:                          Logit   Df Residuals:                     1193
Method:                           MLE   Df Model:                           13
Date:                Mon, 16 Jan 2023   Pseudo R-squ.:                  0.2226
Time:                        21:16:06   Log-Likelihood:                -616.79
converged:                       True   LL-Null:                       -793.43
Covariance Type:            nonrobust   LLR p-value:                 1.589e-67
===============================================================================
                  coef    std err          z      P>|z|      [0.025      0.975]
-------------------------------------------------------------------------------
Intercept      -0.2724   2.61e+07  -1.05e-08      1.000   -5.11e+07    5.11e+07
opp_att        -0.9054   2.61e+06  -3.48e-07      1.000   -5.11e+06    5.11e+06
opp_def        -0.9070   2.61e+06  -3.48e-07      1.000   -5.11e+06    5.11e+06
opp_milieu     -0.9117   2.61e+06   -3.5e-07      1.000   -5.11e+06    5.11e+06
home            0.3121      0.141      2.210      0.027       0.035       0.589
np.log(age)     2.7947      1.944      1.438      0.150      -1.015       6.604
Poss           -0.0635      0.010     -6.186      0.000      -0.084      -0.043
SoT             0.3157      0.034      9.220      0.000       0.249       0.383
Dist           -0.0141      0.025     -0.563      0.573      -0.063       0.035
Cmp             0.0175      0.015      1.174      0.240      -0.012       0.047
Int             0.0221      0.017      1.309      0.191      -0.011       0.055
Fls            -0.0044      0.019     -0.230      0.818      -0.042       0.033
diff_value      0.0044      0.000     11.186      0.000       0.004       0.005
repos           0.0032      0.013      0.236      0.813      -0.023       0.030
Mois            0.0089      0.019      0.481      0.631      -0.027       0.045
===============================================================================

Sans trop de surprise ce sont les différence de valeur, la possession et le nombre de tirs cadrés qui ressortent en premier. On note aussi un R² pas fou.
le log de l'age est bien plus significatif que lorsqu'il n'est pas en log
Du coup je teste les variables numériques en log (sauf peut etre home qui est déjà binaire et qui a plutot un bon score):

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1207
Model:                          Logit   Df Residuals:                     1184
Method:                           MLE   Df Model:                           22
Date:                Mon, 16 Jan 2023   Pseudo R-squ.:                  0.2272
Time:                        21:25:15   Log-Likelihood:                -613.15
converged:                       True   LL-Null:                       -793.43
Covariance Type:            nonrobust   LLR p-value:                 5.401e-63
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept             -8.1381      9.765     -0.833      0.405     -27.278      11.002
C(Mois)[T.2]           0.0573      0.314      0.182      0.855      -0.558       0.673
C(Mois)[T.3]           0.3247      0.334      0.973      0.330      -0.329       0.979
C(Mois)[T.4]           0.2078      0.290      0.716      0.474      -0.361       0.777
C(Mois)[T.5]          -0.0973      0.307     -0.317      0.751      -0.699       0.504
C(Mois)[T.8]          -0.2688      0.364     -0.739      0.460      -0.982       0.444
C(Mois)[T.9]           0.3498      0.298      1.174      0.241      -0.234       0.934
C(Mois)[T.10]          0.3297      0.279      1.183      0.237      -0.217       0.876
C(Mois)[T.11]          0.4311      0.296      1.455      0.146      -0.149       1.012
C(Mois)[T.12]         -0.1853      0.306     -0.606      0.545      -0.785       0.414
np.log(opp_att)        0.4855      0.909      0.534      0.593      -1.297       2.268
np.log(opp_def)        0.8889      1.994      0.446      0.656      -3.019       4.797
np.log(opp_milieu)     1.0511      2.003      0.525      0.600      -2.875       4.977
home                   0.3078      0.142      2.170      0.030       0.030       0.586
np.log(age)            2.9373      1.952      1.504      0.132      -0.889       6.764
np.log(Poss)          -3.0161      0.499     -6.047      0.000      -3.994      -2.039
SoT                    0.3222      0.035      9.313      0.000       0.254       0.390
np.log(Dist)          -0.2960      0.441     -0.672      0.502      -1.160       0.568
np.log(Cmp)            1.2560      1.147      1.096      0.273      -0.991       3.503
np.log(Int)            0.2092      0.156      1.344      0.179      -0.096       0.514
np.log(Fls)           -0.0139      0.239     -0.058      0.954      -0.483       0.455
diff_value             0.0044      0.000     11.191      0.000       0.004       0.005
np.log(repos)          0.0417      0.138      0.302      0.762      -0.229       0.312
======================================================================================
"""
R² toujours aussi nul

- home est pas mal
- log d'age mouais
- Possession toujours nickel
- Sot toujours nickel aussi
- diff_value toujours nickel
- Mois de novembre giga intéressant
- Meilleur score pour le nb d'attaquant, defenseurs et milieu mais je me demande si je ne devrais pas plutôt travailler sur les différences par postes entre les formations 
- Int et Cmp peut-être quelque chose à creuser aussi
- Fautes et repos à chier

En Machine Learning je pourrais plus facilement faire des modèles en fonction des équipes (même si en vrai elle transparaissent à travers leurs valeurs)

A refaire : tester d'autres types de modèles avant de partir en ML 
Créer des variables pour différencier les formations sans partir sur des trucs catégoriels trop chiants
Voir s'il n'y a pas d'autres variables dans la base d'origine qui pourraient être intéressantes à exploiter (peut-être en en modifiant la forme)

Matrice de corrélation sur la table d'origine :
Shot - possession plus fort que tirs cadrés possession
FK free kick pas mal avec possession
Attempt (Att) plus fort que Cmp%
Yellow cards pas mal, red cards pas fou
Offside nul
Victoire : plus faible avec tirs qu'avec tirs cadrés, pas mal avec PK (penalty), meilleur avec Cmp% qu'avec Att, Yellow et red cards pareil et c'est pas mal.

On va ajouter PK, Shot, Att et les deux cards + je recalcul des diff entre post (att - defopp, def-attopp et milieu-milieuopp)
différence au milieu joue bien sur la possession par contre, c'est mieux que le nombre de milieu, de défenseur ou d'attaquant mais ça reste faiblard sur la victoire.

Nouvelle regression :
<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1197
Model:                          Logit   Df Residuals:                     1173
Method:                           MLE   Df Model:                           23
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2689
Time:                        21:01:52   Log-Likelihood:                -576.30
converged:                       True   LL-Null:                       -788.29
Covariance Type:            nonrobust   LLR p-value:                 2.021e-75
=================================================================================
                    coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------
Intercept        -1.4344      7.706     -0.186      0.852     -16.539      13.670
C(Mois)[T.2]      0.0414      0.328      0.126      0.900      -0.601       0.684
C(Mois)[T.3]      0.3132      0.351      0.893      0.372      -0.374       1.000
C(Mois)[T.4]      0.1906      0.301      0.634      0.526      -0.398       0.780
C(Mois)[T.5]     -0.2097      0.321     -0.653      0.514      -0.840       0.420
C(Mois)[T.8]     -0.2137      0.379     -0.563      0.573      -0.957       0.530
C(Mois)[T.9]      0.3173      0.308      1.032      0.302      -0.285       0.920
C(Mois)[T.10]     0.3849      0.290      1.327      0.184      -0.184       0.953
C(Mois)[T.11]     0.3641      0.304      1.197      0.231      -0.232       0.960
C(Mois)[T.12]    -0.1458      0.310     -0.471      0.638      -0.753       0.461
diff_off          0.0209        nan        nan        nan         nan         nan
diff_def          0.0024        nan        nan        nan         nan         nan
diff_mil         -0.0233        nan        nan        nan         nan         nan
home              0.4094      0.150      2.730      0.006       0.115       0.703
np.log(age)       2.2240      2.026      1.098      0.272      -1.747       6.195
np.log(Poss)     -2.3274      0.533     -4.366      0.000      -3.372      -1.283
SoT               0.4631      0.047      9.933      0.000       0.372       0.554
np.log(Dist)     -0.5751      0.454     -1.266      0.205      -1.465       0.315
np.log(Cmp)       0.6353      1.174      0.541      0.588      -1.665       2.936
np.log(Int)       0.2176      0.162      1.340      0.180      -0.101       0.536
diff_value        0.0044      0.000     10.737      0.000       0.004       0.005
Sh               -0.0950      0.021     -4.565      0.000      -0.136      -0.054
PK                1.0607      0.191      5.566      0.000       0.687       1.434
CrdY             -0.0411      0.057     -0.717      0.474      -0.154       0.071
CrdR             -0.6325      0.242     -2.610      0.009      -1.107      -0.158
=================================================================================
"""

Toujours Octobre et Novembre, va savoir pourquoi ? Arrivé du froid, mise en route des équipes...
Pourquoi les diff par postes sont en nan ? A chercher...
home est très bien
log de l'age se défend, à voir dans un modèle plus petit
possession et tirs cadrés toujours au top
log d'int est défendable
diff value, shot et penalty kick sont cool
Red cards aussi

R² un peu mieux que sur les modèles précédents.

Un par un, diff milieu est celui qui sort avec le meilleur score (le problème devait être que les 3 variables en même temps s'annulaient : 11 joueurs contre 11) mais avec un 0.52 dégueu.

Comment prendre en compte la formation de l'équipe adverse ?
J'ai besoin d'un élément traduisant la stratégie sur le terrain. La possession en est un mais parfois celle ci s'explique surtout parce que les joueurs d'une équipe sont simplement techniquement beaucoup plus forts que leur adversaires et ont le ballon tout le temps.

De plus, j'imagine qu'il existe des situations où des coachs arrivent à empiéter sur la technique de leur adversaire même si celui-ci est meilleur, juste avec un ajustement tactique entraînant une modification de la formation.

La formation doit également me permettre de simuler des changements techniques liés à l'absence d'un cadre ou d'un joueur clé. La modification d'une formation en est la preuve puisqu'elle découle forcément d'un ajustement (soit face à cet adversaire, soit suite à une absence d'un joueur).

Après, chaque formation est unique et dépend de l'équipe qui l'a réalise .
J'imagine que le 4-3-3 du Milan n'aura pas le même impact que celui de la Roma sur un 4-4-2 de l'Inter. Je ne souhaite pas faire un modèle par équipe pour plusieurs raisons :
- Manque de données
- Déjà qu'en bossant sur 3 années j'ai des divergences de coach, d'effectifs etc alors bosser sur les seuls matchs d'une seule année par équipe et en pondre un modèle me semble risqué et peu prometteur.
- Eviter l'overfitting comme sur mes modèle NBA.

La variable opp_Formation pourrait être sympa mais le problème est le même, chaque formation appartenant à une équipe n'aura pas le même impact sur son adversaire. Peut-être que l'Inter ne perds jamais contre un 4-2-3-1 alors que la Forientina perd tout le temps contre ce type de formation (== renvoi encore à l'idée d'un modèle pas équipe qui n'est pas une solution viable).

On va quand même tester l'opp_formation en variable dummy.

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1197
Model:                          Logit   Df Residuals:                     1159
Method:                           MLE   Df Model:                           37
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2788
Time:                        21:23:14   Log-Likelihood:                -568.54
converged:                      False   LL-Null:                       -788.29
Covariance Type:            nonrobust   LLR p-value:                 2.544e-70
===============================================================================================
                                  coef    std err          z      P>|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------
Intercept                      -1.7675      7.854     -0.225      0.822     -17.162      13.627
C(Mois)[T.2]                    0.1036      0.333      0.311      0.755      -0.548       0.755
C(Mois)[T.3]                    0.3940      0.355      1.108      0.268      -0.303       1.091
C(Mois)[T.4]                    0.1866      0.308      0.606      0.544      -0.417       0.790
C(Mois)[T.5]                   -0.1715      0.326     -0.526      0.599      -0.811       0.468
C(Mois)[T.8]                   -0.1285      0.388     -0.331      0.741      -0.889       0.632
C(Mois)[T.9]                    0.3894      0.317      1.229      0.219      -0.232       1.011
C(Mois)[T.10]                   0.4320      0.297      1.454      0.146      -0.150       1.014
C(Mois)[T.11]                   0.4289      0.313      1.371      0.170      -0.184       1.042
C(Mois)[T.12]                  -0.1108      0.317     -0.350      0.726      -0.731       0.510
C(opp_Formation)[T.3-4-1-2]    -0.5469      0.662     -0.826      0.409      -1.845       0.751
C(opp_Formation)[T.3-4-3]      -0.9044      0.635     -1.425      0.154      -2.148       0.339
C(opp_Formation)[T.3-5-1-1]    -0.7012      0.848     -0.827      0.408      -2.363       0.961
C(opp_Formation)[T.3-5-2]      -0.7029      0.601     -1.171      0.242      -1.880       0.474
C(opp_Formation)[T.4-1-3-2]    14.2217    615.361      0.023      0.982   -1191.864    1220.307
C(opp_Formation)[T.4-1-4-1]    -0.9311      0.812     -1.147      0.252      -2.523       0.661
C(opp_Formation)[T.4-2-3-1]    -0.8688      0.634     -1.371      0.170      -2.111       0.373
C(opp_Formation)[T.4-3-1-2]    -0.8017      0.658     -1.218      0.223      -2.091       0.488
C(opp_Formation)[T.4-3-2-1]    -0.7027      0.776     -0.905      0.365      -2.224       0.819
C(opp_Formation)[T.4-3-3]      -0.7299      0.626     -1.166      0.244      -1.957       0.497
C(opp_Formation)[T.4-4-1-1]    -0.3570      0.853     -0.419      0.675      -2.028       1.314
C(opp_Formation)[T.4-4-2]      -0.4342      0.644     -0.674      0.500      -1.697       0.829
C(opp_Formation)[T.4-5-1]       8.8054   1011.736      0.009      0.993   -1974.161    1991.772
C(opp_Formation)[T.5-3-2]       0.4376      0.993      0.441      0.659      -1.508       2.383
C(opp_Formation)[T.5-4-1]       0.3103      1.338      0.232      0.817      -2.311       2.932
diff_def                        0.0197      0.154      0.128      0.899      -0.283       0.322
home                            0.4180      0.151      2.761      0.006       0.121       0.715
np.log(age)                     2.9480      2.069      1.425      0.154      -1.108       7.004
np.log(Poss)                   -2.4542      0.552     -4.449      0.000      -3.535      -1.373
SoT                             0.4693      0.047      9.969      0.000       0.377       0.562
np.log(Dist)                   -0.6390      0.476     -1.341      0.180      -1.573       0.295
np.log(Cmp)                     0.4676      1.209      0.387      0.699      -1.901       2.837
np.log(Int)                     0.1927      0.167      1.152      0.250      -0.135       0.521
diff_value                      0.0043      0.000     10.261      0.000       0.004       0.005
Sh                             -0.0935      0.021     -4.395      0.000      -0.135      -0.052
PK                              1.1046      0.193      5.714      0.000       0.726       1.484
CrdY                           -0.0358      0.059     -0.612      0.540      -0.150       0.079
CrdR                           -0.6192      0.244     -2.533      0.011      -1.098      -0.140
===============================================================================================
"""

R² toujours pas dingue
Octobre Novembre as usual (travailler en saison ? ?)
3-4-3, 4-2-3-1 avec les meilleurs scores ==> Vérifier qui joue en 3-4-3 c'est peut-être simplement le Milan ou la Juve et du coup ils influencent à fond les matchs et ils sont les seuls à jouer dans ces formations.

On va commencer à réfléchir à un modèle plus simple avec moins de variable mais je dois encore tester la variable Att.

Les équipes en 3-4-3
Torino         45
Atalanta       41
Roma           39
Bologna        17
Venezia         5
Cagliari        3
Napoli          3
Sassuolo        2
Spezia          2
Udinese         2
Fiorentina      2
Salernitana     1

les équipe en 4-2-3-1:
Milan          74
Napoli         50
Sassuolo       46
Bologna        33
Spezia         15
Roma           14
Genoa          13
Cagliari        7
Juventus        7
Fiorentina      5
Salernitana     4
Sampdoria       3
Atalanta        3
Venezia         1

En vrai il y en a beaucoup avec des niveaux très différents c'est plutôt rassurant

Modèle avec Att :

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1197
Model:                          Logit   Df Residuals:                     1158
Method:                           MLE   Df Model:                           38
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2788
Time:                        21:32:04   Log-Likelihood:                -568.53
converged:                      False   LL-Null:                       -788.29
Covariance Type:            nonrobust   LLR p-value:                 8.796e-70
===============================================================================================
                                  coef    std err          z      P>|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------
Intercept                      -2.0453      8.210     -0.249      0.803     -18.136      14.045
C(Mois)[T.2]                    0.1028      0.333      0.309      0.757      -0.549       0.755
C(Mois)[T.3]                    0.3947      0.356      1.110      0.267      -0.302       1.092
C(Mois)[T.4]                    0.1824      0.310      0.589      0.556      -0.425       0.790
C(Mois)[T.5]                   -0.1760      0.329     -0.536      0.592      -0.820       0.468
C(Mois)[T.8]                   -0.1341      0.391     -0.343      0.732      -0.901       0.633
C(Mois)[T.9]                    0.3858      0.318      1.212      0.226      -0.238       1.010
C(Mois)[T.10]                   0.4281      0.299      1.432      0.152      -0.158       1.014
C(Mois)[T.11]                   0.4298      0.313      1.374      0.169      -0.183       1.043
C(Mois)[T.12]                  -0.1102      0.317     -0.348      0.728      -0.731       0.510
C(opp_Formation)[T.3-4-1-2]    -0.5433      0.663     -0.819      0.413      -1.843       0.756
C(opp_Formation)[T.3-4-3]      -0.9020      0.635     -1.421      0.155      -2.146       0.342
C(opp_Formation)[T.3-5-1-1]    -0.6997      0.848     -0.825      0.409      -2.362       0.962
C(opp_Formation)[T.3-5-2]      -0.7017      0.601     -1.168      0.243      -1.879       0.475
C(opp_Formation)[T.4-1-3-2]    10.4920     94.940      0.111      0.912    -175.587     196.571
C(opp_Formation)[T.4-1-4-1]    -0.9281      0.813     -1.142      0.253      -2.521       0.665
C(opp_Formation)[T.4-2-3-1]    -0.8668      0.634     -1.367      0.172      -2.109       0.376
C(opp_Formation)[T.4-3-1-2]    -0.8040      0.658     -1.221      0.222      -2.094       0.486
C(opp_Formation)[T.4-3-2-1]    -0.7001      0.777     -0.902      0.367      -2.222       0.822
C(opp_Formation)[T.4-3-3]      -0.7275      0.626     -1.162      0.245      -1.955       0.500
C(opp_Formation)[T.4-4-1-1]    -0.3496      0.855     -0.409      0.683      -2.025       1.326
C(opp_Formation)[T.4-4-2]      -0.4302      0.645     -0.667      0.505      -1.695       0.834
C(opp_Formation)[T.4-5-1]       8.0444    682.083      0.012      0.991   -1328.814    1344.903
C(opp_Formation)[T.5-3-2]       0.4417      0.993      0.445      0.657      -1.505       2.389
C(opp_Formation)[T.5-4-1]       0.3204      1.340      0.239      0.811      -2.307       2.948
diff_def                        0.0195      0.154      0.126      0.900      -0.283       0.322
home                            0.4183      0.151      2.762      0.006       0.121       0.715
np.log(age)                     2.9964      2.111      1.419      0.156      -1.141       7.134
np.log(Poss)                   -2.3585      0.988     -2.387      0.017      -4.295      -0.422
SoT                             0.4693      0.047      9.970      0.000       0.377       0.562
np.log(Dist)                   -0.6393      0.477     -1.341      0.180      -1.573       0.295
np.log(Cmp)                     0.5796      1.544      0.375      0.707      -2.446       3.606
np.log(Int)                     0.1961      0.170      1.154      0.248      -0.137       0.529
diff_value                      0.0043      0.000     10.255      0.000       0.004       0.005
Sh                             -0.0936      0.021     -4.395      0.000      -0.135      -0.052
PK                              1.1035      0.194      5.701      0.000       0.724       1.483
CrdY                           -0.0370      0.059     -0.623      0.533      -0.154       0.079
CrdR                           -0.6203      0.245     -2.536      0.011      -1.100      -0.141
np.log(Att)                    -0.1201      1.028     -0.117      0.907      -2.135       1.895
===============================================================================================
"""

Change rien au R² et p-value éclatée au sol, on oublie ça!

Je vais créer des regroupement de formation pour qu'elles aient un peu plus la même tête avec 3 valeurs. Ca fausse carrément l'info par contre ça m'évitera les 4-4-1-1 qui doivent être relativement rares et qui du coup ont une p-value pourrie. Le vrai problème se pose au niveau des 4-2-3-1 et 4-3-2-1 le second étant défensif à fond contrairement au premier == donc l'info sur la stratégie est biaisée (pour pas dire autre chose).

les formations adverses avec le nombre d'apparition:
4-2-3-1    264
3-5-2      240
4-3-3      205
3-4-3      154
4-4-2       92
4-3-1-2     63
3-4-1-2     62
4-3-2-1     26
4-1-4-1     20
3-5-1-1     20
3-1-4-2     17
4-4-1-1     15
5-3-2       10
5-4-1        4
4-1-3-2      4
4-5-1        1

Soit je garde les plus importantes (>50 apparitions) soit je regroupe avec finalement très peu de risque car le premier regroupement problématique est le passage du 3-4-1-2 dans le 3-5-2 au dessus.

Go regrouper !
Toutefois, cela ne me permets pas de constater l'effet d'un 4-3-3 sur un 4-4-2 et celui du même 4-3-3 sur un 3-5-2 par exemple.
Une fois les regroupements fait, je pourrai peut-être faire de même avec les formations des équipes étudiés et créer des couple de formation en variable quali.


Avec les nouvelles formations adversaire :

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1217
Model:                          Logit   Df Residuals:                     1188
Method:                           MLE   Df Model:                           28
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2761
Time:                        21:46:52   Log-Likelihood:                -580.78
converged:                      False   LL-Null:                       -802.33
Covariance Type:            nonrobust   LLR p-value:                 3.221e-76
===================================================================================================
                                      coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------
Intercept                           0.2011      6.809      0.030      0.976     -13.144      13.546
C(Mois)[T.2]                        0.0378      0.325      0.116      0.908      -0.600       0.676
C(Mois)[T.3]                        0.3150      0.346      0.911      0.362      -0.363       0.993
C(Mois)[T.4]                        0.1798      0.300      0.598      0.550      -0.409       0.769
C(Mois)[T.5]                       -0.2208      0.321     -0.688      0.491      -0.850       0.408
C(Mois)[T.8]                       -0.2040      0.377     -0.541      0.589      -0.943       0.535
C(Mois)[T.9]                        0.3264      0.307      1.063      0.288      -0.275       0.928
C(Mois)[T.10]                       0.3518      0.290      1.213      0.225      -0.217       0.920
C(Mois)[T.11]                       0.3687      0.307      1.199      0.230      -0.234       0.971
C(Mois)[T.12]                      -0.2279      0.312     -0.731      0.465      -0.839       0.383
C(opp_Formation)[T.3-5-2]           0.3131      0.255      1.229      0.219      -0.186       0.813
C(opp_Formation)[T.3-6-1]           0.2678      0.623      0.430      0.667      -0.952       1.488
C(opp_Formation)[T.3-<NA>-<NA>]    17.9380   1.74e+04      0.001      0.999    -3.4e+04     3.4e+04
C(opp_Formation)[T.4-3-3]           0.2003      0.276      0.725      0.469      -0.341       0.742
C(opp_Formation)[T.4-4-2]           0.4259      0.295      1.446      0.148      -0.152       1.003
C(opp_Formation)[T.4-5-1]           0.1402      0.257      0.545      0.586      -0.364       0.645
C(opp_Formation)[T.4-<NA>-<NA>]     1.5265      0.887      1.720      0.085      -0.213       3.266
C(opp_Formation)[T.5-3-2]           1.3889      0.825      1.683      0.092      -0.228       3.006
C(opp_Formation)[T.5-4-1]           1.2593      1.224      1.029      0.304      -1.140       3.659
home                                0.4347      0.149      2.922      0.003       0.143       0.726
np.log(age)                         2.5032      2.019      1.240      0.215      -1.454       6.460
np.log(Poss)                       -2.3915      0.460     -5.198      0.000      -3.293      -1.490
SoT                                 0.4734      0.046     10.255      0.000       0.383       0.564
np.log(Dist)                       -0.5104      0.464     -1.100      0.272      -1.420       0.399
np.log(Int)                         0.1877      0.163      1.154      0.248      -0.131       0.506
diff_value                          0.0045      0.000     10.861      0.000       0.004       0.005
Sh                                 -0.0980      0.021     -4.730      0.000      -0.139      -0.057
PK                                  1.0656      0.190      5.598      0.000       0.692       1.439
CrdR                               -0.6979      0.239     -2.920      0.003      -1.166      -0.230
===================================================================================================
"""

R² bouge pas
Là c'est tout l'automne qui semble bizarre. Je vais faire 2 saisons (début de saison et reste de l'année).
3-6-1 ? Merci l'erreur
3-5-2, 4-4-2, 4-na-na (pf...) , 5-3-2 sont pas mal. Je pense virer les formations qui sortent pas souvent ou celles qui comportent des erreurs ùais y a un début de quelque chose.
Tester age, Dist et Int sans log maintenant peut-être.

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1217
Model:                          Logit   Df Residuals:                     1188
Method:                           MLE   Df Model:                           28
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2767
Time:                        21:51:37   Log-Likelihood:                -580.36
converged:                      False   LL-Null:                       -802.33
Covariance Type:            nonrobust   LLR p-value:                 2.167e-76
===================================================================================================
                                      coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------
Intercept                           4.9593      2.682      1.849      0.064      -0.298      10.216
C(Mois)[T.2]                        0.0469      0.326      0.144      0.886      -0.592       0.686
C(Mois)[T.3]                        0.3184      0.346      0.921      0.357      -0.359       0.996
C(Mois)[T.4]                        0.1861      0.301      0.619      0.536      -0.403       0.776
C(Mois)[T.5]                       -0.2121      0.321     -0.660      0.509      -0.842       0.417
C(Mois)[T.8]                       -0.1928      0.378     -0.511      0.610      -0.933       0.547
C(Mois)[T.9]                        0.3353      0.307      1.091      0.275      -0.267       0.938
C(Mois)[T.10]                       0.3540      0.290      1.220      0.222      -0.215       0.923
C(Mois)[T.11]                       0.3684      0.308      1.198      0.231      -0.234       0.971
C(Mois)[T.12]                      -0.2294      0.312     -0.735      0.462      -0.841       0.382
C(opp_Formation)[T.3-5-2]           0.3141      0.255      1.233      0.218      -0.185       0.813
C(opp_Formation)[T.3-6-1]           0.2652      0.624      0.425      0.671      -0.958       1.488
C(opp_Formation)[T.3-<NA>-<NA>]    17.8441   1.73e+04      0.001      0.999    -3.4e+04     3.4e+04
C(opp_Formation)[T.4-3-3]           0.2017      0.276      0.730      0.465      -0.340       0.743
C(opp_Formation)[T.4-4-2]           0.4294      0.295      1.458      0.145      -0.148       1.007
C(opp_Formation)[T.4-5-1]           0.1391      0.257      0.541      0.589      -0.365       0.643
C(opp_Formation)[T.4-<NA>-<NA>]     1.5208      0.888      1.712      0.087      -0.220       3.262
C(opp_Formation)[T.5-3-2]           1.4070      0.824      1.707      0.088      -0.208       3.023
C(opp_Formation)[T.5-4-1]           1.2761      1.226      1.041      0.298      -1.126       3.678
home                                0.4354      0.149      2.924      0.003       0.144       0.727
age                                 0.1027      0.080      1.284      0.199      -0.054       0.259
np.log(Poss)                       -2.3849      0.460     -5.180      0.000      -3.287      -1.483
SoT                                 0.4736      0.046     10.244      0.000       0.383       0.564
Dist                               -0.0327      0.027     -1.232      0.218      -0.085       0.019
Int                                 0.0236      0.018      1.335      0.182      -0.011       0.058
diff_value                          0.0045      0.000     10.819      0.000       0.004       0.005
Sh                                 -0.0984      0.021     -4.753      0.000      -0.139      -0.058
PK                                  1.0770      0.191      5.637      0.000       0.702       1.451
CrdR                               -0.6964      0.239     -2.912      0.004      -1.165      -0.228
===================================================================================================
"""

C'est mieux!

Test avec les couples de formations. Je veux filtrer les moins courants pour pas avoir 70 lignes de couples de formations.
Ca donne : 

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  959
Model:                          Logit   Df Residuals:                      923
Method:                           MLE   Df Model:                           35
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2734
Time:                        21:57:01   Log-Likelihood:                -458.85
converged:                       True   LL-Null:                       -631.50
Covariance Type:            nonrobust   LLR p-value:                 1.107e-52
=====================================================================================================
                                        coef    std err          z      P>|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------
Intercept                             5.6729      3.126      1.814      0.070      -0.455      11.801
C(Mois)[T.2]                         -0.0943      0.358     -0.264      0.792      -0.795       0.606
C(Mois)[T.3]                          0.4268      0.371      1.150      0.250      -0.301       1.154
C(Mois)[T.4]                          0.1147      0.332      0.345      0.730      -0.536       0.765
C(Mois)[T.5]                         -0.1329      0.357     -0.372      0.710      -0.834       0.568
C(Mois)[T.8]                         -0.2315      0.443     -0.523      0.601      -1.099       0.636
C(Mois)[T.9]                          0.5711      0.342      1.669      0.095      -0.100       1.242
C(Mois)[T.10]                         0.4282      0.333      1.288      0.198      -0.224       1.080
C(Mois)[T.11]                         0.2468      0.369      0.669      0.504      -0.476       0.970
C(Mois)[T.12]                        -0.0939      0.350     -0.268      0.788      -0.780       0.592
C(couple_Formation)[T.3-4-33-5-2]     0.1168      0.587      0.199      0.842      -1.034       1.268
C(couple_Formation)[T.3-4-34-5-1]     0.1830      0.635      0.288      0.773      -1.061       1.427
C(couple_Formation)[T.3-5-23-4-3]    -0.2643      0.611     -0.433      0.665      -1.461       0.933
C(couple_Formation)[T.3-5-23-5-2]    -0.1870      0.536     -0.349      0.727      -1.238       0.864
C(couple_Formation)[T.3-5-24-3-3]    -0.1740      0.564     -0.308      0.758      -1.280       0.932
C(couple_Formation)[T.3-5-24-4-2]    -0.2201      0.610     -0.361      0.718      -1.416       0.976
C(couple_Formation)[T.3-5-24-5-1]    -0.0235      0.549     -0.043      0.966      -1.100       1.053
C(couple_Formation)[T.4-3-33-5-2]     0.2990      0.549      0.545      0.586      -0.777       1.375
C(couple_Formation)[T.4-3-34-5-1]     0.2098      0.562      0.373      0.709      -0.892       1.312
C(couple_Formation)[T.4-4-23-5-2]    -0.4171      0.612     -0.682      0.495      -1.616       0.782
C(couple_Formation)[T.4-4-24-5-1]    -0.1751      0.595     -0.294      0.769      -1.342       0.991
C(couple_Formation)[T.4-5-13-4-3]    -0.1936      0.629     -0.308      0.758      -1.426       1.039
C(couple_Formation)[T.4-5-13-5-2]     0.3760      0.534      0.704      0.482      -0.671       1.423
C(couple_Formation)[T.4-5-14-3-3]    -0.1180      0.559     -0.211      0.833      -1.213       0.977
C(couple_Formation)[T.4-5-14-4-2]     0.4612      0.568      0.812      0.417      -0.652       1.574
C(couple_Formation)[T.4-5-14-5-1]    -0.4415      0.536     -0.823      0.410      -1.493       0.609
home                                  0.5459      0.168      3.245      0.001       0.216       0.876
age                                   0.1146      0.095      1.204      0.229      -0.072       0.301
np.log(Poss)                         -2.6508      0.524     -5.057      0.000      -3.678      -1.623
SoT                                   0.4799      0.052      9.247      0.000       0.378       0.582
Dist                                 -0.0271      0.031     -0.872      0.383      -0.088       0.034
Int                                   0.0362      0.020      1.787      0.074      -0.004       0.076
diff_value                            0.0045      0.000      9.590      0.000       0.004       0.005
Sh                                   -0.1015      0.023     -4.368      0.000      -0.147      -0.056
PK                                    0.8983      0.215      4.170      0.000       0.476       1.321
CrdR                                 -0.6687      0.275     -2.434      0.015      -1.207      -0.130
=====================================================================================================
"""

R² bouge toujours pas
Aucun couple de Formation ne semble significatif == On va rester sur les formations des adversaires je crois. cette dernière variable peut être plus significative si j'étudie le nombre de but plutôt que la victoire.
Dans le machine learning je pourrai tester les réseaux de neurones pour expliquer le résultat du match (W, D ou L) 3 valeurs au lieu de 2, c'est plus chiant pour les régressions standards.

Du coup dernier modèle, le plus significatif je pense avec le moins de variables possible et avec les saisons : 

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1217
Model:                          Logit   Df Residuals:                     1196
Method:                           MLE   Df Model:                           20
Date:                Tue, 17 Jan 2023   Pseudo R-squ.:                  0.2751
Time:                        22:13:09   Log-Likelihood:                -581.60
converged:                      False   LL-Null:                       -802.33
Covariance Type:            nonrobust   LLR p-value:                 4.910e-81
===================================================================================================
                                      coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------
Intercept                          -1.5311      2.117     -0.723      0.470      -5.681       2.619
C(saison)[T.reste]                 -0.3525      0.154     -2.284      0.022      -0.655      -0.050
C(opp_Formation)[T.3-5-2]           0.3465      0.254      1.366      0.172      -0.151       0.844
C(opp_Formation)[T.3-6-1]           0.2009      0.619      0.325      0.746      -1.012       1.414
C(opp_Formation)[T.3-<NA>-<NA>]    18.3521   1.74e+04      0.001      0.999    -3.4e+04    3.41e+04
C(opp_Formation)[T.4-3-3]           0.2102      0.275      0.763      0.445      -0.330       0.750
C(opp_Formation)[T.4-4-2]           0.4447      0.294      1.513      0.130      -0.131       1.021
C(opp_Formation)[T.4-5-1]           0.1670      0.255      0.654      0.513      -0.333       0.667
C(opp_Formation)[T.4-<NA>-<NA>]     1.5177      0.885      1.715      0.086      -0.217       3.252
C(opp_Formation)[T.5-3-2]           1.3498      0.809      1.668      0.095      -0.237       2.936
C(opp_Formation)[T.5-4-1]           1.4264      1.224      1.165      0.244      -0.973       3.826
home                                0.4403      0.149      2.965      0.003       0.149       0.731
age                                 0.1073      0.080      1.346      0.178      -0.049       0.264
Poss                               -0.0516      0.010     -5.262      0.000      -0.071      -0.032
SoT                                 0.4660      0.046     10.179      0.000       0.376       0.556
Dist                               -0.0332      0.027     -1.250      0.211      -0.085       0.019
Int                                 0.0232      0.018      1.320      0.187      -0.011       0.058
diff_value                          0.0045      0.000     10.863      0.000       0.004       0.005
Sh                                 -0.0953      0.020     -4.653      0.000      -0.135      -0.055
PK                                  1.0827      0.190      5.713      0.000       0.711       1.454
CrdR                               -0.7028      0.238     -2.949      0.003      -1.170      -0.236
===================================================================================================
"""

R² rien à dire ça bouge pas
Cool le reste de l'année devient significatif. Du coup, il y a moins de chances de victoires le reste de l'année qu'en automne ~ PLus de matchs nuls ?

A faire : Tester ce modèle avec les éléments que j'avais utilisé pour le modèle sur le Turf (graph etc...) avant de partir faire du machine learning.
BTW le log likelihood est à chier mais bon ... 

Je peux aussi recherche pourquoi j'avais fait le produit de deux variables dans le modèle Turf. ça pourrait aider à rendre un truc plus significatif peut-être. ==> c'est utile pour les variables qui sont liées entre elles . Par exemple : l'age et le sexe du cheval dans e turf. Le femelle ne subissent pas le même effet de l'age que les mâles.

Ici on pourrait utiliser ça pour les équipes et les formations des opposants ==> risque de diminuer le nombre d'observation mais pourquoi pas.
D'après la matrice de corrélation on peut lier :
home et Sh == 0.18
SoT et poss == 0.27
SoT et diff value == 0.35
SoT et Sh mais va falloir que j'en choisisse qu'un (Sh plus précis et moins d'erreur mais coeff beaucoup plus faible...)
Dist et PK == 0.14
Dist et diff_value == -0.19
Dist et SoT == -0.19
Int et poss == -0.19
Diff_value (poss, sot, Sh : 0.47 ; 0.37 ; 0.36)
Sh home et Sh Poss (0.18 et 0.46)

Du coup pour libérer Sh je croiserais bien SoT et Dist 
Diff value a pas mal de corrélation avec les variables du modèle, est-ce que je devrais la croiser aussi (à tester)
J'ajoute aussi un croisement team*opp_Formation

Pas pu croiser team et opp_Formation (pas assez d'observations du coup j'obtiens une erreur de matrice). Pour le reste voilà ce qu'on a :

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1217
Model:                          Logit   Df Residuals:                     1194
Method:                           MLE   Df Model:                           22
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2767
Time:                        20:56:46   Log-Likelihood:                -580.34
converged:                      False   LL-Null:                       -802.33
Covariance Type:            nonrobust   LLR p-value:                 3.287e-80
===================================================================================================
                                      coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------
Intercept                          -2.3886      2.265     -1.054      0.292      -6.829       2.051
C(saison)[T.reste]                 -0.3621      0.155     -2.337      0.019      -0.666      -0.058
C(opp_Formation)[T.3-5-2]           0.3523      0.253      1.390      0.164      -0.144       0.849
C(opp_Formation)[T.3-6-1]           0.2012      0.622      0.324      0.746      -1.018       1.420
C(opp_Formation)[T.3-<NA>-<NA>]    18.2004   1.74e+04      0.001      0.999    -3.4e+04     3.4e+04
C(opp_Formation)[T.4-3-3]           0.1948      0.275      0.708      0.479      -0.344       0.734
C(opp_Formation)[T.4-4-2]           0.4353      0.294      1.480      0.139      -0.141       1.012
C(opp_Formation)[T.4-5-1]           0.1630      0.255      0.640      0.522      -0.336       0.662
C(opp_Formation)[T.4-<NA>-<NA>]     1.5374      0.885      1.738      0.082      -0.197       3.271
C(opp_Formation)[T.5-3-2]           1.3036      0.808      1.613      0.107      -0.280       2.887
C(opp_Formation)[T.5-4-1]           1.2912      1.227      1.053      0.292      -1.113       3.695
home                                0.4438      0.149      2.982      0.003       0.152       0.736
age                                 0.1057      0.080      1.324      0.186      -0.051       0.262
Poss                               -0.0524      0.010     -5.297      0.000      -0.072      -0.033
diff_value                          0.0028      0.002      1.523      0.128      -0.001       0.006
Poss:diff_value                  3.457e-05   3.59e-05      0.963      0.336   -3.58e-05       0.000
SoT                                 0.7269      0.214      3.396      0.001       0.307       1.146
Dist                                0.0183      0.049      0.373      0.709      -0.078       0.115
SoT:Dist                           -0.0147      0.012     -1.248      0.212      -0.038       0.008
Int                                 0.0238      0.018      1.351      0.177      -0.011       0.058
Sh                                 -0.0974      0.021     -4.716      0.000      -0.138      -0.057
PK                                  1.0730      0.190      5.655      0.000       0.701       1.445
CrdR                               -0.7033      0.238     -2.955      0.003      -1.170      -0.237
===================================================================================================
"""

R² change pas
Poss*diff_value pas significatif
Tirs cadrés et distance améliore la significativité de la distance mais nul pour SoT

avec le log de la distance sur la possession ?

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1217
Model:                          Logit   Df Residuals:                     1178
Method:                           MLE   Df Model:                           38
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2932
Time:                        21:00:56   Log-Likelihood:                -567.10
converged:                      False   LL-Null:                       -802.33
Covariance Type:            nonrobust   LLR p-value:                 5.732e-76
===================================================================================================
                                      coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------
Intercept                           0.2069   9.66e+06   2.14e-08      1.000   -1.89e+07    1.89e+07
C(team)[T.Bologna]                 -0.3652   3.15e+05  -1.16e-06      1.000   -6.18e+05    6.18e+05
C(team)[T.Cagliari]                -0.9535   1.97e+05  -4.84e-06      1.000   -3.86e+05    3.86e+05
C(team)[T.Empoli]                  -0.0725      0.494     -0.147      0.883      -1.040       0.895
C(team)[T.Fiorentina]              -0.2337   3.55e+05  -6.59e-07      1.000   -6.95e+05    6.95e+05
C(team)[T.Genoa]                   -1.2364   6.31e+05  -1.96e-06      1.000   -1.24e+06    1.24e+06
C(team)[T.Juventus]                -0.7922   1.97e+05  -4.02e-06      1.000   -3.86e+05    3.86e+05
C(team)[T.Lazio]                    0.0588   1.06e+06   5.53e-08      1.000   -2.09e+06    2.09e+06
C(team)[T.Milan]                   -0.0685   3.15e+05  -2.17e-07      1.000   -6.18e+05    6.18e+05
C(team)[T.Napoli]                   0.5851   3.15e+05   1.86e-06      1.000   -6.18e+05    6.18e+05
C(team)[T.Roma]                    -0.1814   2.76e+05  -6.58e-07      1.000   -5.41e+05    5.41e+05
C(team)[T.Salernitana]             -0.7230   5.52e+05  -1.31e-06      1.000   -1.08e+06    1.08e+06
C(team)[T.Sampdoria]               -0.5866    6.7e+05  -8.76e-07      1.000   -1.31e+06    1.31e+06
C(team)[T.Sassuolo]                -0.4433   1.97e+05  -2.25e-06      1.000   -3.86e+05    3.86e+05
C(team)[T.Spezia]                   0.0481   3.55e+05   1.36e-07      1.000   -6.95e+05    6.95e+05
C(team)[T.Torino]                  -0.6977   1.18e+05   -5.9e-06      1.000   -2.32e+05    2.32e+05
C(team)[T.Udinese]                 -0.4491   1.97e+05  -2.28e-06      1.000   -3.86e+05    3.86e+05
C(team)[T.Venezia]                 -0.7210   7.88e+04  -9.15e-06      1.000   -1.54e+05    1.54e+05
C(saison)[T.reste]                 -0.3684      0.157     -2.344      0.019      -0.677      -0.060
C(opp_Formation)[T.3-5-2]           0.3678      0.262      1.405      0.160      -0.145       0.881
C(opp_Formation)[T.3-6-1]           0.3092      0.637      0.485      0.628      -0.940       1.558
C(opp_Formation)[T.3-<NA>-<NA>]    18.1789   1.74e+04      0.001      0.999    -3.4e+04     3.4e+04
C(opp_Formation)[T.4-3-3]           0.1739      0.284      0.614      0.540      -0.382       0.730
C(opp_Formation)[T.4-4-2]           0.4724      0.300      1.574      0.116      -0.116       1.061
C(opp_Formation)[T.4-5-1]           0.1600      0.260      0.615      0.539      -0.350       0.670
C(opp_Formation)[T.4-<NA>-<NA>]     1.8035      0.941      1.917      0.055      -0.041       3.648
C(opp_Formation)[T.5-3-2]           1.6529      0.826      2.001      0.045       0.034       3.272
C(opp_Formation)[T.5-4-1]           1.5332      1.243      1.234      0.217      -0.903       3.969
home                                0.4767      0.152      3.141      0.002       0.179       0.774
age                                 0.1455   3.94e+05   3.69e-07      1.000   -7.72e+05    7.72e+05
Poss                               -0.0755      0.132     -0.573      0.566      -0.334       0.183
np.log(Dist)                       -0.8925      2.265     -0.394      0.694      -5.332       3.547
Poss:np.log(Dist)                   0.0052      0.046      0.113      0.910      -0.085       0.095
SoT                                 0.4568      0.047      9.705      0.000       0.365       0.549
diff_value                          0.0042      0.001      7.519      0.000       0.003       0.005
Int                                 0.0323      0.019      1.740      0.082      -0.004       0.069
Sh                                 -0.0959      0.021     -4.465      0.000      -0.138      -0.054
PK                                  1.0627      0.195      5.459      0.000       0.681       1.444
CrdR                               -0.7136      0.242     -2.952      0.003      -1.187      -0.240
===================================================================================================
"""
Aucune équipe n'est significative LOL
Log de la dist avec poss et l'ajout de l'équipe me flingue la significativité de l'age.
On oublie ça!

Modèle "final" avec uniquement les formation opposées qui sortent plus de 100 fois :

reg = smf.logit('victoire ~ home + age + Poss + Dist + SoT + diff_value + Int + C(saison) + Sh + PK + CrdR + C(opp_Formation)',
                  data=df_reg).fit()


<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1173
Model:                          Logit   Df Residuals:                     1157
Method:                           MLE   Df Model:                           15
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2696
Time:                        21:05:49   Log-Likelihood:                -560.16
converged:                       True   LL-Null:                       -766.87
Covariance Type:            nonrobust   LLR p-value:                 1.039e-78
=============================================================================================
                                coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                    -1.4130      2.146     -0.658      0.510      -5.619       2.793
C(saison)[T.reste]           -0.3605      0.156     -2.310      0.021      -0.666      -0.055
C(opp_Formation)[T.3-5-2]     0.3283      0.254      1.293      0.196      -0.169       0.826
C(opp_Formation)[T.4-3-3]     0.2102      0.276      0.762      0.446      -0.330       0.751
C(opp_Formation)[T.4-4-2]     0.4219      0.294      1.434      0.152      -0.155       0.999
C(opp_Formation)[T.4-5-1]     0.1617      0.256      0.633      0.527      -0.339       0.663
home                          0.4838      0.152      3.188      0.001       0.186       0.781
age                           0.0944      0.081      1.170      0.242      -0.064       0.252
Poss                         -0.0494      0.010     -4.976      0.000      -0.069      -0.030
Dist                         -0.0297      0.027     -1.095      0.273      -0.083       0.023
SoT                           0.4712      0.046     10.141      0.000       0.380       0.562
diff_value                    0.0045      0.000     10.748      0.000       0.004       0.005
Int                           0.0247      0.018      1.376      0.169      -0.010       0.060
Sh                           -0.0951      0.021     -4.557      0.000      -0.136      -0.054
PK                            1.0045      0.192      5.220      0.000       0.627       1.382
CrdR                         -0.7089      0.242     -2.931      0.003      -1.183      -0.235
=============================================================================================
"""
INFOS SUR LE MODELE

np.mean(df_reg["error"])
Out[29]: -6.341427335881116e-18
Super faible c'est cool ---------------------

np.std(df_reg["error"])
Out[30]: 0.3955620646424434
Pas mal élevé pas dingue ----------------

np.percentile(df_reg["pred"],2.5)
Out[34]: 0.02769251005225839

np.percentile(df_reg["pred"],75)
Out[35]: 0.565428359825682
75% des observations ont une valeur inférieure à 0.56
C'est pas 0.5 mais pas loin mais du coup c'est peut-être cool car en comptant les défaites et les matchs nuls, il n'y aurait rien d'étonnant à ce qu'il y ait 30 % seulement de victoire dans ma base :

sum(df_reg["victoire"])/len(df_reg)
Out[38]: 0.36061381074168797
Hey hey 36% de victoire seulement, c'est bon signe !!

Quelques tests graphique sur la nécessité de faire un log pour les variables numériques :
Voir le script python pour sortir les graphs

- Dist == aucun besoin, répartition presque normale à l'oeil
- age == pas mieux en log malheureusement (c'est ptetre pour ça que c'est pas giga significatif)
- Poss == Quelle belle distribution normale (j'ai pas mieux en log)
- SoT == Impossible car j'ai des 0 qui me donne -inf et foutent la merde
- diff_value == Carrément mieux sans log 
- Int == A l'air un peu mieux en log
- Sh == pas utile je pense 
- PK == Impossible car présence de 0 (comme SoT) mais seulement un max de 2 --> Tester en variable quali ?
- Idem pour CrdR

Test avec quali PK CrdR et home et log de int :

Il faut d'abord recoder les variables PK et CrdR pour n'avoir que 2 catégories à chaque fois (il y en a au moins un, il y en a pas)

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1173
Model:                          Logit   Df Residuals:                     1157
Method:                           MLE   Df Model:                           15
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2668
Time:                        21:36:54   Log-Likelihood:                -562.24
converged:                       True   LL-Null:                       -766.87
Covariance Type:            nonrobust   LLR p-value:                 7.809e-78
=============================================================================================
                                coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                    -1.4572      2.186     -0.667      0.505      -5.741       2.827
C(home)[T.1]                  0.4750      0.151      3.138      0.002       0.178       0.772
C(saison)[T.reste]           -0.3490      0.156     -2.239      0.025      -0.654      -0.044
C(Penalty)[T.1]               1.0350      0.215      4.822      0.000       0.614       1.456
C(Rouge)[T.1]                -0.8033      0.265     -3.036      0.002      -1.322      -0.285
C(opp_Formation)[T.3-5-2]     0.2728      0.252      1.083      0.279      -0.221       0.766
C(opp_Formation)[T.4-3-3]     0.1534      0.274      0.560      0.575      -0.383       0.690
C(opp_Formation)[T.4-4-2]     0.3823      0.292      1.309      0.191      -0.190       0.955
C(opp_Formation)[T.4-5-1]     0.1183      0.254      0.466      0.641      -0.380       0.616
age                           0.0890      0.080      1.106      0.269      -0.069       0.247
Poss                         -0.0491      0.010     -4.952      0.000      -0.069      -0.030
Dist                         -0.0273      0.027     -1.009      0.313      -0.080       0.026
SoT                           0.4653      0.046     10.070      0.000       0.375       0.556
diff_value                    0.0045      0.000     10.814      0.000       0.004       0.005
np.log(Int)                   0.2044      0.164      1.243      0.214      -0.118       0.527
Sh                           -0.0955      0.021     -4.578      0.000      -0.136      -0.055
=============================================================================================
"""

J'améliore le score du carton rouge mais baisse un peu l'effet début de saison, age, Dist et Int.

J'enlève le log de Int :

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1173
Model:                          Logit   Df Residuals:                     1157
Method:                           MLE   Df Model:                           15
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2669
Time:                        21:38:59   Log-Likelihood:                -562.18
converged:                       True   LL-Null:                       -766.87
Covariance Type:            nonrobust   LLR p-value:                 7.336e-78
=============================================================================================
                                coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                    -1.2215      2.140     -0.571      0.568      -5.416       2.973
C(home)[T.1]                  0.4765      0.151      3.147      0.002       0.180       0.773
C(saison)[T.reste]           -0.3480      0.156     -2.233      0.026      -0.653      -0.043
C(Penalty)[T.1]               1.0391      0.215      4.839      0.000       0.618       1.460
C(Rouge)[T.1]                -0.8011      0.265     -3.027      0.002      -1.320      -0.282
C(opp_Formation)[T.3-5-2]     0.2779      0.252      1.104      0.270      -0.215       0.771
C(opp_Formation)[T.4-3-3]     0.1596      0.274      0.583      0.560      -0.377       0.696
C(opp_Formation)[T.4-4-2]     0.3885      0.292      1.331      0.183      -0.184       0.961
C(opp_Formation)[T.4-5-1]     0.1234      0.254      0.486      0.627      -0.374       0.621
age                           0.0880      0.080      1.094      0.274      -0.070       0.246
Poss                         -0.0491      0.010     -4.953      0.000      -0.069      -0.030
Dist                         -0.0273      0.027     -1.009      0.313      -0.080       0.026
SoT                           0.4665      0.046     10.084      0.000       0.376       0.557
diff_value                    0.0045      0.000     10.793      0.000       0.004       0.005
Int                           0.0232      0.018      1.299      0.194      -0.012       0.058
Sh                           -0.0958      0.021     -4.592      0.000      -0.137      -0.055
=============================================================================================
"""

Constat :

j'améliore le log-likelihood mais je perds en significativité sur certaines variables.
J'améliore aussi la p-value mais cette version me pose un problème :

	Dans le cas des penaltys et des cartons rouges, le fait d'en prendre un dans le match a certes un effet sur le cours du matchs mais le fait d'en avoir 2 ou plus est quand même le signe que le match part u peu en la faveur/défaveur d'une équipe.
Un fait de jeu peu entraîner un rouge et le sur nombre de l'equipe adverse peu jouer sur le résultat final (dépendemment du poste du joueur exclu et du temps de jeu écoulé). Cependant, en prendre 2 ou 3 est quand même signe que l'équipe soit n'arrive pas à suivre l'adversaire et se frustre, soit que l'arbitre a une petite préférence. Et inversement pour le nombre de penaltys obtenus.
	Pour le coup, avoir plus d'un penalty ou plus d'un carton rouge est véritablement signe d'un déséquilibre dans le match et peut entraîner un changement radical du cours du jeu. 
Malheureusement, je n'ai pas assez d'observations pour les matchs avec 2 ou plus penaltys ou carton rouges et ces valeurs ne sont pas significatives :

C(PK)[T.1]                    0.9196      0.221      4.153      0.000       0.486       1.354
C(PK)[T.2]                    2.4439      0.712      3.430      0.001       1.047       3.840
C(PK)[T.3]                   16.6306   5864.846      0.003      0.998   -1.15e+04    1.15e+04
C(CrdR)[T.1]                 -0.7592      0.273     -2.780      0.005      -1.294      -0.224
C(CrdR)[T.2]                 -0.9926      0.960     -1.034      0.301      -2.874       0.888

La valeur des 2 penaltys et cool et significative et celle des 3 est folle mais non significative
Les deux rouges ne sont pas significatifs mais me donnent envie de les garder.
Je vire de la base les matchs avec 3 peno (j'en avais 1 seul) : 

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1172
Model:                          Logit   Df Residuals:                     1154
Method:                           MLE   Df Model:                           17
Date:                Wed, 18 Jan 2023   Pseudo R-squ.:                  0.2691
Time:                        21:49:38   Log-Likelihood:                -559.74
converged:                       True   LL-Null:                       -765.85
Covariance Type:            nonrobust   LLR p-value:                 5.134e-77
=============================================================================================
                                coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                    -1.4698      2.150     -0.684      0.494      -5.683       2.744
C(home)[T.1]                  0.4842      0.152      3.189      0.001       0.187       0.782
C(saison)[T.reste]           -0.3675      0.157     -2.348      0.019      -0.674      -0.061
C(PK)[T.1]                    0.9196      0.221      4.153      0.000       0.486       1.354
C(PK)[T.2]                    2.4439      0.712      3.430      0.001       1.047       3.840
C(CrdR)[T.1]                 -0.7592      0.273     -2.780      0.005      -1.294      -0.224
C(CrdR)[T.2]                 -0.9926      0.960     -1.034      0.301      -2.874       0.888
C(opp_Formation)[T.3-5-2]     0.3515      0.256      1.372      0.170      -0.151       0.854
C(opp_Formation)[T.4-3-3]     0.2330      0.278      0.837      0.403      -0.313       0.778
C(opp_Formation)[T.4-4-2]     0.4406      0.296      1.489      0.136      -0.139       1.020
C(opp_Formation)[T.4-5-1]     0.1837      0.258      0.713      0.476      -0.321       0.689
age                           0.0969      0.081      1.200      0.230      -0.061       0.255
Poss                         -0.0497      0.010     -4.995      0.000      -0.069      -0.030
Dist                         -0.0301      0.027     -1.108      0.268      -0.083       0.023
SoT                           0.4726      0.047     10.146      0.000       0.381       0.564
diff_value                    0.0045      0.000     10.747      0.000       0.004       0.005
Int                           0.0253      0.018      1.408      0.159      -0.010       0.061
Sh                           -0.0954      0.021     -4.569      0.000      -0.136      -0.054
=============================================================================================
"""

Ca me plait bien. C'est un bon milieu entre le premier modèle avec beaucoup de variables significative mais des valeurs du modèle améliorables et le second avec un meilleur LLH et une meilleur p-value.
 
Je refais les test stat du modèle :

np.mean(df_reg["error"])
Out[81]: -1.1805592529343869e-17 ==>> minuscule c'est cool

np.std(df_reg["error"])
Out[82]: 0.39552773198394914 ==>> Un peu toujours pareil

np.percentile(df_reg["pred"],2.5)
Out[83]: 0.027486871231418193

np.percentile(df_reg["pred"],70)
Out[84]: 0.4930309242363654

A retenir de ce premier modèle de régression avant de passer au machine learning ::

	- Il n'est pas possible via un modèle logit de prouver qu'une organisation d'équipe aura plus d'impact sur une Formation qu'une autre. C'est dommage, c'est la piste que je voulais explorer, peut-être que le machine learning me permettra d'obtenir quelque chose de ça.

	- La valeur de l'équipe au sens de TransferMarkt, reflète en général plutôt bien les résultats de l'équipe. En effet, posséder des joueurs plus chers (surtout en série A plus qu'en Premier league j'imagine) entraîne un meilleur niveau de jeu donc une possession du ballon plus simple, plus de frappes dont plus de tirs cadrés et ainsi de siute. La valeur des équipe a un effet sur la victoire (triste je trouve) mais réaliste. Cependant le coefficient de la différence de valeur de 2 équipes reste relativement faible. Dans la mesure où il s'agit de montant en centaines exprimées en millions d'€ pour les plus grandes écuries, on peut multiplier ce coefficient par 100 pour obtenir l'effet d'un écart de 100 millions.
Toutefois, il reste inférieur à 0.5. Ce qui signifie que techniquement avoir un effectif beaucoup plus cher aide à gagner mais n'assure en rien une victoire. Après, tout ça reste logique.

	- Je ne dispose pas d'assez d'observations par équipe pour introduire l'équipe comme une variable couplée à la formation adverse afin d'observer l'effet d'un 4-3-3 sur l'Inter par exemple...

	- Le fait de jouer à domicile entraîne 48 % de chances de plus de victoire (quid de Milan et de l'Inter lorsqu'ils se recontrent?)

	- Il existe un effet début de saison/automne que je dois encore approfondir. Durant cette période il semblerait que les chances de victoire soient plus élevée. Pour le moment, par pure logique je penses simplement qu'en début de saison les équipes sont au complet (pas de blessé) et reposées, elles veulent entrer en matière le mieux possible et s'arrachent peut-être plus pour aller chercher les 3 points afin d'asseoir leur leadership dans le championnat avant d'atteindre une vitesse de croisière le reste de la saison quitte à prendre un ou deux matchs nuls en plus pour préserver les stars (pour la LDC par exemple).

	- L'obtention de penaltys augmente de manière exponentielle les chances de victoire. Un seul penalty (à équipe égales) augmente de 91% les chance de victoire. 2 les augmente de plus de 200 % et 3 (comme vu tout à l'heure) de plus de 1 600% 

	- L'obtention de cartons rouges entraînent une chute des chances de victoire (75% pour 1 rouge et 99 % pour 2 à équipes équivalentes). L'effet est bien plus fort que ce que j'aurais imaginé avant de créer le modèle (surtout pour 1). Je pensais qu'il arrivait souvent qu'une équipe gagne même en ayant pris un rouge parce que le coach organise bien le remplacement et joue plus la défense. L'étude des matchs nuls et défaites dans le cadre du machine learning m'aidera peut-être à y voir plus clair. 
 
	- Les deux seules formations pas trop dégueu en termes de significativité sont le 3-5-2 et le 4-4-2. Le 4-5-1 étant la référence du modèle, toutes les autres formations augmentent les chances de victoire (jusqu'à 44 % pour le 4-4-2). Le 4-5-1 étant souvent défensif, cela s'expliquerait ainsi. Tester avec un autre système référence serait intéliigent.

	- L'âge n'est pas très significatif mais ce qu'il indique est que plus un effectif est expérimenté, plus il a de chance de gagner. Bien sûr, il n'est pas difficile d'imaginer qu'une équipe de quadra en chierait face à une équipe de série A. Ce qu'il faut voir ici, c'est que lorsque l'effectif monté par les dirigeants et les directeurs sportifs sont un peu plus experimentés, ils sont plus peformants (sûrement plus chers aussi et donc cela se recroise avec la diff_value vue plus haut ==> entraîne plus de possession donc plus de frappes, donc plus de tirs cadrés et plus de buts etc...) BTW, le max est de 27.2 ans , c'est pas bien vieux... Mais cette variable traduit de la bonne conception d'un effectif je pense.

	- Etonnemment, le coeff de la possession est négatif. cela voudrait dire que plus une équipe a le ballon, moins elle peut gagner (à hauteur de -5 % si elle a 100% de possession). Je ne m'attendais pas à ça. Du coup, pourquoi pas mais qu'est ce qui explique cela? Est-ce qu'une trop forte possession entraîne plus de défene en face et donc moins de réussite --> moins de buts --> plus de matchs nuls (voir plus de défait si en plus l'adversaire profite d'un contre ou d'un penalty). En soit, l'équipe de France a prouvé en 2018 que ça tenait la route de laisser le ballon à l'adversaire. Est-ce que les coachs en Italie se sont tous mis à la page Deschamps ? Je vais continuer de matter des  matchs et me renseigner là dessus quand même car même si l'effet reste très léger il n'en est pas moins contre-intuitif (prends ça dans les dents Mourinho).

	- Le fait que le coefficient de la distance soit négatif est quant à lui bien plus logique. En effet, si l'équipe tire en moyenne de plus loin c'est qu'elle n'arrive pas à ce créer les bonnes opportunité. Le cas extrême c'est le houra-football dans lequel l'équipe frappe désespéremment à 45 mètres du cadre parce qu'au delà, elle se fait reprendre la balle. Cette variable semble également traduire de la domination d'une équipe sur l'autre. Tester la colinéarité avec les cartons rouges et/ou les pénaltys.

	- SoT est significatif et positif ==> Logique, plus l'équipe se procure de frappes cadrées, plus elle a de chance de marquer et donc de gagner le match. Rien à dire ici.

	- Effectuer plus d'interception augmente les chance de victoire : plutôt logique. Mais cet élément est à garder dans un coin de la tête si je veux bosser sur l'effet milieu def d'une équipe (je pense que le milieu défensif est peut-être l'élément le plus important d'un bon effectif et d'une équipe qui gagne. Un meilleur 6 entraîne plus de sérénité et de meilleurs résultats ==> C'est ce que j'aimerais prouver pour montrer que l'attaque c'est cool mais le milieu c'est plus important).

	- Enfin, le nombre de tir total est significatif mais négatif --> En gros prendre pleins de tirs n'assure pas du tout de marquer plus que l'adversaire, c'est le réalisme qui paye le plus #Deschamps encore. Cependant, il serait intéressant de coupler cette variable avec la distance (plutôt que les tirs cadrés comme je l'ai déjà fait). Dans la matrice de corrélation de la table, ces deux variables ont un coefficient de -0.1. En gros, si une équipe tir de plus loin, elle a automatiquement moins de frappes.

Pour poursuivre, j'aimerais donc bosser sur les effets des formations sur les équipes et je commence fortement à penser à un indicateur de domination dans le jeu regroupant le nombre de cartons rouges/jaunes de l'adversaire, la possession (même si on a vu que cette variable était contre-intuitive), la distance de tir et le nombre total de tirs. Ces deux dernières expriment les difficultés rencontrées par l'équipe à attaquer alors que les penaltys et les cartons, montrent plutôt les difficultés à défendre. 

A priori l'effet sur la possession viendrait du fait que seules quelques équipes jouent la possession mais que le Calcio est un football de contre. Je vérifie ça dans les datas :

205 victoire sur 551 équipes avec une possession de plus de 50 % ==> 37 %
Le top des équipes avec la possession et qui gagnent :
Napoli            40
Internazionale    31
Milan             29
Lazio             23
Juventus          22

En effet, le Napoli, l'Inter, Milan, la Lazio et la Juve ressortent (5 des 5 premiers de série A cette année). Ce sont plutôt les gros qui jouent la possession.

Autre question :: évolution des formations avec 3 défenseurs .

Pas d'évolution notable sur les 3 saisons du fichier. Cependant, je dois confirmer le fait que c'est un truc plutôt italien (catenacio) axé sur la défense. Je suis biaisé car pour moi les systèmes les plus communs seront plutôt des variantes du 4-4-2 ou du 4-3-3 mais toujours avec 4 défenseurs. Mais je peux me tromper. Pour en être sûr je devrais regarder dans d'autres championnats.
A priori c'est plutôt un style de jeu italien dans lequel les deux milieux latéraux passent en attaque sur les phases offensives et viennent renforcer la défense (défense à 5) lors des phases défensives == est-ce que c'est le catenacio ?
 

Ne serait-il pas possible de voir l'effet d'une formation sur la difficulté d'attaquer et de défendre d'une équipe == A CREUSER!

Voir également si je peux pas tester mon modèle sur les matchs non perdu pour voir la différence d'effet sur la victoire ou le match nul ou un truc du style (car je verrai pas les coeff en machine learning)

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               not_lose   No. Observations:                 1172
Model:                          Logit   Df Residuals:                     1154
Method:                           MLE   Df Model:                           17
Date:                Thu, 19 Jan 2023   Pseudo R-squ.:                  0.2193
Time:                        21:01:05   Log-Likelihood:                -607.06
converged:                      False   LL-Null:                       -777.61
Covariance Type:            nonrobust   LLR p-value:                 3.484e-62
=============================================================================================
                                coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                     2.0480      2.015      1.016      0.310      -1.902       5.998
C(home)[T.1]                  0.3698      0.144      2.563      0.010       0.087       0.653
C(saison)[T.reste]            0.2307      0.149      1.550      0.121      -0.061       0.522
C(PK)[T.1]                    0.9288      0.249      3.737      0.000       0.442       1.416
C(PK)[T.2]                   24.3161   5.08e+04      0.000      1.000   -9.95e+04    9.96e+04
C(CrdR)[T.1]                 -0.6737      0.224     -3.007      0.003      -1.113      -0.235
C(CrdR)[T.2]                  0.1299      0.826      0.157      0.875      -1.489       1.749
C(opp_Formation)[T.3-5-2]     0.3138      0.239      1.315      0.189      -0.154       0.782
C(opp_Formation)[T.4-3-3]    -0.1191      0.254     -0.468      0.639      -0.618       0.379
C(opp_Formation)[T.4-4-2]     0.2910      0.279      1.045      0.296      -0.255       0.837
C(opp_Formation)[T.4-5-1]     0.0491      0.235      0.209      0.834      -0.411       0.509
age                           0.0170      0.075      0.227      0.820      -0.130       0.164
Poss                         -0.0560      0.010     -5.799      0.000      -0.075      -0.037
Dist                         -0.0183      0.024     -0.764      0.445      -0.065       0.029
SoT                           0.3356      0.046      7.342      0.000       0.246       0.425
diff_value                    0.0044      0.000     10.847      0.000       0.004       0.005
Int                           0.0088      0.017      0.511      0.609      -0.025       0.043
Sh                           -0.0484      0.020     -2.367      0.018      -0.088      -0.008
=============================================================================================

le R² est pire
le LLH est pire 
et la p value aussi

Le double pénalty est complétement non significatif
presque p	areil pour le double rouge ==> Quelque part ces deux modifs sont logiques et confirment leur effet sur la défaite vu dans le modèle précédent.

L'age est encore moins significatif également

Sur les coeff significatifs, quelles peuvent être les différences avec le modèle basé sur les victoires :
	La possession a un effet encore plus négatif == Donc les équipe qui ont la possession ne font même pas de matchs nuls
	Les tirs cadrés baissent également (logique puisqu'on étudie aussi les matchs nuls dans ce modèle)
	La différence de valeur bouge peu mais vu qu'elle induit des montant élevés, ce n'est pas si anodin. Elle a ici un peu moins d'impact sur le résultat du match.



Teste avec une autre formation que le 3-4-3 en référence pour les coeffs.

Avec le 4-5-1 en référence :

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1172
Model:                          Logit   Df Residuals:                     1154
Method:                           MLE   Df Model:                           17
Date:                Fri, 20 Jan 2023   Pseudo R-squ.:                  0.2691
Time:                        20:15:15   Log-Likelihood:                -559.74
converged:                       True   LL-Null:                       -765.85
Covariance Type:            nonrobust   LLR p-value:                 5.134e-77
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                  -1.2862      2.138     -0.602      0.547      -5.476       2.904
C(home)[T.1]                                                0.4842      0.152      3.189      0.001       0.187       0.782
C(saison)[T.reste]                                         -0.3675      0.157     -2.348      0.019      -0.674      -0.061
C(PK)[T.1]                                                  0.9196      0.221      4.153      0.000       0.486       1.354
C(PK)[T.2]                                                  2.4439      0.712      3.430      0.001       1.047       3.840
C(CrdR)[T.1]                                               -0.7592      0.273     -2.780      0.005      -1.294      -0.224
C(CrdR)[T.2]                                               -0.9926      0.960     -1.034      0.301      -2.874       0.888
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.1837      0.258     -0.713      0.476      -0.689       0.321
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]     0.1678      0.204      0.823      0.410      -0.232       0.567
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]     0.0493      0.229      0.215      0.830      -0.400       0.499
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.2569      0.251      1.024      0.306      -0.235       0.749
age                                                         0.0969      0.081      1.200      0.230      -0.061       0.255
Poss                                                       -0.0497      0.010     -4.995      0.000      -0.069      -0.030
Dist                                                       -0.0301      0.027     -1.108      0.268      -0.083       0.023
SoT                                                         0.4726      0.047     10.146      0.000       0.381       0.564
diff_value                                                  0.0045      0.000     10.747      0.000       0.004       0.005
Int                                                         0.0253      0.018      1.408      0.159      -0.010       0.061
Sh                                                         -0.0954      0.021     -4.569      0.000      -0.136      -0.054
===========================================================================================================================
"""
Le 3-4-3 diminue les chances de victoires par rapport au 4-5-1 (pas significatif non plus...). Le 4-3-3 semble à peu près équivalent quant les 3-5-2 et le 4-4-2 reste plus prolifiques. Aucun des coeff n'est significatif mais la relation entre les systèmes est intéressante.


	VIF Factor		features
0	853.8478750880763		Intercept
1	1.0532799758911306		C(home)[T.1]
2	1.0266485465276423		C(saison)[T.reste]
3	1.044741646611513		C(PK)[T.1]
4	1.0404525985985305		C(PK)[T.2]
5	1.0290204619192416		C(CrdR)[T.1]
6	1.0071435908750428		C(CrdR)[T.2]
7	2.3821053928058014		C(opp_Formation)[T.3-5-2]
8	2.0179573731842817		C(opp_Formation)[T.4-3-3]
9	1.8609422807063412		C(opp_Formation)[T.4-4-2]
10	2.3526149077054685		C(opp_Formation)[T.4-5-1]
11	1.0163691550381686		age
12	1.6144857103646557		Poss
13	1.1304628615029992		Dist
14	1.8947546248115334		SoT
15	1.4608409734847072		diff_value
16	1.0504840162007816		Int
17	2.290348812104856		Sh

Concernant les variables rien d'inquiètant. Les valeur sont innférieurs à 10 (seuil technique de colinéarité). Il n'y a, à priori pas de soucis de multicolinéarité.
Par contre, la valeur dingue de l'intercept semblerait venir d'un soucis d'une des variables quali qui se comporterait comme une constante et qui, par conséquent serait reliée directement à l'intercept. Cela pourrait aussi venir de la part du modèle qui n'est pas expliqué ? Vu la valeur de mon R² c'est une piste que je vois bien. Après, comme il n'y a finalement que peu de cartons rouge par exemple, peut-être que le problème peu venir de là. Idem pour les penaltys. 

Les péno :
0    1017
1     141
2      14

Les cartons rouges :
0    1046
1     117
2       9

Pour palier ce problème, je peux déjà essayé avec les cartons jaunes à la place des rouges :
2    351
3    285
1    235
4    145
0     87
5     49
7      9
6      9
8      2

8 ???

Test avec cartons jaunes de la table Vif :
La valeur de l'intercept passe à 881. C'est pire !

Bon bah on va garder ce modèle.

##En attendant :

Stats descriptives de la table en sortie csv

Voir la création d'un indicateur de difficultés defensives et un de difficultés offensives ==> 
Ce qu'on a comme variables pour créer ça:
ATTAQUE
- nombre de frappes (positif) :: moyenne 12.75 ecart-type 5.72 mediane 12 max 46 75% 16
- nombre de tirs cadrés (positif) :: moyenne 4.24 ecart-type 2.51 mediane 4 max 16 75% 6
- possession (positif) :: moyenne 50.6 ecart-type 9.75 mediane 51 max 82 75% 57
- Distance de tirs (négatif) :: moyenne 17.7 ecart-type 3 mediane 17.6 max 32.4 min 7.7
- nombre de fautes provoquées :: moyenne 13.17 ecart-type 4 mediane 13 max 28
- et cartons (positifs) :: moyenne 2.5 ecart-type 1.5 mediane 2 max 9
- penalty (positifs) :: moyenne 0.15 ecart-type 0.39 mediane 0 max 3
- Int (positif) :: moyenne 10 ecart-type 4 mediane 10 max 28

DEFENSE
- nombre de fautes (negatif) :: moyenne 13 ecart-type 4.2 mediane 13 max 28
- nombre de penalty et coup francs encaissés (négatifs) :: moyenne 0.63 ecart-type 0.8 mediane 0 max 5
- nombre de cartons pris (négatif) :: moyenne 2.3 ecart-type 1.4 mediane 2
- nombre de tirs encaissés (négatif) :: moyenne 12.5 ecart-type 5.54 mediane 12 max 46 75% 16 

Dans la mesure où l'on a vu que la série A est un championnat avec plus d'équipes qui jouent en contre, dans lequel la possession n'est pas un signe de domination et dans lequel la défense est très importante, quels sont les stats les plus importantes pour évaluer la domination d'une équipe:

Si une équipe italienne est dominée alors il y a plus de chance que ce soit sa défense qui soit mise à mal.
Pour moi les valeurs qui vont le plus traduire ça sont :
- Nombre de tirs encaissés
- Nombre de fautes commises,
- Nombre de cartons pris 
- puis le nombre de coup franc et penaltys (encaissés) :: ils peuvent découler de faits de jeu, d'un arbitrage douteux

Si une équipe italienne domine un match elle n'a pas forcément le ballon mais elle sera plus souvent devant le but. Elle aura également plus de fautes mais aussi, et surtout sa défense sera meilleure :
- Nombre de frappes 
- Faiblesse de la distance de frappe (trouver un moyen de lier cette info avec le nombre de frappes)
- Nombre d'interception
- Nombre de fautes provoquées ou nombre de cartons provoqués
- Possession en dernier car pas pertinent ici

J'aimerais que cet indicateur puisse prendre la forme [-1 ; 1] avec -1 pour l'équipe totalement sous l'eau qui se fait marcher dessus et 1 pour l'équipe qui fait ce qu'elle veut en match et écrase l'autre. Bien sûr, il n'y aura jamais ces deux valeurs mais c'est cet interval qui m'interesse.
Ou alors, je peux créer deux indicateurs , le premier traduit les facilités/difficultés offensives et le second les facilités/difficultés offensives (pour les intégrer ensuite dans le modèle). Dans ce cas certaines variables passent de l'attaque à la défense (Interception notamment).

Exemple :
F/D défense :: Nombre d'interception - (nb de tirs encaissés + nb de fautes commises (nb de cartons) + nombre de coup de pied arrêtés encaissés)
F/D attaque :: Nombre de frappes + Nombre de fautes provoquées (ou cartons) + "possession" - distance de frappe  

Avec les moyennes :
FDD <- 10 - (12.5 + 13 + 0.63)

FDA <- 12.75 + 13 + 0.56 - 18

Il faut pondérer des trucs sinon ça va ressembler à rien et surtout , j'ai besoin de revaloriser les coup francs et penaltys encaissés (0.63).
Je pourrais tester de prendre la proportion de chaque stat par rapport au 3 eme quartile. Comme ça j'obtiens des indicateurs qui sont tous entre 0 et 1.quelque chose histoire de valoriser les perf incroyables.

FDD <- 0.75 - (0.75 + 0.6 + 0.6) -- moyenne = -1.2 -- max :: 0 - (2.9 + 1.75 + 5) = -9.65 -- min :: 2.15 - (0 + 0 + 0) = 2.15

FDA <- 0.75 + 0.6 + 0.7 - 0.9 -- moyenne 1.15 -- max :: 2.9 + 1.75 + 1.5 - 0.4 = 5.75 -- min :: 0 + 0 + 0.32 - 1.66 = -1.34

Les échelles sont pas les mêmes et les indicateurs ne sont pas comparables mais cette méthode de calcul me parait pas mal. Ajouté dans le modèle cela pourrait apporter des infos supplémentaires.

Top et flop dans la base 
top défense = Napoli avec un 1.00
pire défense = Bologna avec un -7.04

Top attaque = Roma avec un 3.94
Pire attaque = Genoa avec un -0.34

Top 5 defenses en moyenne sur les 3 saisons :
Atalanta 		-1.142113
Milan 		-1.144344
Napoli 		-1.163518
Lazio 		-1.221497
Fiorentina 	-1.267857

Pires défenses 

Venezia 		-2.284361
Salernitana 	-1.853888
Spezia 		-1.799311
Empoli 		-1.724529
Cagliari 		-1.694634

Top 5 attaques en moyenne :
Napoli  			1.953039
Internazionale  	1.819087
Atalanta  		1.812204
Milan  			1.774427
Sassuolo  		1.740468

Pires Attaques :

Venezia  		1.205397
Genoa  		1.278745
Spezia  		1.340549
Salernitana  	1.366890
Cagliari  	1.415780

Je m'apercois que je n'ai pas l'INTER ??? Ils disparaissent avec le dropna . A vérifier d'où ça vient (diff_value ??) == C'était un problème de nom dans la base d'origine (idem pour hellas verone).

recalcul du FDA avec l'ajout du pourcentage de passes réussies :

Meilleures attaques : 
Napoli  			2.967030
Internazionale  	2.819415
Atalanta  		2.768520
Sassuolo  		2.740186
Juventus  		2.739583

Pires attaques :
Cagliari  	2.302430
Spezia  		2.237433
Salernitana  	2.228053
Genoa  		2.128451
Venezia  		2.065401

L'Ac milan sort du top 5 je sais pas trop si c'est un bon signe
sur les 5 derniers c'est toujours les mêmes mais dans un ordre différent.

Meilleure perf : 4.91 par la Roma.

Si j'ajoute ces scores à la régression, il faut que je vire des variables histoire de pas faire doublons (nb de tirs etc ...).

A virer pour FDD == Int je crois et en plus y a pas de corrélation forte entre les deux donc peut-être la garder
A virer pour FDA == Poss et Cmp, Sh et peut-être Sot + forte corrélation avec diff_value

En croisant les formations dans la table vif je constate une colinéarité un peu élevée entre certaines formation 
(ex 10.4 de vif pour le 4-3-3 de l'opponent)

Je test un modèle avec FDA et FDD et le croisement des formations :

					victoire ~ C(home) + FDD + FDA + age + Dist + SoT + diff_value + Int + C(saison) + C(PK) + C(CrdR) + C(Formation)*C(opp_Formation, Treatment(reference="4-5-1"))

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1436
Model:                          Logit   Df Residuals:                     1398
Method:                           MLE   Df Model:                           37
Date:                Mon, 23 Jan 2023   Pseudo R-squ.:                  0.2617
Time:                        20:36:50   Log-Likelihood:                -698.10
converged:                       True   LL-Null:                       -945.56
Covariance Type:            nonrobust   LLR p-value:                 1.877e-81
=================================================================================================================================================
                                                                                    coef    std err          z      P>|z|      [0.025      0.975]
-------------------------------------------------------------------------------------------------------------------------------------------------
Intercept                                                                        -0.4973      1.998     -0.249      0.804      -4.414       3.420
C(home)[T.1]                                                                      0.3968      0.136      2.909      0.004       0.130       0.664
C(saison)[T.reste]                                                               -0.2923      0.141     -2.070      0.038      -0.569      -0.016
C(PK)[T.1]                                                                        1.0967      0.201      5.451      0.000       0.702       1.491
C(PK)[T.2]                                                                        2.4079      0.748      3.221      0.001       0.943       3.873
C(CrdR)[T.1]                                                                     -0.6439      0.255     -2.530      0.011      -1.143      -0.145
C(CrdR)[T.2]                                                                     -0.8260      0.940     -0.878      0.380      -2.669       1.017
C(Formation)[T.3-5-2]                                                            -0.0587      0.427     -0.137      0.891      -0.896       0.778
C(Formation)[T.4-3-3]                                                            -0.0081      0.478     -0.017      0.987      -0.944       0.928
C(Formation)[T.4-4-2]                                                            -0.0615      0.495     -0.124      0.901      -1.031       0.908
C(Formation)[T.4-5-1]                                                            -0.4750      0.445     -1.066      0.286      -1.348       0.398
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]                           0.0559      0.484      0.116      0.908      -0.893       1.004
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]                          -0.1821      0.444     -0.410      0.682      -1.052       0.688
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]                          -0.4049      0.572     -0.708      0.479      -1.526       0.716
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]                           0.4277      0.611      0.700      0.484      -0.769       1.625
C(Formation)[T.3-5-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.2832      0.607     -0.466      0.641      -1.473       0.907
C(Formation)[T.4-3-3]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.8655      0.788     -1.098      0.272      -2.411       0.680
C(Formation)[T.4-4-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.4683      0.814     -0.575      0.565      -2.064       1.128
C(Formation)[T.4-5-1]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]     0.3445      0.637      0.541      0.588      -0.903       1.592
C(Formation)[T.3-5-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]    -0.1455      0.559     -0.260      0.795      -1.242       0.951
C(Formation)[T.4-3-3]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]     0.3454      0.608      0.568      0.570      -0.847       1.537
C(Formation)[T.4-4-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]    -0.1321      0.676     -0.195      0.845      -1.457       1.193
C(Formation)[T.4-5-1]:C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]     0.6989      0.577      1.212      0.225      -0.431       1.829
C(Formation)[T.3-5-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]     0.1674      0.680      0.246      0.805      -1.165       1.500
C(Formation)[T.4-3-3]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]     0.7225      0.789      0.916      0.360      -0.823       2.268
C(Formation)[T.4-4-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]     0.3697      0.841      0.440      0.660      -1.279       2.018
C(Formation)[T.4-5-1]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]     0.6726      0.711      0.946      0.344      -0.721       2.066
C(Formation)[T.3-5-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]    -0.7300      0.745     -0.980      0.327      -2.190       0.730
C(Formation)[T.4-3-3]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]    -0.4090      0.856     -0.478      0.633      -2.088       1.269
C(Formation)[T.4-4-2]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]    -0.3485      0.959     -0.364      0.716      -2.228       1.531
C(Formation)[T.4-5-1]:C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.3821      0.748      0.511      0.609      -1.083       1.847
FDD                                                                               0.2498      0.079      3.160      0.002       0.095       0.405
FDA                                                                              -1.2725      0.175     -7.292      0.000      -1.615      -0.930
age                                                                               0.1173      0.072      1.623      0.105      -0.024       0.259
Dist                                                                             -0.0878      0.026     -3.351      0.001      -0.139      -0.036
SoT                                                                               0.4183      0.037     11.408      0.000       0.346       0.490
diff_value                                                                        0.0038      0.000     10.794      0.000       0.003       0.005
Int                                                                               0.0288      0.017      1.647      0.100      -0.005       0.063
=================================================================================================================================================
"""

R² pas dingue, le LLH est à chier 

Le croisement de formation avec la meilleure p-value est le 4-5-1 de l'équipe contre le 3-5-2 de l'opposant avec 0.225 ce qui est mauvais.
FDA et FDD sont significatifs.
Les opp_formation ont des meilleures p-values même si elles restent élevées que les formation tout court.
 
retest:

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1436
Model:                          Logit   Df Residuals:                     1418
Method:                           MLE   Df Model:                           17
Date:                Mon, 23 Jan 2023   Pseudo R-squ.:                  0.2554
Time:                        20:43:13   Log-Likelihood:                -704.08
converged:                       True   LL-Null:                       -945.56
Covariance Type:            nonrobust   LLR p-value:                 7.338e-92
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                  -0.1760      1.904     -0.092      0.926      -3.909       3.557
C(home)[T.1]                                                0.3982      0.135      2.948      0.003       0.133       0.663
C(saison)[T.reste]                                         -0.2714      0.138     -1.971      0.049      -0.541      -0.002
C(PK)[T.1]                                                  1.0925      0.199      5.502      0.000       0.703       1.482
C(PK)[T.2]                                                  2.4134      0.709      3.406      0.001       1.025       3.802
C(CrdR)[T.1]                                               -0.6135      0.251     -2.442      0.015      -1.106      -0.121
C(CrdR)[T.2]                                               -0.7850      0.917     -0.856      0.392      -2.582       1.012
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.0786      0.211     -0.372      0.710      -0.493       0.336
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]     0.0033      0.180      0.018      0.985      -0.349       0.355
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]    -0.0386      0.215     -0.180      0.857      -0.459       0.382
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.2020      0.235      0.858      0.391      -0.259       0.664
FDD                                                         0.2517      0.078      3.235      0.001       0.099       0.404
FDA                                                        -1.2199      0.171     -7.134      0.000      -1.555      -0.885
age                                                         0.0935      0.066      1.407      0.160      -0.037       0.224
Dist                                                       -0.0864      0.025     -3.412      0.001      -0.136      -0.037
SoT                                                         0.4153      0.036     11.402      0.000       0.344       0.487
diff_value                                                  0.0038      0.000     10.787      0.000       0.003       0.004
Int                                                         0.0271      0.017      1.595      0.111      -0.006       0.060
===========================================================================================================================
"""

Sans Poss et Sh je perds en R²

Je recalcul le FDA sans Poss pour pouvoir récupérer la possession dans le modèle et sans Int car pas significatif

reg = smf.logit('victoire ~ C(home) + Poss + FDD + FDA + age + Dist + SoT + diff_value + C(saison) + C(PK) + C(CrdR) + C(opp_Formation, Treatment(reference="4-5-1"))',
                  data=df_reg).fit()


<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                 1436
Model:                          Logit   Df Residuals:                     1418
Method:                           MLE   Df Model:                           17
Date:                Mon, 23 Jan 2023   Pseudo R-squ.:                  0.2649
Time:                        20:49:41   Log-Likelihood:                -695.03
converged:                       True   LL-Null:                       -945.56
Covariance Type:            nonrobust   LLR p-value:                 1.141e-95
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                   0.6999      1.853      0.378      0.706      -2.931       4.331
C(home)[T.1]                                                0.3435      0.136      2.524      0.012       0.077       0.610
C(saison)[T.reste]                                         -0.2769      0.139     -1.994      0.046      -0.549      -0.005
C(PK)[T.1]                                                  1.0894      0.200      5.437      0.000       0.697       1.482
C(PK)[T.2]                                                  2.5643      0.723      3.547      0.000       1.148       3.981
C(CrdR)[T.1]                                               -0.6332      0.252     -2.509      0.012      -1.128      -0.139
C(CrdR)[T.2]                                               -0.7987      0.942     -0.848      0.397      -2.645       1.048
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.1218      0.213     -0.571      0.568      -0.540       0.296
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]     0.0801      0.182      0.440      0.660      -0.276       0.436
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]    -0.0905      0.217     -0.417      0.676      -0.515       0.334
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.2518      0.237      1.063      0.288      -0.213       0.716
Poss                                                       -0.0611      0.009     -6.588      0.000      -0.079      -0.043
FDD                                                         0.3078      0.074      4.160      0.000       0.163       0.453
FDA                                                        -0.6250      0.218     -2.866      0.004      -1.052      -0.198
age                                                         0.0978      0.067      1.464      0.143      -0.033       0.229
Dist                                                       -0.0591      0.026     -2.243      0.025      -0.111      -0.007
SoT                                                         0.3880      0.037     10.540      0.000       0.316       0.460
diff_value                                                  0.0041      0.000     11.251      0.000       0.003       0.005
===========================================================================================================================
"""

Je récupère mon R²
Pas de soucis avec l'intercept non significatif.
Je garde les formations pour le moment mais ça commence à prendre forme.

Pour FDD et FDA :
formules 
data["FDD"] = (data["Int"]/(data.Int.quantile([0.75]).values)) - ((data["opp_Sh"]/(data.opp_Sh.quantile([0.75]).values)) + 
                                                (data["Fls"]/(data.Fls.quantile([0.75]).values)) + 
                                                (data["coup_arret"]/(data.coup_arret.quantile([0.75]).values)))

data["FDA"] = ((data["Sh"]/(data.Sh.quantile([0.75]).values)) + 
               (data["opp_fls"]/(data.opp_fls.quantile([0.75]).values)) + 
               (data["Cmp"]/(data.Cmp.quantile([0.75]).values))) - (data["Dist"]/(data.Dist.quantile([0.75]).values)) 

Lorsque FDD augmente les chances de victoires augmentent. 
Lorsque FDA augmente les chances de victoires diminuent ??? --> Ca c'est vraiment chelou car ca veut dire que plus je frappe de près et plus je réussi mes passes et plus je risque de perdre ?
DAFUK

Au passage, les coup de pieds arrêté et les tirs de l'adversaires ne sont pas significatifs tandis que les fautes de l'adversaire le sont.
Je ne l'ajoute pas car c'est déjà pris en compte dans le FDD !

##PROCHAINE ETAPE pour le modèle == INTEGRER DES VARIABLES SUR LE NIVEAU DES JOUEURS A CHAQUE POSTE 


Recherche des données par postes

Ce travail va nécessiter de nouvelles tables de données mais aussi des recherches sur les statistiques utiles pour évaluer la productivité des joueurs en fonction de leur poste puis pour les classer en fonction de leur centile de productivité par rapport aux autres joueurs du même poste 

!!!ACHTUNG ::: Se concentrer sur un seul championnat pour que les joueurs soient comparables --> En effet, si je venais à ajouter des joueurs de premiere league et de ligue 1 dans le classement en fonction de la productivité je viendrais totalement biaiser le résultat puisque la plupart de ces équipes ne jouent jamais les mêmes équipes que celles des autres championnats (hors LDC et europa league). 
Par conséquent, la productivité d'un attaquant de série A où le jeu est très défensif avec des grosses écuries européenne n'a rien à voir avec les performances d'un attaquant de ligue 1 (déso), championnat dans lequel les différences de niveaux sont encore trop marquées et où le jeu est moins défensif.

Par contre je risque d'avoir des petits échantillons du coup. Je vais partir sur les stats cumulées sur les saisons et les stats moyennes.
FBREF sera la source je pense.

Definition poste par poste pour voir les variables qui ont de l'intérêt.

Après, il faut simplifier un max pour pas trop démultiplier les postes et donc les observations.

Mon idée de base portant sur les milieux défensifs, je les garde tels quels.

Je groupe les défenseurs centraux entre eux
Je groupe les défenseurs latéraux
Je vais peut-être grouper les milieux centraux et les milieux offensifs même si les premiers doivent à priori plus être présent à la récupération tandis que les seconds sont plur en attaque
Je groupe les milieux latéraux
Je groupe les attaquants (ce ne sont vraiment pas l'objet de cette étude)
et je prends le gardien.

J'ai donc 7 groupes de postes pour lesquels je dois évaluer la productivité (je ne peux pas affirmer qu'un joueur est meilleur qu'un autre dans la mesure où ces stats ne reflètent pas forcément son talent et qu'il existe une infinité de facteurs qui peuvent abaisser la productivité chiffrable d'un joueur). Le but ici est vraiment de pouvoir distinguer la présence d'un joueur qui apporte beaucoup à un poste face à celui d'une autre équipe et d'en évaluer l'impact TCEPA.

Il faudra que je me penche sur les modèle où on peut bloquer les effets des autres postes. En effet, il y a de grandes chances qu'une équipe avec un très bon 6, ait également un bon 10, un bon 9 etc ... et inversement pour les clubs à plus petits budgets.

	MILIEUX DEFENSIFS

wiki :  ils sont là pour intercepter les ballons et briser l'attaque adverse.

decathlon : LA VISION D’UNE TOUR DE CONTRÔLE / UNE TECHNIQUE À LA BUSQUETS (> Je fais le minimum de touches de balles > Je fais une passe puis je me déplace pour proposer une solution > Je favorise le jeu en triangle, les appels contre-appels) / UNE GESTION DE L’EFFORT CALCULÉE AU MÈTRE PRÈS /  LE POSITIONNEMENT

footeo : On dit souvent d’un bon milieu défensif qu’il possède un “gros volume de jeu”, ce qui signifie qu’il est capable de multiplier les efforts et d’être toujours près du ballon.
Tous ses gestes - les conduites de balles, les passes courtes, les passes longues - doivent être les plus simples et précis possibles.

sport-equipement.fr : Ce sont sans doute les joueurs qui courent le plus pendant un match de foot. En effet, ils doivent tout faire ! Un milieu de terrain se doit d’empêcher la balle d’arriver dans les pieds de l’attaquant adverse, et à l’inverse, bien ajuster ses passes pour placer son attaquant dans les meilleures conditions possible.

Le placement et la lecture du jeu semblent être des notions qui sont difficiles à comptabiliser.
Cependant, en ce qui concerne le volume de jeu, la défense et les qualité technique je pourrais partir sur:
	
	- Nombre de km parcourus == Je le trouve pas sur FBREF
	- Nombre d'interceptions
	- %age de passes réussies
	- p-ê passes décisives
	- Tacles réussis

	- Nombre de cartons
	- Balles perdues 

	MILIEUX OFFENSIFS

wiki : Ils sont chargés d'organiser le jeu offensif de l'équipe. C'est le poste qui permet la meilleure expression du potentiel technique du joueur.

footeo : Si la qualité de dribble est très importante, elle est moins décisive si elle n’est pas accompagnée d’une grosse explosivité et d’une bonne vitesse de pointe / Si le sens du dribble est la qualité la plus évidente, il doit aussi être accompagné d’une bonne qualité de passe et de centre pour permettre d’être décisif 

Des gars technique quoi :
	
	- Nombre de dribbles (ou %age de réussis)
	- Nombre de passes réussies
	- Nombre de passes décisives
	- Nombre de buts sûrement
	- Nombre d'occasions créées

	- Fautes
	- Nombre de hors-jeu (placement)

	MILIEUX LATERAUX

wiki :le milieu de terrain est un joueur dont le rôle est de réaliser la liaison entre la défense et l'attaque. Après la récupération de la balle

Plusieures pages le confondent avec le milieu offensif (en plus ça doit dépendre des systèmes.) Du coup je vais utiliser les mêmes variables et supprimer cette catégorie.

	DEFENSEURS CENTRAUX

wiki : Les défenseurs (ou arrières) sont des joueurs de football dont la tâche principale consiste à perturber, ou idéalement empêcher, le jeu d'attaque de l'équipe adverse.

uniqueathlete : l’objectif principal d’un défenseur central de stopper les attaquants et d’empêcher à ce que les attaquants parviennent dans la surface de réparation ou parviennent à s’approcher trop près du but.  / Bon jeu aérien / 

Pas trop besoin d'aller plus loin :

	- Nombre de tacles
	- Nombre d'interceptions et/ou Blocks
	- Nombres de duels aériens gagnés
	
	- Fautes et cartons

	DEFENSEURS LATERAUX

On est un peu sur le même profil que les mecs d'avant
A priori c'est un défenseur qui cours plus souvent

	- Nombre de tacles
	- Interceptions ou Blocks
	- Duels aériens

On ajoute juste
	- Longues passes ou %age de passes réussies
	- %age de dribbles réussis

	- Fautes et cartons
	- Balles perdues

	GARDIEN

Il y a des tables spéciales gardiens sur FBREF:

	- % de "crosses" stopés par le gardien (feintes)
	- % de saves

	- Nombre de buts encaissés
	- Cartons ?

	ATTAQUANTS

Ben mettre des buts, dribbler et faire quelques passes décisives non ?

	- Nombre de buts
	- % de dribbles réussis
	- % de passes réussis 
	- Nombre d'actions créées
	- Nombre de tirs (cadrés ?)

	- Nombre de hors-jeu (placement)
	- Ballons perdus

Je vais devoir télécharger toutes les tables des stats par joueurs sur 90 minutes (== non en fait comme je fais des sommes de productiion de joueurs ja vais regarder comment je peux gérer ces tables) sur les saisons complètes dont je dispose (20 - 21 et  21 - 22) ==> Peut-être récupérer deux autres saisons ? Ou alors travailler sur une seule saison ?
Va falloir sortir une variable "saison" pour croiser les tables et avoir les bons effectifs.
	
Je test une table sur une saison

Finalement je DL toutes les tables en texte
Y a les gardiens dans tous les fichiers OKZOU

Avant de créer une table de tous les joueurs avec toutes les stats, je dois travailler rapidement chaque fichier (renommage de variables, création d'une clé de jointure etc...)
La clé de jointure c'est la variable "-9999"

Je garde toutes les variables des stats standards
Pour les tirs :: tirs, tirs cadrés et % de tirs cadrés (que je renomme pour virer le %)
Pour les passes :: passes complétées, passes tentées, % de passes réussies (idem, rename pour virer le %) == lors de la merge j'ai des lignes en plus.... -- présence de doublons ??
Pour les SCA :: juste SCA -- ajout de lignes encore == je drop duplicate à la fin des merge pour voir
Pour la défense :: tacles, tacles remportés, %age de tacles réussis, block, shots bloqués, passes bloquées, Interceptions, TKL + Int, Clr et erreurs (je dois renommer le var avec un % et celle qui s'appelle Sh)
Pour les possessions ::Touches, % de dribbles réussis, Mis et Dis (rename le %age)
Pour les misc :: Fautes, hors jeu, crosses, % duels aériens gagnés (renommer le %)
Goals :: saves % et cross % (renommer les deux)

Les doublons semblent venir du fait que certains joueurs ont changés d'équipe et/ou sont à zéro sur certaines stats dans des tableaux.
Je ne l'explique pas vraiment puisque je merge sur une clé créée par le site et que chaque table compte le même nombre de lignes exactement (632). Même lorsque je merge sur le nom du joueur j'ai les doublons qui apparaissent. On va continuer comme ça et si je vis que les résultats partent en vrille, je tenterai une autre façon pour merger les tables.



Je dois regrouper les postes et aussi modifier les squads pour l'Inter et le Hellas Verone
Les groupes à créer : 
Milieux defensifs (sur FBREF :: DM == super! y'en a pas dans le fichier je vais voir comment sont codifiés les milieux défensifs sur fbref --> >Tonali, brozovic et Bennacer sont en MF mais il y a des milieux droits, gauches etc dans les MF c'est n'imp)

Milieux de terrain
défenseurs centraux
défenseurs latéraux
Attaquants
Gardiens

Je vais devoir me trouver une tables plus claires avec juste les bons postes == peut-être sur transfermarkt
En supposant que les MF sont majoritairement des gars qui auront à défendre, est-ce que j'ai d'autres postes pour les autres joueurs :
DF      1078 == Defenders (merci...) ptetre les def centraux
FW       854 == Forwards : bon là c'est clair c'est les attaquants
MF       645 == Midfielders : tout et n'importe quoi dont mes milieux défensifs 
MFFW     363 == Genre Dybala == Ce serait mes milieux offensifs
FWMF     238 == Zaccagni :: Milieux off aussi
DFMF     209 == Voilà ce qu'on trouve là dedans (DF-MF (AM-DM-WM, left)) ... Les gars font tout en gros ?? Putain de site FBREF ils iront dans les milieux latéraux donc milieux off
MFDF      76 == Des milieux centraux mais de toute manière y'en a pas 100 000
FWDF      70 == Plutot des attaquants (messias par exemple)
GK        49 == Heureusement celui là fonctionne
DFFW      10 == Pour 10 pélo, balec

En fait je vais me trouver une liste de milieux défensifs seulement. Peut-être juste ceux qui ont le plus joués et basta. 

Voilà la répartitiion que j'obtien :
DF        1078
FW         924
Milieu     896
MF         645
GK          49

reste à trouver un moyen de sortir mes milieux défensifs de la catégorie MF.
(Fait main avec des copier coller de footballcritic.com...)
J'obtiens :
FW        924
DF        876
Milieu    825
DM        561
MF        357
GK         49

 Je suppose donc que j'avais 357 lignes de MF qui n'étaient pas des milieux défensifs

Etape suivante == Vérifier que le nombre de minutes par équipe correspond au nombre de matchs joués par l'équipe divisé par 90 minutes fois 11 joueurs.

--> Faire la somme des minutes par équipe (group_by squad) . J'ai cette variables de 90's jouées par joueurs. Peut-être que juste la somme de ça par squad suffira en fait

A priori le problème de doublon vient de l'utilisation de la variable -9999 qui n'est pas fiable. J'ai du recréer une variable "key" pour les merges.

Le problème est réglé. Toutes les équipes ont bien 38 matchs c'est cool. Du coup j'ai les stats que pour les matchs de saisons. Il faudra que je pense à virer les matchs d'europa league et champions league plus supercoppa etc dans la table 2021 - 2022 si je veux l'utiliser.

Je vais pouvoir passer à la création des indicateurs de productivité par poste. 

Une fois les variables identifiées pour chaque poste/groupe de poste, je pense d'abord grouper par joueur et calculer son indice en fonction de son poste. Ensuite il faudra que je ramène ça sur 90 minutes pour que ce soit comparable et enfin, je pourrai leur attribuer un rang en fonction de leur productivité. (Un rang ou bien un score si je vois qu'il existe de trop grandes disparités = En effet, il serait injuste pour un joueur beaucoup plus productif que celui qui le suit de n'avoir qu'un petit point de plus et qu'en parallèle, deux types avec quasiment le même volume de jeu se retrouvent séparés de 1 point).
Je vais peut-être m'inspirer de mon indicateur sur les équipe avec le fait d'être au dessus d'un certain centile etc...
Le but in fine n'est pas d'obtenir un classement mais bien une variable dummy qui indique la présence d'un joueur plus productif que les autres sur un poste.

Théoriquement, j'ai juste à calculer la production individuelle selon les critères choisis par poste et à le diviser par la variable 90s.
Ensuite je n'aurai plus qu'à comparer les productions par postes et à définir à partir de quel seuil un joueur est considérer comme un joueur plus productif que le reste de la série A (je penche pour un 80ème centile)
Pour me simplifier la tâche, je vais créer une table pour chaque poste et faire mes calculs à partir de là.
 
En fait je dois d'abord créer les variables relative au temps de jeu puis je pourrai les comparer au reste des joueurs et les additionner pour créer l'indicateur

Les milieux les plus productifs seraient ::

Que des gars que je connais pas. Je vais peut-être filtrer sur le nombre de minutes jouées ou le nombre de match commencés (en fait sur le nombre de 90s et m'assurer qu'ils ont joués plus de 15 matchs == limite à partir de laquelle on voit des noms connus que j'aimerais garder même si en 15 matchs l'impact du joueur est pas fou mais on n'oublie pas qu'au max il ne peuvent en avoir que 38 donc en soit c'est déjà un bon nombre)

C'est déjà mieux :
Luis Muriel  		6.409775
Luis Alberto  	5.086470
Hakan Çalhanoğlu  	4.749490
Paulo Dybala  	4.482196
Piotr Zieliński  	4.417816

J'ai des doutes sur les deux premiers mais je vais chercher : Luis Muriel c'est pas déconnant mais à priori il est plutôt attaquant (encore merci FBREF pour la qualité des données sur les postes) , et Luis Alberto c'est propre aussi apparemment et c'est un vrai milieu. Je pars là dessus du coup.

Les défenseurs les plus productifs :: 
Simone Romagnoli  		6.103273
Giorgio Chiellini  	6.022241
Luca Ceppitelli  		5.090104
Bram Nuytinck  		4.932286
Chris Smalling  		4.658759

Le deuxième nom e dit long déjà

Par contre les 4 autres sont pas fou (sauf peut être Smalling mais bof bof selon Fifa)

Les attaquants les plus productifs::
Domenico Berardi  	5.241619
Lorenzo Insigne  	5.199009
Rafael Leão  		5.009532
Duván Zapata  	4.922852
Hirving Lozano  	4.398347

Les milieux def les plus productifs::
Joakim Mæhle  	5.195354
Kristjan Asllani  	5.191117
Jordan Veretout  	5.154285
Rade Krunić  		4.926145
Mërgim Vojvoda  	4.898269

Tonali est si loin c'est bizarre
En virant quelques variables pas très pertinentes c'est un peu mieux mais tonali est toujours bien bas (j'ai viré les cartons rouges, les duels aériens gagnés et les assists)
Samuele Ricci  	4.839677
Jerdy Schouten  	4.037835
Joakim Mæhle  	3.693086
Kristjan Asllani  	3.663138
Milan Badelj  	3.505838

Les gardiens les plus prolifiques (c'est pas forcément bon signe) ::
Luigi Sepe  			3.193002
Sergio Romero  		3.128332
Mike Maignan  		2.956710
David Ospina  		2.838236
Pietro Terracciano  	2.813442

Ok bon, prochaine étape pour chaque table, créer une variable indiquant si le joueur fait partie ou non des 20% des plus productifs à son poste.

Du coup j'obtiens des résultats sympa par équipe (voir table nb_top_joueur) dont le fait que le napoli possède 5 des milieux les plus productifs de série A ou que l'Inter a 2 des meilleurs attaquants du championnat.

Prochain mouve : Intégrer ces données dans la table des matchs de la saison 21 - 22 au travers de 5 variables (nb de top goal, nb de top defenseur etc...) et faire tourner le modèle avec ces variables en plus.
Pour le moment j'ai l'impression que c'est pas tant un poste précis qui va faire la diff mais plutôt le fait d'avoir plusieurs joueurs fort sur un secteur de jeu (à confirmer). 

J'ajoute les nombre de top joueurs pas poste à la base pour les régressions.
Mais attention! je commence à mélanger mes scripts, j'ai des modifs de tables un peu sur tous les scripts et du coup j'ai peur qu'il me manque des variables.

Ce que nous dit la matrice de corrélation sur les nouvelles variables ::

	Pas de corrélation vraiment forte pour les défenseurs

	-0.19 entre les milieux def et l'age ( plus l'equipe a des milieux def productif, plus sont effectif est jeune) ==> N'aurais-je pas là un début de réponse à ma liste de meilleurs milieux def ? Est-ce que ce qui prime pour ce poste c'est le fait d'être partout et de faire des stats ou le fait d'être intelligent, donc moins productif mais plus malin?

	0.42 pour les FW et la diff de value (normal, les attaquants sont les joueurs les plus chers), 0.39 FW et CMP (pourquoi pas) et 0.33 FW et possession.

	-0.47 GK et défenseurs ?? C'est à dire que les gardiens les plus productifs ont des défenses peut productive == Logique en fait. Si les défenseurs foutent rien, alors le gardien se tape 3 fois plus de boulot

	0.43 milieux et FW (ça va ensemble) et 0.29 milieux avec CMP (c'est eux qui ont le ballon).

Nouveau modèle ::



<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      583
Method:                           MLE   Df Model:                           22
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2440
Time:                        20:52:42   Log-Likelihood:                -302.59
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 9.244e-30
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                   5.8003      3.084      1.881      0.060      -0.244      11.845
C(home)[T.1]                                                0.2151      0.208      1.034      0.301      -0.193       0.623
C(saison)[T.reste]                                         -0.3078      0.221     -1.396      0.163      -0.740       0.124
C(PK)[T.1]                                                  0.9947      0.326      3.050      0.002       0.356       1.634
C(PK)[T.2]                                                  2.0856      0.902      2.312      0.021       0.318       3.853
C(CrdR)[T.1]                                               -0.6293      0.358     -1.759      0.079      -1.331       0.072
C(CrdR)[T.2]                                                0.1068      1.179      0.091      0.928      -2.203       2.417
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.1596      0.322     -0.496      0.620      -0.790       0.471
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]    -0.0072      0.292     -0.025      0.980      -0.579       0.565
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]    -0.0750      0.316     -0.237      0.812      -0.695       0.545
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.1027      0.344      0.298      0.766      -0.572       0.778
Poss                                                       -0.0487      0.015     -3.268      0.001      -0.078      -0.019
FDD                                                         0.2515      0.107      2.350      0.019       0.042       0.461
FDA                                                        -0.5872      0.346     -1.698      0.090      -1.265       0.091
age                                                        -0.1180      0.110     -1.074      0.283      -0.333       0.097
Dist                                                       -0.0527      0.041     -1.269      0.204      -0.134       0.029
SoT                                                         0.3562      0.055      6.520      0.000       0.249       0.463
diff_value                                                  0.0041      0.001      6.478      0.000       0.003       0.005
GK                                                          0.0996      0.282      0.353      0.724      -0.453       0.652
MF                                                          0.0514      0.088      0.587      0.557      -0.120       0.223
DF                                                         -0.3623      0.186     -1.952      0.051      -0.726       0.001
FW                                                          0.0560      0.157      0.358      0.721      -0.251       0.363
DM                                                         -0.4646      0.288     -1.611      0.107      -1.030       0.101
===========================================================================================================================

R² pas mieux qu'avant
Seuls les défenseurs semblent significatifs

Je vais modifier un peu les variables pour en faire des variable quali et ajouter un lien entre MF et FW

Ce qui donne ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      582
Method:                           MLE   Df Model:                           23
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2441
Time:                        21:02:16   Log-Likelihood:                -302.55
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 2.703e-29
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                   5.8981      3.272      1.803      0.071      -0.515      12.311
C(home)[T.1]                                                0.2161      0.208      1.037      0.300      -0.192       0.624
C(saison)[T.reste]                                         -0.3160      0.221     -1.431      0.153      -0.749       0.117
C(PK)[T.1]                                                  1.0487      0.327      3.206      0.001       0.408       1.690
C(PK)[T.2]                                                  2.0624      0.889      2.319      0.020       0.319       3.805
C(CrdR)[T.1]                                               -0.5803      0.358     -1.623      0.105      -1.281       0.121
C(CrdR)[T.2]                                                0.1108      1.177      0.094      0.925      -2.197       2.418
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.1353      0.322     -0.420      0.675      -0.767       0.497
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]    -0.0010      0.292     -0.004      0.997      -0.574       0.571
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]    -0.0737      0.317     -0.233      0.816      -0.695       0.547
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.1465      0.344      0.426      0.670      -0.528       0.821
C(top_GK)[T.1]                                              0.1900      0.384      0.495      0.621      -0.563       0.943
C(top_MF)[T.1]                                              0.2801      0.314      0.892      0.372      -0.335       0.895
C(top_FW)[T.1]                                              0.4776      0.376      1.269      0.204      -0.260       1.215
C(top_DF)[T.1]                                             -0.4894      0.339     -1.443      0.149      -1.154       0.176
C(top_DM)[T.1]                                             -0.4160      0.320     -1.301      0.193      -1.042       0.210
C(top_MF)[T.1]:C(top_FW)[T.1]                              -0.2297      0.467     -0.492      0.623      -1.145       0.686
Poss                                                       -0.0499      0.015     -3.329      0.001      -0.079      -0.021
FDD                                                         0.2551      0.107      2.377      0.017       0.045       0.465
FDA                                                        -0.5789      0.348     -1.663      0.096      -1.261       0.103
age                                                        -0.1245      0.115     -1.081      0.280      -0.350       0.101
Dist                                                       -0.0571      0.042     -1.367      0.172      -0.139       0.025
SoT                                                         0.3548      0.055      6.448      0.000       0.247       0.463
diff_value                                                  0.0040      0.001      6.140      0.000       0.003       0.005
===========================================================================================================================
"""
R² un peu mieux mais mes top joueurs sont pas significatifs et ça fait chier.

Va savoir pourquoi les coeff des défenseurs sont négatifs. Un gardien productif améliore les chances de victoire alors qu'il est la preuve qu'une équipe galère à défendre.
Avoir des bons milieux et des bons attaquants baisse la proba de gagner ( Louche )

Je pense que je vais pouvoir passer au machine learning. Je ne vois pas quelles autres variables pourraient expliquer qu'une equipe a plus de chance de gagner ou non. Pour les défenseurs et les milieux def, la variable quanti passait mieux. 
Donc ça donnerait (avec les formations histoire de tester ) ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2481
Time:                        21:08:06   Log-Likelihood:                -300.97
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 5.724e-29
===========================================================================================================================
                                                              coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------------
Intercept                                                   5.5804      3.191      1.749      0.080      -0.674      11.835
C(home)[T.1]                                                0.1994      0.209      0.953      0.340      -0.211       0.609
C(saison)[T.reste]                                         -0.2812      0.222     -1.264      0.206      -0.717       0.155
C(PK)[T.1]                                                  1.0199      0.330      3.095      0.002       0.374       1.666
C(PK)[T.2]                                                  1.9793      0.893      2.217      0.027       0.230       3.729
C(CrdR)[T.1]                                               -0.6168      0.360     -1.711      0.087      -1.323       0.090
C(CrdR)[T.2]                                                0.1595      1.177      0.135      0.892      -2.148       2.467
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]    -0.1625      0.324     -0.501      0.616      -0.798       0.473
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]    -0.0097      0.294     -0.033      0.974      -0.587       0.568
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]    -0.0742      0.318     -0.234      0.815      -0.697       0.548
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]     0.1304      0.345      0.378      0.705      -0.546       0.806
C(Formation)[T.3-5-2]                                      -0.3693      0.331     -1.116      0.264      -1.018       0.279
C(Formation)[T.4-3-3]                                      -0.1303      0.357     -0.364      0.716      -0.831       0.570
C(Formation)[T.4-5-1]                                      -0.1722      0.328     -0.525      0.600      -0.815       0.471
C(top_GK)[T.1]                                              0.1574      0.332      0.475      0.635      -0.492       0.807
C(top_MF)[T.1]                                              0.2148      0.257      0.835      0.404      -0.290       0.719
C(top_FW)[T.1]                                              0.2416      0.272      0.889      0.374      -0.291       0.774
Poss                                                       -0.0528      0.015     -3.493      0.000      -0.082      -0.023
FDD                                                         0.2567      0.108      2.386      0.017       0.046       0.468
FDA                                                        -0.5586      0.348     -1.605      0.109      -1.241       0.124
age                                                        -0.1005      0.118     -0.850      0.395      -0.332       0.131
Dist                                                       -0.0529      0.042     -1.258      0.208      -0.135       0.029
SoT                                                         0.3528      0.055      6.425      0.000       0.245       0.460
diff_value                                                  0.0040      0.001      6.247      0.000       0.003       0.005
DF                                                         -0.3385      0.194     -1.743      0.081      -0.719       0.042
DM                                                         -0.5102      0.294     -1.734      0.083      -1.087       0.067
===========================================================================================================================
"""

Autre test ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      568
Method:                           MLE   Df Model:                           37
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2613
Time:                        21:10:24   Log-Likelihood:                -295.66
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 6.574e-26
=================================================================================================================================================
                                                                                    coef    std err          z      P>|z|      [0.025      0.975]
-------------------------------------------------------------------------------------------------------------------------------------------------
Intercept                                                                         5.2081      3.248      1.604      0.109      -1.158      11.574
C(home)[T.1]                                                                      0.2076      0.213      0.973      0.331      -0.211       0.626
C(saison)[T.reste]                                                               -0.2905      0.228     -1.272      0.204      -0.738       0.157
C(PK)[T.1]                                                                        1.0104      0.336      3.005      0.003       0.351       1.669
C(PK)[T.2]                                                                        2.0578      0.946      2.176      0.030       0.204       3.912
C(CrdR)[T.1]                                                                     -0.7069      0.367     -1.925      0.054      -1.427       0.013
C(CrdR)[T.2]                                                                      0.0233      1.204      0.019      0.985      -2.337       2.383
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]                          -0.1343      0.676     -0.199      0.843      -1.459       1.191
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]                          -0.5449      0.680     -0.802      0.423      -1.877       0.787
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]                          -0.2513      0.735     -0.342      0.732      -1.692       1.189
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]                           0.8485      0.762      1.114      0.265      -0.644       2.341
C(Formation)[T.3-5-2]                                                            -0.2776      0.654     -0.425      0.671      -1.559       1.004
C(Formation)[T.4-3-3]                                                             0.1489      0.671      0.222      0.824      -1.166       1.464
C(Formation)[T.4-5-1]                                                            -0.6503      0.665     -0.978      0.328      -1.954       0.653
C(top_GK)[T.1]                                                                    0.1142      0.339      0.337      0.736      -0.550       0.778
C(top_MF)[T.1]                                                                    0.2003      0.267      0.751      0.453      -0.322       0.723
C(top_FW)[T.1]                                                                    0.1729      0.279      0.621      0.535      -0.373       0.719
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]:C(Formation)[T.3-5-2]    -0.1955      0.916     -0.213      0.831      -1.991       1.600
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]:C(Formation)[T.3-5-2]     0.7478      0.896      0.834      0.404      -1.009       2.505
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]:C(Formation)[T.3-5-2]    -0.1235      0.944     -0.131      0.896      -1.973       1.726
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]:C(Formation)[T.3-5-2]    -1.3679      1.009     -1.355      0.175      -3.346       0.610
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]:C(Formation)[T.4-3-3]    -1.2341      1.038     -1.188      0.235      -3.269       0.801
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]:C(Formation)[T.4-3-3]     0.0501      0.880      0.057      0.955      -1.674       1.774
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]:C(Formation)[T.4-3-3]     0.2068      0.983      0.210      0.833      -1.719       2.133
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]:C(Formation)[T.4-3-3]    -1.1216      1.036     -1.083      0.279      -3.152       0.908
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-4-3]:C(Formation)[T.4-5-1]     0.8178      0.907      0.901      0.367      -0.961       2.596
C(opp_Formation, Treatment(reference="4-5-1"))[T.3-5-2]:C(Formation)[T.4-5-1]     1.2395      0.877      1.414      0.157      -0.478       2.957
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-3-3]:C(Formation)[T.4-5-1]     0.6268      0.943      0.665      0.506      -1.221       2.474
C(opp_Formation, Treatment(reference="4-5-1"))[T.4-4-2]:C(Formation)[T.4-5-1]    -0.3473      0.997     -0.348      0.728      -2.301       1.606
Poss                                                                             -0.0546      0.015     -3.548      0.000      -0.085      -0.024
FDD                                                                               0.2419      0.110      2.205      0.027       0.027       0.457
FDA                                                                              -0.5930      0.353     -1.678      0.093      -1.286       0.100
age                                                                              -0.0759      0.121     -0.629      0.529      -0.312       0.161
Dist                                                                             -0.0567      0.043     -1.313      0.189      -0.141       0.028
SoT                                                                               0.3666      0.056      6.527      0.000       0.257       0.477
diff_value                                                                        0.0042      0.001      6.359      0.000       0.003       0.005
DF                                                                               -0.3702      0.198     -1.868      0.062      -0.759       0.018
DM                                                                               -0.4921      0.300     -1.639      0.101      -1.080       0.096
=================================================================================================================================================
"""
Comment gérer la différence de formation ::
En créant une variable ou je distingue les système à 3 défenseurs et ceux à 4

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      584
Method:                           MLE   Df Model:                           21
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2459
Time:                        21:16:01   Log-Likelihood:                -301.85
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.530e-30
=====================================================================================================
                                        coef    std err          z      P>|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------
Intercept                             5.9084      3.030      1.950      0.051      -0.029      11.846
C(home)[T.1]                          0.2045      0.209      0.979      0.328      -0.205       0.614
C(saison)[T.reste]                   -0.3119      0.218     -1.429      0.153      -0.740       0.116
C(PK)[T.1]                            1.0155      0.323      3.140      0.002       0.382       1.649
C(PK)[T.2]                            2.0214      0.893      2.263      0.024       0.271       3.772
C(CrdR)[T.1]                         -0.5980      0.359     -1.664      0.096      -1.302       0.106
C(CrdR)[T.2]                          0.0928      1.175      0.079      0.937      -2.211       2.396
C(nb_opp_def)[T.4]                    0.0769      0.300      0.256      0.798      -0.511       0.665
C(nb_def)[T.4]                        0.0829      0.323      0.257      0.797      -0.550       0.716
C(top_GK)[T.1]                        0.1974      0.329      0.600      0.548      -0.447       0.842
C(top_MF)[T.1]                        0.3048      0.242      1.257      0.209      -0.170       0.780
C(top_FW)[T.1]                        0.2086      0.259      0.806      0.420      -0.298       0.716
C(nb_opp_def)[T.4]:C(nb_def)[T.4]    -0.0234      0.414     -0.057      0.955      -0.834       0.787
Poss                                 -0.0482      0.015     -3.304      0.001      -0.077      -0.020
FDD                                   0.2534      0.108      2.357      0.018       0.043       0.464
FDA                                  -0.5681      0.346     -1.643      0.100      -1.246       0.110
age                                  -0.1355      0.109     -1.244      0.213      -0.349       0.078
Dist                                 -0.0535      0.041     -1.302      0.193      -0.134       0.027
SoT                                   0.3583      0.055      6.542      0.000       0.251       0.466
diff_value                            0.0040      0.001      6.209      0.000       0.003       0.005
DF                                   -0.3327      0.191     -1.746      0.081      -0.706       0.041
DM                                   -0.5172      0.293     -1.767      0.077      -1.091       0.056
=====================================================================================================
"""

R² toujours aussi claqué
J'ai perdu la significativité de home et de saison je sais pas comment...
Penaltys c'est toujours OK
Cartons rouges (sauf pour 2) c'est toujours OK
Les nombres de def ça pue individuellement.
Les top GK,MF et FW sont mieux comme ça qu'en var quanti
Le croisement des nb de defenseurs est affreux
Poss OK
FDD et FDA peut mieux faire mais ça va
Age, j'arrive plus à redescendre
Dist idem
les 4 derniers OK

Je vais comparer le nombre de défenseurs avec le nombre d'avants
Et je vais ajouter une différence du nombre de milieux

Ce qui donne :: 

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      585
Method:                           MLE   Df Model:                           20
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2462
Time:                        21:29:55   Log-Likelihood:                -301.72
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 4.227e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.1835      3.061      2.020      0.043       0.184      12.183
C(home)[T.1]           0.2003      0.208      0.962      0.336      -0.208       0.609
C(saison)[T.reste]    -0.3246      0.217     -1.496      0.135      -0.750       0.101
C(PK)[T.1]             0.9978      0.323      3.089      0.002       0.365       1.631
C(PK)[T.2]             2.0018      0.895      2.238      0.025       0.248       3.755
C(CrdR)[T.1]          -0.5991      0.359     -1.671      0.095      -1.302       0.104
C(CrdR)[T.2]           0.0895      1.173      0.076      0.939      -2.209       2.388
C(top_GK)[T.1]         0.1964      0.322      0.610      0.542      -0.434       0.827
C(top_MF)[T.1]         0.2904      0.245      1.185      0.236      -0.190       0.771
C(top_FW)[T.1]         0.2438      0.268      0.911      0.362      -0.281       0.768
Poss                  -0.0502      0.015     -3.368      0.001      -0.079      -0.021
FDD                    0.2520      0.107      2.353      0.019       0.042       0.462
FDA                   -0.5576      0.346     -1.613      0.107      -1.235       0.120
age                   -0.1416      0.110     -1.292      0.196      -0.356       0.073
Dist                  -0.0526      0.041     -1.288      0.198      -0.133       0.027
SoT                    0.3557      0.055      6.486      0.000       0.248       0.463
diff_value             0.0040      0.001      6.227      0.000       0.003       0.005
diff_avant             0.0053        nan        nan        nan         nan         nan
diff_def               0.0364        nan        nan        nan         nan         nan
diff_mil              -0.0417        nan        nan        nan         nan         nan
DF                    -0.3281      0.191     -1.721      0.085      -0.702       0.046
DM                    -0.5179      0.292     -1.776      0.076      -1.089       0.054
======================================================================================
"""

Un R² toujours faible
Je peux pas tous les mettre en meme temps je crois ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      585
Method:                           MLE   Df Model:                           20
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2462
Time:                        21:31:40   Log-Likelihood:                -301.72
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 4.227e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.1835      3.061      2.020      0.043       0.184      12.183
C(home)[T.1]           0.2003      0.208      0.962      0.336      -0.208       0.609
C(saison)[T.reste]    -0.3246      0.217     -1.496      0.135      -0.750       0.101
C(PK)[T.1]             0.9978      0.323      3.089      0.002       0.365       1.631
C(PK)[T.2]             2.0018      0.895      2.238      0.025       0.248       3.755
C(CrdR)[T.1]          -0.5991      0.359     -1.671      0.095      -1.302       0.104
C(CrdR)[T.2]           0.0895      1.173      0.076      0.939      -2.209       2.388
C(top_GK)[T.1]         0.1964      0.322      0.610      0.542      -0.434       0.827
C(top_MF)[T.1]         0.2904      0.245      1.185      0.236      -0.190       0.771
C(top_FW)[T.1]         0.2438      0.268      0.911      0.362      -0.281       0.768
Poss                  -0.0502      0.015     -3.368      0.001      -0.079      -0.021
FDD                    0.2520      0.107      2.353      0.019       0.042       0.462
FDA                   -0.5576      0.346     -1.613      0.107      -1.235       0.120
age                   -0.1416      0.110     -1.292      0.196      -0.356       0.073
Dist                  -0.0526      0.041     -1.288      0.198      -0.133       0.027
SoT                    0.3557      0.055      6.486      0.000       0.248       0.463
diff_value             0.0040      0.001      6.227      0.000       0.003       0.005
diff_def               0.0311      0.136      0.229      0.819      -0.235       0.297
diff_mil              -0.0469      0.116     -0.406      0.685      -0.273       0.180
DF                    -0.3281      0.191     -1.721      0.085      -0.702       0.046
DM                    -0.5179      0.292     -1.776      0.076      -1.089       0.054
======================================================================================
"""

C'est pas significatif
Le truc c'est que même en virant les formations, mon R² reste à 0.24 c'est rassurant
Tester avec diff_avant au lieu de diff_def et j'ai le même résultat.

La corrélation la plus forte entre victoire et une des diff est diff_mil::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      586
Method:                           MLE   Df Model:                           19
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2461
Time:                        21:34:20   Log-Likelihood:                -301.74
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.320e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.2031      3.063      2.025      0.043       0.199      12.207
C(home)[T.1]           0.1998      0.208      0.959      0.337      -0.208       0.608
C(saison)[T.reste]    -0.3254      0.217     -1.500      0.134      -0.751       0.100
C(PK)[T.1]             0.9991      0.323      3.093      0.002       0.366       1.632
C(PK)[T.2]             1.9883      0.894      2.225      0.026       0.236       3.740
C(CrdR)[T.1]          -0.5931      0.358     -1.659      0.097      -1.294       0.108
C(CrdR)[T.2]           0.1027      1.171      0.088      0.930      -2.192       2.397
C(top_GK)[T.1]         0.2028      0.321      0.633      0.527      -0.426       0.831
C(top_MF)[T.1]         0.2834      0.243      1.166      0.244      -0.193       0.760
C(top_FW)[T.1]         0.2540      0.264      0.963      0.336      -0.263       0.771
Poss                  -0.0500      0.015     -3.363      0.001      -0.079      -0.021
FDD                    0.2506      0.107      2.343      0.019       0.041       0.460
FDA                   -0.5573      0.346     -1.613      0.107      -1.235       0.120
age                   -0.1414      0.110     -1.288      0.198      -0.356       0.074
Dist                  -0.0524      0.041     -1.282      0.200      -0.132       0.028
SoT                    0.3557      0.055      6.488      0.000       0.248       0.463
diff_value             0.0040      0.001      6.223      0.000       0.003       0.005
diff_mil              -0.0619      0.095     -0.648      0.517      -0.249       0.125
DF                    -0.3269      0.191     -1.715      0.086      -0.701       0.047
DM                    -0.5177      0.293     -1.770      0.077      -1.091       0.056
======================================================================================
"""

Bon bah 0.51 c'est ce que je peux avoir de mieux.
Avec plus de défenseur que d'attaquants, je créé la variable sup def ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      585
Method:                           MLE   Df Model:                           20
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2466
Time:                        21:39:28   Log-Likelihood:                -301.56
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.676e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.0640      3.064      1.979      0.048       0.058      12.070
C(home)[T.1]           0.1962      0.208      0.941      0.347      -0.212       0.605
C(saison)[T.reste]    -0.3138      0.218     -1.440      0.150      -0.741       0.113
C(PK)[T.1]             1.0148      0.324      3.132      0.002       0.380       1.650
C(PK)[T.2]             2.0292      0.892      2.275      0.023       0.281       3.777
C(CrdR)[T.1]          -0.6046      0.358     -1.687      0.092      -1.307       0.098
C(CrdR)[T.2]           0.0868      1.174      0.074      0.941      -2.214       2.387
C(sup_def)[T.1]        0.1767      0.295      0.598      0.550      -0.402       0.755
C(top_GK)[T.1]         0.1913      0.321      0.595      0.552      -0.438       0.821
C(top_MF)[T.1]         0.2990      0.244      1.223      0.221      -0.180       0.778
C(top_FW)[T.1]         0.2327      0.266      0.875      0.382      -0.289       0.754
Poss                  -0.0507      0.015     -3.394      0.001      -0.080      -0.021
FDD                    0.2528      0.107      2.362      0.018       0.043       0.462
FDA                   -0.5523      0.346     -1.594      0.111      -1.231       0.127
age                   -0.1404      0.109     -1.282      0.200      -0.355       0.074
Dist                  -0.0529      0.041     -1.293      0.196      -0.133       0.027
SoT                    0.3563      0.055      6.483      0.000       0.249       0.464
diff_value             0.0040      0.001      6.239      0.000       0.003       0.005
diff_mil              -0.0352      0.105     -0.334      0.739      -0.242       0.171
DF                    -0.3257      0.191     -1.709      0.087      -0.699       0.048
DM                    -0.5122      0.291     -1.759      0.078      -1.083       0.058
======================================================================================
"""

Problème c'est que ce n'est pas significatif et qu'il y a une majorité de situation où il y a plus de défenseurs que d'attaquant (seul cas : un défense à 3 contre un 4-3-3 ou un 3-4-3) 

Et si je tolère un défenseur de plus (en gros la norme)::

Je passe les résultats mais la p-value passe de 0.55 à 0.81 donc c'est non. Je teste avec la différence de milieux en variable quali ::
 

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      582
Method:                           MLE   Df Model:                           23
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2487
Time:                        21:43:50   Log-Likelihood:                -300.70
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 5.173e-30
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.3791      3.141      2.031      0.042       0.223      12.535
C(home)[T.1]           0.1971      0.209      0.944      0.345      -0.212       0.606
C(saison)[T.reste]    -0.3529      0.222     -1.593      0.111      -0.787       0.081
C(PK)[T.1]             0.9805      0.326      3.009      0.003       0.342       1.619
C(PK)[T.2]             1.9799      0.896      2.211      0.027       0.224       3.735
C(CrdR)[T.1]          -0.6277      0.361     -1.741      0.082      -1.334       0.079
C(CrdR)[T.2]           0.0870      1.185      0.073      0.942      -2.236       2.410
C(diff_mil)[T.-1]     -0.3598      0.396     -0.909      0.363      -1.135       0.416
C(diff_mil)[T.0]       0.0065      0.348      0.019      0.985      -0.676       0.689
C(diff_mil)[T.1]      -0.1894      0.398     -0.475      0.635      -0.970       0.591
C(diff_mil)[T.2]      -0.2594      0.469     -0.553      0.581      -1.180       0.661
C(sup_def)[T.1]        0.1766      0.301      0.587      0.558      -0.413       0.767
C(top_GK)[T.1]         0.1568      0.324      0.484      0.628      -0.478       0.791
C(top_MF)[T.1]         0.3212      0.246      1.306      0.192      -0.161       0.803
C(top_FW)[T.1]         0.1956      0.269      0.727      0.467      -0.331       0.723
Poss                  -0.0508      0.015     -3.378      0.001      -0.080      -0.021
FDD                    0.2493      0.108      2.309      0.021       0.038       0.461
FDA                   -0.5790      0.347     -1.667      0.096      -1.260       0.102
age                   -0.1438      0.110     -1.304      0.192      -0.360       0.072
Dist                  -0.0538      0.041     -1.301      0.193      -0.135       0.027
SoT                    0.3604      0.055      6.532      0.000       0.252       0.469
diff_value             0.0041      0.001      6.273      0.000       0.003       0.005
DF                    -0.3560      0.193     -1.841      0.066      -0.735       0.023
DM                    -0.5483      0.292     -1.875      0.061      -1.122       0.025
======================================================================================
"""

C'est pas significatif mais il y a quand même un résultat intéressant ::>> Plus l'écart se creuse, plus le coeff semble tendre vers quelque chose de significatif. Du coup je tenterais bien la même chose avec la diff de defenseurs:: 


<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2494
Time:                        21:46:53   Log-Likelihood:                -300.43
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.555e-29
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              6.3717      3.160      2.016      0.044       0.179      12.565
C(home)[T.1]           0.1923      0.209      0.920      0.358      -0.218       0.602
C(saison)[T.reste]    -0.3576      0.222     -1.611      0.107      -0.793       0.078
C(PK)[T.1]             0.9803      0.328      2.987      0.003       0.337       1.624
C(PK)[T.2]             1.9825      0.898      2.207      0.027       0.222       3.743
C(CrdR)[T.1]          -0.6230      0.360     -1.728      0.084      -1.329       0.083
C(CrdR)[T.2]           0.0768      1.195      0.064      0.949      -2.266       2.419
C(diff_mil)[T.-1]     -0.4848      0.436     -1.111      0.267      -1.340       0.371
C(diff_mil)[T.0]      -0.0710      0.372     -0.191      0.849      -0.801       0.659
C(diff_mil)[T.1]      -0.3149      0.448     -0.703      0.482      -1.193       0.563
C(diff_mil)[T.2]      -0.3913      0.529     -0.740      0.459      -1.428       0.645
C(top_GK)[T.1]         0.1616      0.324      0.499      0.618      -0.474       0.797
C(top_MF)[T.1]         0.3091      0.247      1.252      0.211      -0.175       0.793
C(top_FW)[T.1]         0.1987      0.272      0.732      0.464      -0.334       0.731
C(diff_def)[T.1]       0.2032      0.314      0.647      0.517      -0.412       0.818
C(diff_def)[T.2]       0.1667      0.354      0.471      0.637      -0.527       0.860
C(diff_def)[T.3]      -0.0664      0.448     -0.148      0.882      -0.945       0.812
Poss                  -0.0507      0.015     -3.373      0.001      -0.080      -0.021
FDD                    0.2443      0.108      2.255      0.024       0.032       0.457
FDA                   -0.5838      0.348     -1.680      0.093      -1.265       0.097
age                   -0.1400      0.111     -1.263      0.207      -0.357       0.077
Dist                  -0.0521      0.041     -1.258      0.208      -0.133       0.029
SoT                    0.3618      0.055      6.553      0.000       0.254       0.470
diff_value             0.0041      0.001      6.246      0.000       0.003       0.005
DF                    -0.3561      0.194     -1.840      0.066      -0.735       0.023
DM                    -0.5414      0.294     -1.843      0.065      -1.117       0.034
======================================================================================
"""

C'est l'inverse ! étonnant ==> Plus j'ai des défenseurs moins leur impact sur la victoire sera significatif. En vrai j'aime bien ce genre de résultat. Si je passe le max(3) en valeur de réference ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2494
Time:                        21:49:23   Log-Likelihood:                -300.43
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.555e-29
============================================================================================================
                                               coef    std err          z      P>|z|      [0.025      0.975]
------------------------------------------------------------------------------------------------------------
Intercept                                    6.3053      3.164      1.993      0.046       0.105      12.506
C(home)[T.1]                                 0.1923      0.209      0.920      0.358      -0.218       0.602
C(saison)[T.reste]                          -0.3576      0.222     -1.611      0.107      -0.793       0.078
C(PK)[T.1]                                   0.9803      0.328      2.987      0.003       0.337       1.624
C(PK)[T.2]                                   1.9825      0.898      2.207      0.027       0.222       3.743
C(CrdR)[T.1]                                -0.6230      0.360     -1.728      0.084      -1.329       0.083
C(CrdR)[T.2]                                 0.0768      1.195      0.064      0.949      -2.266       2.419
C(diff_mil)[T.-1]                           -0.4848      0.436     -1.111      0.267      -1.340       0.371
C(diff_mil)[T.0]                            -0.0710      0.372     -0.191      0.849      -0.801       0.659
C(diff_mil)[T.1]                            -0.3149      0.448     -0.703      0.482      -1.193       0.563
C(diff_mil)[T.2]                            -0.3913      0.529     -0.740      0.459      -1.428       0.645
C(top_GK)[T.1]                               0.1616      0.324      0.499      0.618      -0.474       0.797
C(top_MF)[T.1]                               0.3091      0.247      1.252      0.211      -0.175       0.793
C(top_FW)[T.1]                               0.1987      0.272      0.732      0.464      -0.334       0.731
C(diff_def, Treatment(reference=3))[T.0]     0.0664      0.448      0.148      0.882      -0.812       0.945
C(diff_def, Treatment(reference=3))[T.1]     0.2696      0.384      0.701      0.483      -0.484       1.023
C(diff_def, Treatment(reference=3))[T.2]     0.2331      0.351      0.665      0.506      -0.454       0.920
Poss                                        -0.0507      0.015     -3.373      0.001      -0.080      -0.021
FDD                                          0.2443      0.108      2.255      0.024       0.032       0.457
FDA                                         -0.5838      0.348     -1.680      0.093      -1.265       0.097
age                                         -0.1400      0.111     -1.263      0.207      -0.357       0.077
Dist                                        -0.0521      0.041     -1.258      0.208      -0.133       0.029
SoT                                          0.3618      0.055      6.553      0.000       0.254       0.470
diff_value                                   0.0041      0.001      6.246      0.000       0.003       0.005
DF                                          -0.3561      0.194     -1.840      0.066      -0.735       0.023
DM                                          -0.5414      0.294     -1.843      0.065      -1.117       0.034
============================================================================================================
"""

Euh c'est moins clair là...

Je garde l'autre version du modèle avec ma significativité bizarre ::

reg = smf.logit('victoire ~ C(home) + Poss + FDD + FDA + age + Dist + SoT + diff_value + C(saison) + C(PK) + C(CrdR) + C(diff_mil) + C(top_GK) + C(top_MF) + C(top_FW) + DF + DM + C(diff_def)',
                  data=df_reg).fit()

Je pense m'arrêter là pour la régression logistique. Je vais tester ma base complète sur des modèles de ML avant peut-être de revenir sur mon logit (il faudrait que je trouve d'autres variables qui pourraient expliquer les victoires).

Jusqu'ici on a appris ::

- Que les italiens jouent beaucoup avec des défenses à 3
- Que la possession n'est pas gage de victoire en série A (sauf pour les grosses grosses équipes). Du coup quand deux équipes construitent pour jouer en contre se rencontrent, c'est celle qui arrivera à faire garder le ballon à l'autre qui a le plus de chance de win.
- Jouer à la maison est toujours un petit plus pour la victoire (tifosi)
- L'effet début de saison/automne qui pousse sûrement les équipe reposées et préparée pour la nouvelle saison à ne laisser passer aucune opportunité de victoire (alors qu'elles se fatiguent après et laissent à priori, plus de matchs nuls)
- Les penaltys qui, sans surprises sont synonymes de victoire
- Les cartons rouges qui ont un impact beaucoup plus fort que ce que je pensais sur la réussite d'une équipe.
- La différence du nombre de milieux de terrains qui, plus elle s'agrandit, plus entraine un déséquilibe soit directement au milieu soit dans un autre secteur de jeu et donc plus de chance de défaite (les équipes qui ont moins de milieux se font bouffer en possession et perdent plus facilement et celles qui en ont trop : +2 perdent des assets sur un autre plan (attaque ou défense) et son plus fébriles)
- Avoir un gardien productif augmente les chances de victoires mais non significativement. Sans surprise puisqu'un gradien qui dot effectuer beaucoup d'arrêts est un gardiens qui encaissent les faiblesses de sa défense et qui tente de maintenir la tête de son équipe hors de l'eau).
- Avoir des milieux parmis les 20% les plus productifs de série A augmente considérablement les chances de victoires (bien evidemment non significatif car cela ne dépend pas que de eux) Ce qui me donne envie de tester de croiser toutes ces variables pour voir si on en tire quelque chose ...
- Idem pour les attaquants
- Plus une équipe a un nombre de défenseurs supérieur au nombre d'attaquant de son adversaire plus l'impact de cette différence est significatif et tend vers le positif. C'est un peu l'inverse des résultats obtenus sur les milieux (ici la différence augment les chances de victoire alors que l'égalité non. La pire situation étant le -1)
- La supériorité technique défensive augment les chances de victoire
- Alors que la supériorité technique offensive non == certainement le même problème que l'histoire de possession (croiser les deux ?)
- L'age moyen a un impact négatif mais non significatif == c'est peut-être simplement l'effet manque d'xp pour les jeunes et manque de dynamisme/physique pour les plus anciens.
- La distance des frappes moyennes indique que plus une équipe prends des tirs lointains, moins elle a de chances de gagner (logique car elle n'arrive pas à se créer de belles occasions plus simple à concrétiser).
- Avoir un nombre de tirs cadrés élevés est sans surprise bénéfique pour la victoire car il est synonyme de qualité offensive et de facilité à venir devant le but.
- La différence de valeur en série témoigne de la tournure qu'a pris le football ces dernières décennies (et encore avant pour le cas de la série A). A l'image de la ligue 1, le classement en fin de saison ressemble souvent de près au classement des valeurs des équipes. Avoir un effectif plus valuable garanti plus de victoire de 45% par centaine de millions de dollars dépensés (sous-réserve de ne pas être victime d'overatting == cas typique en premiere league je pense)
- Avoir des défenseurs et des milieux défensifs parmis les plus productifs de série A est significativement mauvais signe por une équipe. Si ces joueurs doivent intérvenir plus souvent c'est le signe que l'équipe souffre et subit. Du coup cela explique également les classements que j'obtenais dans mes ratings de joueurs. Les plus productifs étaient pas très connus car ils appartenaient à des équipes faibles qui ont besoin d'eux pour survivre.


###TEST DU MODELE AVEC DES CROISEMENTS DE VARIABLE ###

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      574
Method:                           MLE   Df Model:                           31
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2548
Time:                        22:15:11   Log-Likelihood:                -298.29
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 2.378e-27
=================================================================================================
                                    coef    std err          z      P>|z|      [0.025      0.975]
-------------------------------------------------------------------------------------------------
Intercept                         2.3640      4.239      0.558      0.577      -5.945      10.673
C(home)[T.1]                      0.1925      0.210      0.917      0.359      -0.219       0.604
C(saison)[T.reste]               -0.3201      0.224     -1.431      0.153      -0.759       0.118
C(PK)[T.1]                        0.9451      0.329      2.872      0.004       0.300       1.590
C(PK)[T.2]                        2.0244      0.890      2.273      0.023       0.279       3.770
C(CrdR)[T.1]                     -0.6267      0.363     -1.727      0.084      -1.338       0.084
C(CrdR)[T.2]                     -0.0607      1.201     -0.051      0.960      -2.415       2.293
C(diff_mil)[T.-1]                -0.5117      0.440     -1.164      0.245      -1.374       0.350
C(diff_mil)[T.0]                 -0.0812      0.396     -0.205      0.837      -0.857       0.694
C(diff_mil)[T.1]                 -0.2665      0.473     -0.563      0.573      -1.194       0.661
C(diff_mil)[T.2]                 -0.3320      0.560     -0.593      0.553      -1.429       0.765
C(top_GK)[T.1]                    0.1151      0.441      0.261      0.794      -0.750       0.980
C(top_MF)[T.1]                    0.3637      0.426      0.855      0.393      -0.470       1.198
C(top_FW)[T.1]                   -0.0403      0.496     -0.081      0.935      -1.012       0.932
C(diff_def)[T.1]                  0.2746      0.325      0.846      0.398      -0.362       0.911
C(diff_def)[T.2]                  0.2819      0.375      0.752      0.452      -0.453       1.017
C(diff_def)[T.3]                  0.0327      0.476      0.069      0.945      -0.901       0.967
C(top_MF)[T.1]:C(top_FW)[T.1]     0.2487      0.751      0.331      0.740      -1.222       1.720
Poss                              0.0024      0.042      0.058      0.954      -0.080       0.085
FDA                               1.0792      1.293      0.834      0.404      -1.456       3.614
Poss:FDA                         -0.0317      0.024     -1.336      0.182      -0.078       0.015
FDD                               0.2232      0.109      2.049      0.040       0.010       0.437
age                              -0.0965      0.131     -0.735      0.462      -0.354       0.161
Dist                             -0.0470      0.042     -1.113      0.266      -0.130       0.036
SoT                               0.3689      0.056      6.627      0.000       0.260       0.478
diff_value                        0.0040      0.001      5.724      0.000       0.003       0.005
DF                               -0.3691      0.221     -1.672      0.095      -0.802       0.064
C(top_GK)[T.1]:DF                 0.5130      0.773      0.664      0.507      -1.002       2.028
DM                               -0.4665      0.587     -0.795      0.427      -1.617       0.684
DF:DM                            -0.4119      0.537     -0.767      0.443      -1.464       0.641
MF                               -0.0747      0.161     -0.463      0.643      -0.390       0.241
DM:MF                             0.1888      0.297      0.636      0.525      -0.393       0.771
=================================================================================================
"""

Ah le R² augmente ?? LOL

Les nouveaux croisements :

	- Des bons milieux avec des bons attaquants semblent jouer positivement sur les chances de victoire mais le coeff n'est pas significatif
	- La possession et les facilité offensive sont à 0.18 de p-value (y a pire dans le modèle...) et montrent une relation négative. Mais la possession seule n'est plus du tout significative. On va pas garder ça.
	- Un gardien productif et des defenseur productifs entraines une hausse des chances de victoire de 50 % (non significatif)
	- Tous les croisements de postes me flinguent les p-values du coup je ne pense pas les garder.

Dernier modèlme avant de dormir :: 

reg = smf.logit('victoire ~ C(home) + Poss*C(top_MF) + FDA*C(top_FW) + FDD + age + Dist + SoT + diff_value + C(saison) + C(PK) + C(CrdR) + C(diff_mil) + C(top_GK) + C(top_MF) + C(top_FW) + DF + DM + DM + C(diff_def)',
                  data=df_reg).fit()


<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      578
Method:                           MLE   Df Model:                           27
Date:                Mon, 30 Jan 2023   Pseudo R-squ.:                  0.2538
Time:                        22:22:56   Log-Likelihood:                -298.67
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 6.144e-29
=======================================================================================
                          coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------
Intercept               7.3721      3.443      2.141      0.032       0.624      14.120
C(home)[T.1]            0.2133      0.210      1.013      0.311      -0.199       0.626
C(top_MF)[T.1]         -1.1304      1.170     -0.966      0.334      -3.424       1.163
C(top_FW)[T.1]          1.7614      1.046      1.684      0.092      -0.289       3.812
C(saison)[T.reste]     -0.3287      0.223     -1.471      0.141      -0.767       0.109
C(PK)[T.1]              0.9938      0.330      3.007      0.003       0.346       1.642
C(PK)[T.2]              2.0364      0.922      2.209      0.027       0.230       3.843
C(CrdR)[T.1]           -0.6402      0.362     -1.766      0.077      -1.351       0.070
C(CrdR)[T.2]            0.0575      1.228      0.047      0.963      -2.348       2.463
C(diff_mil)[T.-1]      -0.4965      0.440     -1.127      0.260      -1.360       0.367
C(diff_mil)[T.0]       -0.0865      0.377     -0.229      0.819      -0.826       0.653
C(diff_mil)[T.1]       -0.3082      0.454     -0.678      0.497      -1.198       0.582
C(diff_mil)[T.2]       -0.4044      0.533     -0.758      0.448      -1.449       0.641
C(top_GK)[T.1]          0.1306      0.326      0.401      0.688      -0.508       0.769
C(diff_def)[T.1]        0.2347      0.316      0.743      0.457      -0.384       0.854
C(diff_def)[T.2]        0.1879      0.356      0.528      0.598      -0.510       0.886
C(diff_def)[T.3]       -0.0282      0.452     -0.062      0.950      -0.914       0.858
Poss                   -0.0668      0.019     -3.532      0.000      -0.104      -0.030
Poss:C(top_MF)[T.1]     0.0286      0.022      1.277      0.202      -0.015       0.072
FDA                    -0.3303      0.381     -0.866      0.387      -1.078       0.417
FDA:C(top_FW)[T.1]     -0.8455      0.552     -1.531      0.126      -1.928       0.237
FDD                     0.2460      0.109      2.266      0.023       0.033       0.459
age                    -0.1667      0.115     -1.450      0.147      -0.392       0.059
Dist                   -0.0506      0.042     -1.205      0.228      -0.133       0.032
SoT                     0.3579      0.056      6.449      0.000       0.249       0.467
diff_value              0.0041      0.001      6.283      0.000       0.003       0.005
DF                     -0.3656      0.195     -1.877      0.061      -0.747       0.016
DM                     -0.5722      0.300     -1.904      0.057      -1.161       0.017
=======================================================================================
"""

J'aime le fait que le fait d'avoir des milieux productifs avec la possession soit quasi significatif et augmente les chances de victoire
J'aime bien aussi que les facilités offensives avec des attaquants productifs soit presque significatif à 10 % et soit négatif ( c'est un peu contre intuitif mais je réfléchirai à ça plus tard).

C'est cool 
Next step ML
Mais avant --> Indice de dissuasion des équipe (diff par rapport à la moyenne annuelle des perf de l'équipe opposée :: cmp%, SoT, Dbb%, distance de frappe etc...)
et --> passer les postes en ranking ou score de productivité (ranking quand il s'agit de la somme de plusieurs postes (ex: attaquants) et score s'il s'agit d'un seul joueur par équipe (Milieu def et goal)...

Finalement je créé un score moyen par joueur et par poste retenu (MF, DF, FW, GK et DM). Le score moyen tient la route puisque toutes les équipe ont à peu près le même total de 90s tout poste confondu. Les différences en nombre qui vont exister, viendront simplement des différences de système et du nombre de milieux et défenseurs alignés à chaque match. Comme les scores sont ramenés au 90s, il n'y a pas de soucis quant au fait qu'un joueur ait joué l'équivalent de 10 matchs ou de 37.

Je pourrais même coupler ces indicateurs avec mes top joueurs par poste.
Je remarque que j'avais un filtre sur le nombre de matchs joués par les milieux def ce qui faisait que j'en perdait plein. C'état justifié mais du coup je vais tester sans. == Du coup j'ai Yepes qui fout la merde il avait 0.2 match .... Je garde que ceux qui en ont au moins 2 

J'ai une nouvelle table avec les top joueurs productifs par équipe et les scores moyens.
Au passage les score moyens élevés sont ::
Defense == Cagliari
Milieux == Atalanta
Attaque == Atalanta
Milieu def == Juventus
Gardien == Milan (AC)

Corrélation entre les scores moyens et le reste ::
Un peu comme les variables par poste, les attaquants et milieux sont fortement corrélés à la possession aux passes et à la valeur de l'équipe. Par contre les défenseurs et milieux déf sont correlés aux coup de pieds arrêtés c'est interessant. 
Ces variables sont assez fortement correlées aux nombre de top joueurs par poste et certainement à la variable dummy qui indique la présence d'au moins 1 top joueur.
Du coup je vais faire tourner un modèle sans ces dernières et juste avec les scores moyens.

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Tue, 31 Jan 2023   Pseudo R-squ.:                  0.2598
Time:                        21:00:38   Log-Likelihood:                -296.27
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 8.820e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept              7.8781      3.266      2.412      0.016       1.476      14.280
C(home)[T.1]           0.2353      0.210      1.118      0.263      -0.177       0.648
C(saison)[T.reste]    -0.3206      0.224     -1.435      0.151      -0.759       0.117
C(PK)[T.1]             1.0056      0.324      3.099      0.002       0.370       1.642
C(PK)[T.2]             1.8507      0.870      2.127      0.033       0.145       3.556
C(CrdR)[T.1]          -0.6727      0.365     -1.845      0.065      -1.387       0.042
C(CrdR)[T.2]          -0.1150      1.195     -0.096      0.923      -2.457       2.227
C(diff_mil)[T.-1]     -0.5045      0.445     -1.134      0.257      -1.377       0.368
C(diff_mil)[T.0]       0.0971      0.366      0.265      0.791      -0.620       0.814
C(diff_mil)[T.1]      -0.0663      0.444     -0.149      0.881      -0.936       0.804
C(diff_mil)[T.2]      -0.1727      0.517     -0.334      0.738      -1.186       0.841
C(diff_def)[T.1]       0.3438      0.320      1.076      0.282      -0.283       0.970
C(diff_def)[T.2]       0.3173      0.353      0.899      0.369      -0.375       1.009
C(diff_def)[T.3]       0.0601      0.457      0.131      0.896      -0.837       0.957
Poss                  -0.0622      0.016     -3.911      0.000      -0.093      -0.031
FDA                   -0.5411      0.352     -1.537      0.124      -1.231       0.149
FDD                    0.1743      0.109      1.596      0.111      -0.040       0.388
age                   -0.1871      0.123     -1.525      0.127      -0.428       0.053
Dist                  -0.0445      0.042     -1.070      0.285      -0.126       0.037
SoT                    0.3563      0.055      6.457      0.000       0.248       0.465
diff_value             0.0043      0.001      6.321      0.000       0.003       0.006
score_df_mean         -0.4817      0.162     -2.976      0.003      -0.799      -0.164
score_mf_mean          0.2498      0.179      1.395      0.163      -0.101       0.601
score_fw_mean          0.0569      0.169      0.336      0.737      -0.275       0.389
score_dm_mean         -0.1512      0.094     -1.607      0.108      -0.336       0.033
score_gk_mean          0.0278      0.121      0.229      0.819      -0.210       0.266
======================================================================================
"""

Le score moyen des défenseur est significatif. Celui des milieu def et des milieux est pas mal par contre pour les attaquants et les gardiens c'est pas terrible.
Pour les df la p-value est meilleure que lorsque je prends le nombre de top défenseurs (effet de groupe et pas d'individualité sur ces postes ??) 
Pour les DM, le nombre obtenait une meilleure p-value que le score moyen
Pour les milieux MF == Le score est meilleur que dans l'ancien modèle (je vais tester si je couple la variable avec la possession comme c'était le cas)
Pour les forward la combinaison top_FW et FDA etait 100 fois mieux que ça
Par contre je n'obtiens toujours pas un truc intéressant avec les gardiens.

Nouvelle REGRESSION ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      578
Method:                           MLE   Df Model:                           27
Date:                Tue, 31 Jan 2023   Pseudo R-squ.:                  0.2674
Time:                        21:10:29   Log-Likelihood:                -293.24
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 5.100e-31
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept             10.4092      3.735      2.787      0.005       3.089      17.730
C(home)[T.1]           0.2375      0.212      1.119      0.263      -0.178       0.653
C(top_FW)[T.1]         1.8938      1.103      1.717      0.086      -0.268       4.056
C(saison)[T.reste]    -0.3270      0.225     -1.451      0.147      -0.769       0.115
C(PK)[T.1]             1.0357      0.328      3.158      0.002       0.393       1.679
C(PK)[T.2]             1.9444      0.902      2.156      0.031       0.177       3.712
C(CrdR)[T.1]          -0.7091      0.366     -1.936      0.053      -1.427       0.009
C(CrdR)[T.2]           0.0399      1.200      0.033      0.973      -2.313       2.392
C(diff_mil)[T.-1]     -0.5070      0.449     -1.129      0.259      -1.387       0.373
C(diff_mil)[T.0]       0.1432      0.387      0.370      0.711      -0.615       0.902
C(diff_mil)[T.1]      -0.0066      0.472     -0.014      0.989      -0.932       0.919
C(diff_mil)[T.2]      -0.1593      0.553     -0.288      0.773      -1.243       0.924
C(diff_def)[T.1]       0.3207      0.329      0.975      0.330      -0.324       0.966
C(diff_def)[T.2]       0.2810      0.371      0.757      0.449      -0.447       1.009
C(diff_def)[T.3]       0.0007      0.475      0.001      0.999      -0.931       0.933
Poss                  -0.1203      0.036     -3.346      0.001      -0.191      -0.050
score_mf_mean         -0.8625      0.665     -1.297      0.195      -2.166       0.441
Poss:score_mf_mean     0.0237      0.013      1.805      0.071      -0.002       0.049
FDA                   -0.2174      0.394     -0.552      0.581      -0.989       0.555
FDA:C(top_FW)[T.1]    -1.0918      0.583     -1.873      0.061      -2.235       0.051
FDD                    0.1896      0.110      1.730      0.084      -0.025       0.404
age                   -0.1959      0.119     -1.648      0.099      -0.429       0.037
Dist                  -0.0433      0.042     -1.020      0.308      -0.126       0.040
SoT                    0.3607      0.056      6.476      0.000       0.252       0.470
diff_value             0.0044      0.001      6.610      0.000       0.003       0.006
score_df_mean         -0.5060      0.169     -2.996      0.003      -0.837      -0.175
score_dm_mean         -0.1476      0.095     -1.556      0.120      -0.333       0.038
GK                     0.2096      0.265      0.789      0.430      -0.311       0.730
======================================================================================
"""

Du coup, je retrouve mes belles p-values pour les FW
GK simple semble etre la meilleure solution
et le score mf_mean atteint des niveau de p-value jamais vu !!
Bon bah c'est bon signe. Je vais ajouter la dissuasion de l'adversaire. Il s'agira simplement d'ajouter la moyennede la différence de productivité de l'adversaire pour chaque équipe sur certains secteurs (plutôt offensifs comme le nombre de tirs/tirs cadrés, les passes réussies, les distances de tirs et en vrai ça devrait suffire)

J'obtiens les différences moyennes par opposants. Si je normalise les séries de chaque variables je pourrai créer un score avec des additions simples.
Puis je devrais obtenir un score pour chaque equipe qui traduira sa capacité a dissuader l'adversaire. (diff normalisée distance de frappe + difference normalisée de fautes - diff normalisée de frappes - diff normalisée de passes réussies)

J'obtiens des score plutôt cohérent avec le classement de série A de cette année là et avec le nombre de buts encaissés par les équipes. Empoli et Venezia sont mauvais quand la Juve et le Milan sont bons. La Lazio qui finit haut au classement 2021 - 2022 mais avec beaucoup de buts encaissés fini bas dans mon classement des équipe dissuasives donc ça colle. Les résultats domplets sont dans le fichier score_dis_opp.csv

J'ajoute cette variable dans ma base et mon fichier de régression et je teste mon modèle ::

Une fois de plus cette variable est fortement correlée à la différence de valeur des équipe (c'est vraiment une histoire d'argent). J'aime sa correlation négative avec la victoire (en effet si l'adversaire a un score élevé alors c'est une meilleure défense et gagner devient plus dur).

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      577
Method:                           MLE   Df Model:                           28
Date:                Tue, 31 Jan 2023   Pseudo R-squ.:                  0.2674
Time:                        21:58:39   Log-Likelihood:                -293.24
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.456e-30
======================================================================================
                         coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept             10.4245      3.758      2.774      0.006       3.059      17.790
C(home)[T.1]           0.2371      0.213      1.116      0.265      -0.179       0.654
C(top_FW)[T.1]         1.8889      1.111      1.701      0.089      -0.288       4.066
C(saison)[T.reste]    -0.3272      0.225     -1.451      0.147      -0.769       0.115
C(PK)[T.1]             1.0365      0.329      3.155      0.002       0.393       1.680
C(PK)[T.2]             1.9443      0.902      2.155      0.031       0.176       3.713
C(CrdR)[T.1]          -0.7091      0.366     -1.936      0.053      -1.427       0.009
C(CrdR)[T.2]           0.0366      1.204      0.030      0.976      -2.323       2.396
C(diff_mil)[T.-1]     -0.5056      0.451     -1.121      0.262      -1.389       0.378
C(diff_mil)[T.0]       0.1447      0.389      0.372      0.710      -0.618       0.907
C(diff_mil)[T.1]      -0.0049      0.475     -0.010      0.992      -0.935       0.925
C(diff_mil)[T.2]      -0.1574      0.555     -0.283      0.777      -1.246       0.931
C(diff_def)[T.1]       0.3221      0.331      0.973      0.331      -0.327       0.971
C(diff_def)[T.2]       0.2835      0.378      0.751      0.453      -0.457       1.024
C(diff_def)[T.3]       0.0037      0.482      0.008      0.994      -0.942       0.949
Poss                  -0.1202      0.036     -3.339      0.001      -0.191      -0.050
score_mf_mean         -0.8639      0.666     -1.297      0.195      -2.170       0.442
Poss:score_mf_mean     0.0237      0.013      1.805      0.071      -0.002       0.049
FDA                   -0.2176      0.394     -0.552      0.581      -0.990       0.554
FDA:C(top_FW)[T.1]    -1.0905      0.584     -1.867      0.062      -2.235       0.054
FDD                    0.1896      0.110      1.730      0.084      -0.025       0.404
age                   -0.1966      0.121     -1.631      0.103      -0.433       0.040
Dist                  -0.0434      0.043     -1.019      0.308      -0.127       0.040
SoT                    0.3608      0.056      6.459      0.000       0.251       0.470
diff_value             0.0044      0.001      6.264      0.000       0.003       0.006
score_df_mean         -0.5057      0.169     -2.992      0.003      -0.837      -0.174
score_dm_mean         -0.1478      0.095     -1.555      0.120      -0.334       0.039
GK                     0.2094      0.266      0.789      0.430      -0.311       0.730
score_dis              0.0017      0.046      0.037      0.970      -0.088       0.091
======================================================================================
"""

Oh c'est pas significatif !!!
Une forte défense ne serait pas la réponse pour une équipe Italienne ? Louche !

A suivre :: Toujours démarrer le ML à moins que j'ai d'autres idées de variables à ajouter au modèle d'ici là.

Et bien j'ai eu une idée en voyant au taff le fait de travailler sur les anova multivariées et de créer à partir de là des couples de variables dans la regression, ce qui m'a fait gagné 0.06 à mon R²
Sur les variables dummy je refait comme au boulot et pour les quanti, je vais utiliser leur corrélation simplement.

Qui est correlé fortement à une variable de mon modèle ?

Poss et Cmp
Poss et diff_value
Poss et Att et Poss et CMP mais trop logique
Poss et score-mf_mean
Poss et score_fw_mean
Diff_value et Top_FW
diff_value et FDA
diff_value et les scores moyens milieux et attaquants
Sh et Att :: pas mal
Opp_fls et FDA
CMP et score milieux et attaquants
CMP et Att avec MF et FW
Score dis a sa plus forte corrélation avec le nb d'attaquants adverse ?

Je remarque que les MF et les FW vont souvent ensemble comme les DM et les DF

J'avais déjà croisé score mf avec la possession et FDA avec les top_FW mais comme top_fw peut aller avec diff_value, je pourrais tester FDA et opp_fls 
A tester en quanti ::

score_mf_mean * poss
FDA * opp_fls
top_fw * diff_value
Sh * Att

et retester la variable repos, ça m'embete qu'elle n'y soit pas

Variables quali :

J'ai peut-être un problème lié au fait que j'estime une proba avec une regression logit

Mais du coup faut que je fasse des chi2 en boucle pour voir si h0 est validé sachant que h0 == les variables sont correlées.

Résultats intéressants des tests chi 2 le reste est dans la table des Sorties:
top_GK et top_DF, top_DM et top_DF, Formation et top_DF, top_MF Formation, top_DF et diff_mil, top_DM et formation, opp_Formation et saison?, CrdR et top_MF, ensuite c'est au dela de 1%

Ce que je remarque c'est qu'il y a beaucoup de couple par top poste , en gros si tu as un top_DM il y a surement des chances pour que tu aies aussi un top_FW. Par contre les formations semblent être influencée par la présence ou non d'un top joueur (en productivité toujours) sur un champ du jeu. La relation top_DF et Formation m'interesse. D'ailleurs elle apparait significativement correlée avec les différence en nombre des milieux de terrains =, ce qui confirme que la présence d'un top défenseur nait d'une formation particulière ou au contraire elle entraine une formation particulière avec plus ou moins de milieux. La relation opp_Formation et saison m'intrigue un peu :: hasard du calendrier ou véritables ajustement en cours de saison. Je tenterai bien de l'ajouter au modèle pour voir. Par curiosité, je testerai CrdR et top_MF. Est ce que d'avoir de bons milieux entraine plus ou moins de cartons rouges.

du coup il faut aussi ajouter ::
top_DF * Formation
opp_Formation * saison
CrdR * top_MF

Attention les résultats qui piquent les yeux ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      557
Method:                           MLE   Df Model:                           48
Date:                Wed, 01 Feb 2023   Pseudo R-squ.:                  0.2946
Time:                        21:52:03   Log-Likelihood:                -282.33
converged:                      False   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.293e-26
================================================================================================================
                                                   coef    std err          z      P>|z|      [0.025      0.975]
----------------------------------------------------------------------------------------------------------------
Intercept                                        7.5758   4.97e+06   1.53e-06      1.000   -9.73e+06    9.73e+06
C(home)[T.1]                                     0.2584      0.219      1.178      0.239      -0.171       0.688
C(top_FW)[T.1]                                   0.2030      0.556      0.365      0.715      -0.887       1.293
C(saison)[T.reste]                               0.2349      0.560      0.419      0.675      -0.863       1.333
C(opp_Formation)[T.3-5-2]                        0.6635        nan        nan        nan         nan         nan
C(opp_Formation)[T.4-3-3]                        0.0466   2.48e+06   1.88e-08      1.000   -4.87e+06    4.87e+06
C(opp_Formation)[T.4-4-2]                        0.8570        nan        nan        nan         nan         nan
C(opp_Formation)[T.4-5-1]                        1.0201        nan        nan        nan         nan         nan
C(PK)[T.1]                                       1.0322      0.347      2.973      0.003       0.352       1.713
C(PK)[T.2]                                       1.9836      0.914      2.171      0.030       0.192       3.775
C(CrdR)[T.1]                                    -0.7678      0.483     -1.589      0.112      -1.715       0.180
C(CrdR)[T.2]                                   -17.3875   1.56e+04     -0.001      0.999   -3.05e+04    3.05e+04
C(top_MF)[T.1]                                   0.1584      0.457      0.347      0.729      -0.737       1.054
C(diff_mil)[T.-1]                               -0.3669   2.48e+06  -1.48e-07      1.000   -4.87e+06    4.87e+06
C(diff_mil)[T.0]                                 0.9485   4.97e+06   1.91e-07      1.000   -9.73e+06    9.73e+06
C(diff_mil)[T.1]                                 1.2638   7.45e+06    1.7e-07      1.000   -1.46e+07    1.46e+07
C(diff_mil)[T.2]                                 1.7400   9.93e+06   1.75e-07      1.000   -1.95e+07    1.95e+07
C(diff_def)[T.1]                                 0.5791        nan        nan        nan         nan         nan
C(diff_def)[T.2]                                 0.6585        nan        nan        nan         nan         nan
C(diff_def)[T.3]                                 0.2746        nan        nan        nan         nan         nan
C(top_DF)[T.1]                                   0.8238      0.660      1.247      0.212      -0.471       2.118
C(Formation)[T.3-5-2]                           -0.6636   2.48e+06  -2.67e-07      1.000   -4.87e+06    4.87e+06
C(Formation)[T.4-3-3]                           -0.1356        nan        nan        nan         nan         nan
C(Formation)[T.4-5-1]                           -0.7052   3.84e+06  -1.84e-07      1.000   -7.53e+06    7.53e+06
C(saison)[T.reste]:C(opp_Formation)[T.3-5-2]    -0.4479      0.756     -0.593      0.553      -1.929       1.033
C(saison)[T.reste]:C(opp_Formation)[T.4-3-3]    -0.6838      0.768     -0.890      0.373      -2.190       0.822
C(saison)[T.reste]:C(opp_Formation)[T.4-4-2]    -0.9516      0.807     -1.180      0.238      -2.533       0.629
C(saison)[T.reste]:C(opp_Formation)[T.4-5-1]    -0.6190      0.739     -0.837      0.402      -2.068       0.830
C(CrdR)[T.1]:C(top_MF)[T.1]                     -0.0773      0.798     -0.097      0.923      -1.641       1.486
C(CrdR)[T.2]:C(top_MF)[T.1]                     17.9903   1.56e+04      0.001      0.999   -3.05e+04    3.05e+04
C(top_DF)[T.1]:C(Formation)[T.3-5-2]            -0.6828      0.723     -0.945      0.345      -2.099       0.734
C(top_DF)[T.1]:C(Formation)[T.4-3-3]            -0.6381      0.855     -0.747      0.455      -2.313       1.037
C(top_DF)[T.1]:C(Formation)[T.4-5-1]            -0.7114      0.763     -0.932      0.351      -2.207       0.785
Poss                                            -0.1828      0.046     -4.015      0.000      -0.272      -0.094
score_mf_mean                                   -1.1192      0.757     -1.479      0.139      -2.603       0.364
Poss:score_mf_mean                               0.0242      0.015      1.652      0.098      -0.005       0.053
FDA                                             -0.8868      2.535     -0.350      0.726      -5.856       4.082
opp_fls                                          0.1608      0.180      0.893      0.372      -0.192       0.514
FDA:opp_fls                                     -0.0196      0.063     -0.313      0.754      -0.142       0.103
diff_value                                       0.0055      0.001      5.936      0.000       0.004       0.007
C(top_FW)[T.1]:diff_value                       -0.0016      0.001     -1.155      0.248      -0.004       0.001
FDD                                              0.1219      0.118      1.030      0.303      -0.110       0.354
age                                             -0.1517      0.143     -1.062      0.288      -0.431       0.128
Dist                                            -0.0899      0.126     -0.715      0.475      -0.336       0.156
SoT                                              0.4634      0.067      6.929      0.000       0.332       0.594
score_df_mean                                   -0.7010      0.249     -2.812      0.005      -1.190      -0.212
score_dm_mean                                   -0.1655      0.121     -1.363      0.173      -0.403       0.072
GK                                               0.4948      0.472      1.048      0.295      -0.431       1.421
Sh                                               0.0612      0.185      0.331      0.741      -0.301       0.424
Att                                              0.0086      0.004      2.063      0.039       0.000       0.017
Sh:Att                                          -0.0002      0.000     -0.843      0.399      -0.001       0.000
================================================================================================================
"""

R² qui monte enfin
Il y a du nan partout. C'est lié au variables qui se complètes (à vérifier et corriger)
sur mes croisement :

score_mf_mean * poss ==> Pas mal
FDA * opp_fls == > Degueu == a dégager
top_fw * diff_value ==> Pas fou (du coup remettre FDA et top_FW c'était mieux)
Sh * Att ==> Pas la peine de garder
top_DF * Formation ==> Pas super significatif et tous les coeff se ressemblent. Du coup je vois pas trop l'intérêt pour l'étude
opp_Formation * saison ==> Il y a peut-être un truc sur le 4-4-2 hors automne
CrdR * top_MF ==> Pas significatif à jeter

les variables en nan ::
Des formations qui s'annulent avec les diff_defenseurs 

Après corrections et ajout de la variable repos ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      569
Method:                           MLE   Df Model:                           36
Date:                Wed, 01 Feb 2023   Pseudo R-squ.:                  0.2731
Time:                        21:59:19   Log-Likelihood:                -290.96
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 5.122e-28
================================================================================================================
                                                   coef    std err          z      P>|z|      [0.025      0.975]
----------------------------------------------------------------------------------------------------------------
Intercept                                       10.2740      3.858      2.663      0.008       2.712      17.836
C(home)[T.1]                                     0.2510      0.214      1.173      0.241      -0.169       0.670
C(top_FW)[T.1]                                   2.0527      1.123      1.828      0.068      -0.149       4.254
C(saison)[T.reste]                               0.2242      0.555      0.404      0.686      -0.863       1.312
C(opp_Formation)[T.3-5-2]                        0.2683      0.713      0.376      0.707      -1.129       1.666
C(opp_Formation)[T.4-3-3]                        0.6388      0.679      0.940      0.347      -0.692       1.970
C(opp_Formation)[T.4-4-2]                        0.8944      0.666      1.344      0.179      -0.410       2.199
C(opp_Formation)[T.4-5-1]                        0.5956      0.818      0.728      0.467      -1.008       2.200
C(PK)[T.1]                                       1.0284      0.334      3.079      0.002       0.374       1.683
C(PK)[T.2]                                       1.9253      0.919      2.094      0.036       0.124       3.727
C(CrdR)[T.1]                                    -0.7013      0.370     -1.896      0.058      -1.426       0.024
C(CrdR)[T.2]                                     0.0689      1.203      0.057      0.954      -2.290       2.428
C(diff_mil)[T.-1]                               -0.5956      0.497     -1.198      0.231      -1.570       0.379
C(diff_mil)[T.0]                                 0.0037      0.429      0.009      0.993      -0.836       0.844
C(diff_mil)[T.1]                                -0.2296      0.574     -0.400      0.689      -1.355       0.896
C(diff_mil)[T.2]                                -0.4516      0.727     -0.621      0.535      -1.877       0.974
C(diff_def)[T.1]                                 0.2572      0.387      0.665      0.506      -0.501       1.016
C(diff_def)[T.2]                                 0.1288      0.570      0.226      0.821      -0.989       1.247
C(diff_def)[T.3]                                -0.1974      0.830     -0.238      0.812      -1.824       1.429
C(saison)[T.reste]:C(opp_Formation)[T.3-5-2]    -0.3757      0.742     -0.506      0.613      -1.831       1.080
C(saison)[T.reste]:C(opp_Formation)[T.4-3-3]    -0.6672      0.753     -0.886      0.376      -2.143       0.809
C(saison)[T.reste]:C(opp_Formation)[T.4-4-2]    -0.8421      0.792     -1.064      0.287      -2.394       0.709
C(saison)[T.reste]:C(opp_Formation)[T.4-5-1]    -0.6620      0.723     -0.916      0.360      -2.078       0.754
Poss                                            -0.1316      0.037     -3.600      0.000      -0.203      -0.060
score_mf_mean                                   -1.0645      0.673     -1.582      0.114      -2.384       0.254
Poss:score_mf_mean                               0.0272      0.013      2.048      0.041       0.001       0.053
FDA                                             -0.2062      0.397     -0.519      0.604      -0.985       0.572
FDA:C(top_FW)[T.1]                              -1.1352      0.587     -1.932      0.053      -2.287       0.016
diff_value                                       0.0045      0.001      6.686      0.000       0.003       0.006
FDD                                              0.1958      0.111      1.762      0.078      -0.022       0.414
age                                             -0.1859      0.122     -1.529      0.126      -0.424       0.052
Dist                                            -0.0420      0.043     -0.966      0.334      -0.127       0.043
SoT                                              0.3556      0.056      6.358      0.000       0.246       0.465
score_df_mean                                   -0.5355      0.174     -3.076      0.002      -0.877      -0.194
score_dm_mean                                   -0.1473      0.096     -1.531      0.126      -0.336       0.041
GK                                               0.2029      0.275      0.738      0.461      -0.336       0.742
repos                                            0.0373      0.026      1.434      0.152      -0.014       0.088
================================================================================================================
"""

Bon R² qui redescend et repos c'est pas si moche que ça

Ci dessous le modèle le plus propre sur lequel j'arrive après de multiples tests pour intégrer des variables sur les gardiens etc ...
Les diff_mil et diff_def ont disparus parce qu'on a compris le concept. Il faudra s'en souvenir mais en gros plus l'écart est grand plus le coeff est significatif et donc plus cela impact les performances de l'équipe ::

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      576
Method:                           MLE   Df Model:                           29
Date:                Wed, 01 Feb 2023   Pseudo R-squ.:                  0.3042
Time:                        22:19:36   Log-Likelihood:                -278.51
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 9.171e-36
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                7.7230      3.933      1.964      0.050       0.015      15.431
C(home)[T.1]                             1.5776      0.576      2.740      0.006       0.449       2.706
C(top_FW)[T.1]                           1.6450      1.183      1.391      0.164      -0.673       3.963
C(saison)[T.reste]                      -0.2927      0.232     -1.259      0.208      -0.748       0.163
C(PK)[T.1]                               1.0757      0.343      3.137      0.002       0.404       1.748
C(PK)[T.2]                               1.8046      0.947      1.905      0.057      -0.052       3.662
C(CrdR)[T.1]                            -0.6319      0.374     -1.690      0.091      -1.365       0.101
C(CrdR)[T.2]                             0.1701      1.210      0.141      0.888      -2.201       2.541
C(top_DM)[T.1]                           1.3355      0.569      2.346      0.019       0.220       2.451
C(Formation)[T.3-5-2]                    0.6595      0.507      1.300      0.194      -0.335       1.654
C(Formation)[T.4-3-3]                    0.5122      0.485      1.057      0.291      -0.438       1.462
C(Formation)[T.4-5-1]                    0.5751      0.494      1.165      0.244      -0.392       1.542
C(top_DM)[T.1]:C(Formation)[T.3-5-2]    -2.2461      0.747     -3.007      0.003      -3.710      -0.782
C(top_DM)[T.1]:C(Formation)[T.4-3-3]    -2.3242      0.782     -2.973      0.003      -3.857      -0.792
C(top_DM)[T.1]:C(Formation)[T.4-5-1]    -1.8374      0.694     -2.648      0.008      -3.197      -0.477
Sh                                      -0.0722      0.047     -1.538      0.124      -0.164       0.020
C(home)[T.1]:Sh                         -0.0997      0.040     -2.488      0.013      -0.178      -0.021
Poss                                    -0.1777      0.043     -4.123      0.000      -0.262      -0.093
score_mf_mean                           -0.9947      0.688     -1.447      0.148      -2.342       0.353
Poss:score_mf_mean                       0.0207      0.014      1.511      0.131      -0.006       0.047
FDA                                      1.0144      0.543      1.870      0.062      -0.049       2.078
FDA:C(top_FW)[T.1]                      -0.7765      0.617     -1.259      0.208      -1.985       0.432
diff_value                               0.0049      0.001      6.994      0.000       0.004       0.006
Att                                      0.0063      0.002      2.524      0.012       0.001       0.011
FDD                                      0.0999      0.116      0.861      0.389      -0.127       0.327
age                                     -0.1958      0.132     -1.484      0.138      -0.454       0.063
Dist                                     0.0135      0.046      0.292      0.770      -0.077       0.104
SoT                                      0.4285      0.065      6.559      0.000       0.300       0.557
score_df_mean                           -0.6515      0.215     -3.036      0.002      -1.072      -0.231
repos                                    0.0542      0.027      2.022      0.043       0.002       0.107
========================================================================================================
"""

R² à 0.3
Je garde Home même si ça n'a jamais été significatif, avec Sh cela le devient et c'est assez cool je trouve. Les joueurs frapperraient moins quand ils sont à la maison ??
Top_FW se marie avec le FDA (indice de facilité offensive). Le second est significatif et le mix des deux est pas non plus complétement non significatif.

Faut que je trouve le truc de saison qui fera le meme effet qu'à home
Par contre le croisement top_DM et formation est fou. Les résultats dépendent de comment tu places ton milieux def et de sa productivité == Ca me ramène sur ma piste de joueur le plus important du groupe.
 Après pour le reste il faudra que je regarde à tête reposée et que j'en déduise des trucs.

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      574
Method:                           MLE   Df Model:                           31
Date:                Wed, 01 Feb 2023   Pseudo R-squ.:                  0.3155
Time:                        22:24:23   Log-Likelihood:                -274.00
converged:                      False   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.444e-36
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                7.6717      3.944      1.945      0.052      -0.058      15.402
C(home)[T.1]                             1.5517      0.582      2.666      0.008       0.411       2.693
C(top_FW)[T.1]                           1.4939      1.186      1.259      0.208      -0.831       3.819
C(saison)[T.reste]                      -0.4943      0.251     -1.972      0.049      -0.986      -0.003
C(PK)[T.1]                               0.0829      0.523      0.159      0.874      -0.942       1.108
C(PK)[T.2]                              23.1012   4.36e+04      0.001      1.000   -8.53e+04    8.54e+04
C(CrdR)[T.1]                            -0.6720      0.376     -1.786      0.074      -1.410       0.066
C(CrdR)[T.2]                             0.1575      1.222      0.129      0.897      -2.238       2.553
C(top_DM)[T.1]                           1.3915      0.572      2.432      0.015       0.270       2.513
C(Formation)[T.3-5-2]                    0.6341      0.504      1.257      0.209      -0.354       1.622
C(Formation)[T.4-3-3]                    0.5000      0.487      1.026      0.305      -0.455       1.455
C(Formation)[T.4-5-1]                    0.6059      0.493      1.228      0.219      -0.361       1.573
C(PK)[T.1]:C(saison)[T.reste]            1.8124      0.705      2.570      0.010       0.430       3.195
C(PK)[T.2]:C(saison)[T.reste]          -22.0666   4.36e+04     -0.001      1.000   -8.54e+04    8.53e+04
C(top_DM)[T.1]:C(Formation)[T.3-5-2]    -2.2819      0.758     -3.012      0.003      -3.767      -0.797
C(top_DM)[T.1]:C(Formation)[T.4-3-3]    -2.3446      0.791     -2.965      0.003      -3.894      -0.795
C(top_DM)[T.1]:C(Formation)[T.4-5-1]    -1.8525      0.700     -2.647      0.008      -3.224      -0.481
Sh                                      -0.0790      0.048     -1.653      0.098      -0.173       0.015
C(home)[T.1]:Sh                         -0.0984      0.041     -2.429      0.015      -0.178      -0.019
Poss                                    -0.1793      0.043     -4.128      0.000      -0.264      -0.094
score_mf_mean                           -1.0602      0.692     -1.532      0.126      -2.417       0.296
Poss:score_mf_mean                       0.0215      0.014      1.561      0.118      -0.005       0.048
FDA                                      1.0494      0.549      1.913      0.056      -0.026       2.125
FDA:C(top_FW)[T.1]                      -0.6743      0.620     -1.088      0.277      -1.889       0.541
diff_value                               0.0049      0.001      6.952      0.000       0.004       0.006
Att                                      0.0062      0.003      2.464      0.014       0.001       0.011
FDD                                      0.0860      0.116      0.740      0.459      -0.142       0.314
age                                     -0.1870      0.133     -1.410      0.159      -0.447       0.073
Dist                                     0.0166      0.047      0.356      0.722      -0.075       0.108
SoT                                      0.4404      0.066      6.634      0.000       0.310       0.571
score_df_mean                           -0.6271      0.216     -2.907      0.004      -1.050      -0.204
repos                                    0.0490      0.027      1.811      0.070      -0.004       0.102
========================================================================================================
"""

J'ai ptet' trouvé pour les saisons. Par contre ça le flingue mes coeff pour les pénaltys seuls et pour d'autres variables. Je garde pas ça...

Que ce qu'il y a de significatif ou presque ::

#####################################################################################################################################################################

<class 'statsmodels.iolib.summary.Summary'>
"""
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Wed, 01 Feb 2023   Pseudo R-squ.:                  0.3005
Time:                        22:29:19   Log-Likelihood:                -279.97
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.872e-37
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                7.4038      3.750      1.974      0.048       0.054      14.753
C(home)[T.1]                             1.6611      0.568      2.922      0.003       0.547       2.775
C(saison)[T.reste]                      -0.2945      0.230     -1.279      0.201      -0.746       0.157
C(PK)[T.1]                               1.1054      0.336      3.288      0.001       0.446       1.764
C(PK)[T.2]                               1.6792      0.914      1.836      0.066      -0.113       3.471
C(CrdR)[T.1]                            -0.6632      0.371     -1.787      0.074      -1.390       0.064
C(CrdR)[T.2]                            -0.0270      1.189     -0.023      0.982      -2.357       2.303
C(top_DM)[T.1]                           1.3671      0.562      2.431      0.015       0.265       2.469
C(Formation)[T.3-5-2]                    0.7503      0.485      1.547      0.122      -0.200       1.701
C(Formation)[T.4-3-3]                    0.5494      0.480      1.146      0.252      -0.391       1.489
C(Formation)[T.4-5-1]                    0.7157      0.450      1.591      0.112      -0.166       1.597
C(top_DM)[T.1]:C(Formation)[T.3-5-2]    -2.2872      0.742     -3.084      0.002      -3.741      -0.834
C(top_DM)[T.1]:C(Formation)[T.4-3-3]    -2.2795      0.761     -2.995      0.003      -3.771      -0.788
C(top_DM)[T.1]:C(Formation)[T.4-5-1]    -1.8723      0.686     -2.729      0.006      -3.217      -0.528
Sh                                      -0.0731      0.045     -1.623      0.105      -0.161       0.015
C(home)[T.1]:Sh                         -0.1051      0.040     -2.647      0.008      -0.183      -0.027
Poss                                    -0.1660      0.040     -4.122      0.000      -0.245      -0.087
score_mf_mean                           -0.7160      0.664     -1.079      0.281      -2.017       0.585
Poss:score_mf_mean                       0.0166      0.013      1.269      0.204      -0.009       0.042
FDA                                      0.8350      0.450      1.856      0.063      -0.047       1.717
diff_value                               0.0050      0.001      7.140      0.000       0.004       0.006
Att                                      0.0064      0.002      2.730      0.006       0.002       0.011
age                                     -0.2023      0.131     -1.543      0.123      -0.459       0.055
SoT                                      0.4295      0.065      6.648      0.000       0.303       0.556
score_df_mean                           -0.6466      0.212     -3.057      0.002      -1.061      -0.232
repos                                    0.0549      0.027      2.058      0.040       0.003       0.107
========================================================================================================
"""


A commenter ...

Commentaires et rappels des éléments à retenir ::

#####################################################      Rappels :

- Défense à 3 :
	Première découverte de cette étude pour moi, l'omniprésence des défense à 3 dans le calcio. Après recherche j'ai compris le fonctionnement et la volonté derrière de jouer plutôt les contres et d'avoir un bloc au milieu assez costaud avec les deux pistons qui viennent aider sur les phases défensives. Attention cependant, comme je l'ai vu sur certains matchs, il arrive que sur les phases offensives d'une équipe qui a la possession, l'un des trois défenseurs centraux monte et cela mets un peu plus en péril l'équipe en cas de contre rapide de l'adversaire. C'est d'ailleurs l'objet du point suivant, le premier résultat contre intuitif de la recherche :

- Phénomène de possession :
	Sur la saison 2021-2022 que j'ai étudié, depuis es premiers tests de régression, la possession est toujours ressortie, comme un facteur significatif sur la victoire. Cependant, le résultat ne m'a pas paru intuitif du tout puisque le coefficient est négatif. Ce qui signifie que les équipes avec la possession, ont moins de chances de gagner. Le football italien est un football de contre. Et lorsque deux petites équipe habituées à jouer en contre, celle qui arrive à faire garder le ballon à l'autre, a plus de chance de gagner. Par contre, concernant les quelques gros marchés habitués à contrôler le ballon (Inter, Napoli et autre...) ce coefficient n'est plus vraiment crédible. Cela immpliquerait donc de se pencher sur un modèle à effets fixes/variables (je n'ai plus le nom exact) dans lequel ce paramètre serait différent pour chaque équipe. 

- Effet automne :
	Nous l'avons vu dès les premiers tests sur la période à laquelle se déroule le match et les mois de septembre, octobre et novembre ressortaient significatifs et positifs sur la variable victoire. Comme tous les autres mois n'étaient pas significatifs, j'ai séparé l'année en deux saison et il est bien ressorti qu'en automne les chances de victoire sont plus grandes. Dans la mesure où chaqe week-end, il est sensé avoir autant de matchs à chaque fois avec le même nombre d'équipe, ce résultat nous indique donc que sur le reste de la saison, les équipe ont peut-être plus tendances à accepter le match nul (fatigue, avance considérable au classement etc...). La raison exacte reste à déterminer mais ce résultat pourrait me pousser à faire une étude juste là dessus.

- Difficulté à étudier les effets des formations les unes contre les autres :
	Malheureusement, après plusieurs essais, je n'ai jamais réussi à obtenir un résultat concernant les formations qui s'affrontent. J'aurais aimé savoir si contre un 3-4-3 , un 4-4-2 est plus ou moins efficace qu'un 3-5-2 ? C'est dommage, mais plus tard dans mes tests, j'ai finalement pu contourner un peu ce problème et j'ai pu constater quand même un effet du déséquilibre sur un champ du jeu entre deux équipe même si les coefficient n'étaient jamais significatifs :

- Impact de la différence du nombre de milieux de terrain et de la différence du nombre de défenseurs :
	Du coup, pour essayer de modéliser l'impact de la Formation choisie j'ai décidé de travailler sur la différence du nombre de milieux de terrain entre les deux équipes et la différence entre le nombre de défenseurs d'une équipe avec le nombre d'attaquants de son adversaire. Si aucun des coefficients n'est ressortis significatif. J'ai pu constater que ceux ci évoluaient en fonction de la différence. En ce qui concerne les milieux de terrains, plus la différence s'écartaient de 0 plus le coefficient devenait significatif et négatif. Même si au mieux, je n'ai pas passer la barre des 30% je crois, ce résultat m'apparait logique et assez intéressant sur la nécessité de bien équilibré son équipe pour se préparer aux duels du milieu de terrain avec l'adversaire. Pour les défenseurs, le résultats étaient un peu inverse, c'est à dire, que plus la différence augmente, plus le coefficient devient de moins en moins significatif et plus fort puis devient de plus en plus négatif. Cela voudrait dire que, pour affronter une équipe, il est préférable d'avoir au moins 2 défenseurs de plus que l'autre n'a d'attaquant mais qu'au delà de ce nombre, on surcharge le secteur défensif et on ne peut plus attaquer et donc marquer et, in fine gagner le match tout simplement. Le déséquilibre dans la formation semble vraiment être la "chose à éviter".

- Penaltys et cartons rouges :
	Sans trop de surprise, obtenir des penaltys augmente significativement les chances de victoire et recevoir des cartons rouges les diminue. Cependant, ce que j'aimerais retenir là c'est surtout comment, un simple fait de jeu peut retourner le match et aussi, mais surtout, comment une erreur peut être absorber et comment en faire une seconde augmente exponentiellement les chances de défaites. Si on en croit les différents modèle, il est possible d'absorber le fait de recevoir un rouge si on a un effectif vraiment plus fort, mieux placé et avec des joueurs plus productifs. Mais si jamais, on venait à en recevoir 2, il faudrait vraiment avoir le dessus sur l'adversaire et le dominer dans tous les secteurs pour ne pas perdre. Cette hypothèse n'est malheureusement pas significative statistiquement mais reste cohérente malgré tout.

- Corrélation entre les milieux productifs et les attaquants poductifs :
	J'ai d'abor cru à un truc un peu magique mais en réalité, dans la mesure où ces postes ont des missions communes et que celles-ci remontent dans le calcul de mon indicateur (but, assist), cette corrélation n'a rien d'extraordinaire. Elle vient simplement confirmé, (avec celle selon laquelle les défenseurs et les milieux défensifs sont correlés) que le jeu peut être scindé en deux. D'ailleurs, un des points que je n'ai finalement jamais réussi à vraiment confirmer, c'est qu'aucun des postes ne peut vraiment être considéré comme plus impactant que les autres. En réalité, ce qui ressort de tous mes modèles et autres tests de corrélations (chi2 et VIF etc...) c'est que le football semble être le sport collectif par excellence. Un sport dans lequel les individualité sont mesurables mais pas entièrement (certains aspect du jeu sont impossible à quantifier : placement, compréhension et lecture du jeu (surtout sur un terrain de foot qui est immense), l'anticipation (qui revient énormément au sujet de la défense), la fameuse "vista" le fait de voir tout avant tout le monde et d'avoir deux passes d'avances sur son adversaire à l'image d'un joueur d'échec qui calcul 15 coups en avance), et pleins d'autres aspect très difficiles à mesurer) et où, l'intérêt de chacun est de rendre le travail des autres plus simples (nous verrons sur les défenseurs notamment qu'il est plutôt mauvais d'avoir un défenseur trop productif, c'est le signe d'un problème majeur). De par mon expérience sur les données NBA par exemple, je voyais qu'il était véritablement possible d'étudier l'impact d'un joueur sur les résultats de son équipe simplement au travers de ses stats (espn et basketball-reference grouille d'indicateurs à ce sujet : PER, win share etc...). Certains de ces indicateurs sont même né de thèses d'étudiants en data science au MIT par exemple. Mais dans le football qui nous intéresse ici, chaque poste à des missions bien différentes. Il devient beaucoup plus compliqué de les comparer entre eux dans un premier temps (comparer le nombre de but d'un défenseur central et d'un 9 est complétement stupide statistiquement) et trouver des statistiques pertinentes pour chaque poste et les ramener à une même échelle relève d'un travail de recherche sur chaque poste pour lesquels il faudrait une thèse par position. Et même avec ça, considérant les éléments que j'ai évoqué plus haut, il restera des choses inquantifiables pour l'étude.

- Non significativité de l'indice de dissuasion qui pourtant montrait un classement réaliste :
	Cet indice créé à partir des statistiques des équipes sur un match comparées aux statistiques moyennes de cette même équipe sur la saison m'a permis de sortir un classement des meilleures défenses de série A (Juve, Milan, bon Atalanta aussi mais bref ...). Cependant, le fait de jouer l'équipe avec le score de dissuasion le plus élevé de la ligue, n'entraine pas une baisse significative des chances de victoires. En effet, un match de foot pouvant se jouer sur une action chanceuse et le nombre de buts par match restant relativement faible, le fait qu'une équipe dissuade l'autre de tirer de près ou de bien organiser son jeu ne l'empêche pas pour autant d'aller chercher un nul voir une victoire (surtout dans un championnat comme l'Italie où la défense est reine et où le jeu se base beaucoup sur les contres).

###########################################       Commentaires :

- L'effet match à domicile (1.66 sign) :
	Pas vraiment de surprise ici, il s'agit d'un phénomène présent dans tous les sports. Le fait de jouer à domicile augment les chances de victoires cra, portée par son public, une équipe peut se sentir un peu plus forte et à l'inverse, parfois jouer dans un stade un peu hostile peut refroidir les joueurs à l'éxtérieur. En fait, ce qu'il faudrait étudier maintenant c'est la valeur de cet impact sur tous les championnats pour voir lesquels ont les supporters les plus efficaces (ça pourrait être marrant).

- L'effet penaltys (1.1 et 1.7 sign pour 1 et 6% pour 2) :
	Comme on l'a vu dans la partie précédente, il existe un effet fort de l'obtention de penaltys sur les chances de victoire (je rappelle qu'on souhaite évaluer une proba avec ce modèle donc soit 0 soit 1). Le fait qu'un seul penalty augmente les chances de victoire de 1.1 (et 2 de 1.7) suffit à comprendre qu'à lui seul ce phénomène peut faire tourner le cours d'un match.

- L'effet 1 carton rouge (-0.66 à 7%) : 
	A l'inverse, l'obtention d'un carton rouge entraine une baisse des chances de victoire de 0.66. En d'autres termes, si l'équipe qui prend ce carton n'est pas déjà en train de mener et de dominer complétement son adversaire, le match peut basculer. Cependant, le fait que ce soit inférieur à1 me laisse à penser que ce phénomène n'est pas absolu et qu'un rouge n'est pas forcément signe de défaite.

- L'effet top milieu défensif (1.37 à 1.5%) :
	Avoir un top milieux défensif dans le cadre de ce modèle signifie que le milieu défensif de cette équipe fait partie des 20% des milieux défenseurs les plus productifs en série A. Cela ne veut pas forcément dire qu'il fait partie des 20 % des meilleurs mais bien de ceux qui produisent le plus de statistiques. En effet, dans ce classement des top milieux défensifs on pourra retrouver certains grands nom mais aussi beaucoup de joueurs moins connus. Certains des plus connus apparaissant en fond de liste comme les moins productifs de série A. Cet indicateur n'est donc pas du tout là pour dire qui a un meilleur milieu défensif que les autres. Par contre, ces équipes ont un milieu défensif qui potentiellement, compense un manque ou produit énormément (interception et tacles, passes réussies etc...). Le fait d'avoir un de ces joueurs entraine une hause des chances de victoire très forte 1.37 et plutôt significative. Cela peut vouloir dire, surtout dans le cas des équipes qui jouent en contre, que ce poste fait partie des plus impactant sur les chances de victoire (il y en a d'autres dans le modèle mais très peu voir aucun n'est aussi significatif). Cela colle avec l'hypothèse de base de ce travail, à savoir que le milieu défensif est un des postes les plus importants au foot et certainement l'un des plus impactant et indispensable.

- L'effet formation (toutes mieux que le 3-4-3 mais pas sign) :
	Selon ce modèle, toutes les formations ont un impact positif sur la victoire par rapport à la référence du modèle le 3-4-3. Peut-être que ce système (qui pourtant parait plutot offensif) entraine plus de matchs nuls ou de défaite. Cependant rien de tout ça n'est significatif, cela signifie que ces différences sont peut-être justifiées ou bien complétement fausses. Bon les p-value tournant autour de 0.2 c'est pas non plus horrible mais pas assez faible pour pouvoir prendre en considération ces différences.

- Effet top_DM dans la formation (sign et génial) :
	Par contre, et c'est là que c'est cool pour mon travail. La présence d'un top milieu défensif dans des formations spécifiques, va venir influer sur celles ci de manière significative. Si je ne me trompe pas, il faut interpreter les coefficients de la manière suivante :: sur un 3-5-2 qui a un coefficient initial de 0.75 points de chance de victoire en plus par rapport au 3-4-3 doit être multiplié par -2.29 pour obtenir sa nouvelle valeur lorsque l'effectif compte un top milieu  def (ce qui donne -1.71). Du coup, avoir un top milieu def dans ce système n'est pas bon pour les chances de victoire. Cependant, est-ce à cause du système justement que le milieu def devient plus productif ou est-ce l'inverse, les coachs choisissent ce système lorsqu'il savent qu'ils ne doivent pas tout reposer sur leur milieu defensif et du coup, leur milieu def n'est pas un top milieu mais il gagne plus souvent ? La question se pose sur tous les systèmes de jeu qui passent négatifs avec un top milieu def (l'inverse étant vrai aussi si on multiplie le coeff du milieu avec celui croisé). Le système qui semble le plus s'appuyer sur le milieu défensif (le plus adapté si on a un bon milieu def ??) est le 3-4-3 puis le 4-5-1. Du coup, il existe une piste d'approfondissement ici qui portera sur le système le plus adapté à un bon milieu défensif et celui qui permet de ne pas trop reposer le jeu sur lui si son niveau général ne le permet pas.

- L'effet nombre de tirs (-0.07 à 10%) :
	Prendre beaucoup de tirs dans un match ne semble pas être un bon signe ici. En effet, un coefficient négatif indique que plus l'équipe tir, plus ses chances de victoire s'amenuisent (très peu mais quand même). cette conclusion peut coller avec le phénomène observé sur la possession. Une équipe qui passe son match à tirer devant le but parce qu'elle a la balle tout le long du match alors qu'elle est plus habituée (et construite) pour jouer en contre ne va pas forcément marquer plus et va sûrement se découvrir plus laissant l'opportunité à son adversaire de partir très vite de l'autre côté, seule face au gardien. Le réalisme de l'équipe fera le reste.

- L'effet croisé nb de tirs et domicile (-0.1 à 0.8%) :
	A domicile une équipe tire moins qu'à l'exterieur et c'est significatif à 1%. Plusieurs hypothèses me viennent en tête :
		1. Si ce coeff s'applique uniquement au nombre de tirs, alors cela signifie qu'à domicile, le coeff du nombre de tirs et 10% plus faible à chaque fois qu'un tir supplémentaire est pris et donc, les chances de victoires augmentent (voir deviennent positives  - * - = + ). 
		2. A l'inverse si ce coeff s'applique au coeff de domicile, je ne comprend pas comment le fait de prendre plus de tirs diminue les chances de victoires. Je devrais vérifier qu'il n'y a pas un ordre précis pour écrire les relations entre deux variable. Ca doit être le cas puisque les coeffs restent les mêmes si j'inverse l'ordre des variables. 

- L'effet possession (-0.16 sign) :
	Cet effet a été développé plus haut mais il rappelle simplement qu'en Italie, tenir la balle n'est pas gage de victoire. Je pense aux équipe comme le Barça ou Man city qui ont construit leur jeu autour de la possession (#guardiola). Cependant, quelques équipes beaucoup plus fortes que les autres peuvent se permettre de jouer la possession et de continuer à gagner. Mais cela ne s'applique qu'à vraiment quelques cadors de série A dont les effectifs surpassent en tous points ceux des autres équipes de série A. Ce résultat est surtout le résultat à appliquer aux équipes du ventre mou et du bas de la série A qui, étant plus nombreuses impactent plus mes résultats ici. Comme je l'ai dit avant, il ne tient qu'à moi de continuer à travailler sur ce sujet pour étudier cet impact en discriminant les équipe (ou les formation par exemple) avec un modèle à effets fixes/variables ou carrément en lançant des algo de machine learning.

- L'effet score moyen des milieux (-0.71 mais pas sign) :
	Malheureusement cet indicateur seul n'est pas significatif mais il indique que si les milieux d'une équipe ont un score de productivité plus haut, alors il y a des chances pour que leur équipe soit plus faible ou, en tout cas, ait plus de chances de perdre. Autrement dit, si on sursollicite les milieux de terrain (hors milieux defensifs) c'est que l'équipe souffre et que par conséquent, les chances de victoires sont plus faibles.

- Effet croisé score moyen milieux et possession (0.01 à 20%) :
	Par contre, et là aussi le résultat est très intéressant et me permet de faire un premier point sur l'évantualité de travailler la possession en fonction des équipe, s'il on croise la possession avec le score moyen des milieux, on diminue l'impact négatif des deux autres variables. Dit avec d'autres mot, si mon équipe joue en possession, mes milieux seront logiquement plus productifs et si mon effectif maitrise un minimum le jeu en possession, j'augmente mes chances de victoire. Il pourrait être intéressant d'étudier ce phénomène sur d'autres postes pour voir si c'est aussi significatif et pour observer si il est préférable de jouer au milieu lorsque l'on a souvent la balle ou avec les attaquants par exemple (peu de chance mais pourquoi pas). Ce score moyen prend en compte des éléments que l'on pourrait considérer comme des indicateurs de propreté (% de dribbles réussis, % de passes complétées): en s'appuyant là dessus on pourrait aller jusqu'à dire qu'avoir des milieux de qualité permet de jouer en possession et en même temps d'augmenter ses chances de victoire (logique mêm s'il on a vu que le jeu italien est particulier). Et qu'à l'inverse, avoir des milieux un peu moyen et la possession donne un cocktail un peu dangereux pour l'équipe. Ce coefficient serait-il le coeff des grosses écuries de série A qui jouent en possession ?

- Les facilités offensives (0.83 à 6%) :
	Le FDA pour "facilités et difficultés à attaquer" est significatif à 10%. Cet indicateur reprend un peu des valeurs similaires à indice de dissuasion sans pour autant normaliser les valeurs ni rapporter la performance de l'équipe à sa moyenne annuelle. Il contient des élements offensifs positifs comme le nombre de tirs ou la possession et des éléments négatifs comme la distance de tirs moyenne. Etonnamment cet indicateur n'est jamais ressort dans l'étude des corrélations et de la colinéarité des variables. Ce qu'il indique ici c'est simplement que, si une équipe est porductive offensivement au cours d'un  match et qu'elle ne rencontre pas trop de soucis pour créer le jeu, elle augmente ses chances de victoires. L'indice reprenant plusieurs valeurs différente de la table, il ne peut pas être interpreter directement (par exemple un tir de plus augmente de x les chances de victoires). Ici tout est relatif et donc, c'est simplement le signe qu'une équipe à l'aise offesivement (on pourrait supposer qu'elle domine son adveraire sur ce secteur du jeu) augmente significativement ses chances de victoires. Si ce résultat est complétement logique, il est à mettre en face du résultat du même indicateur sur les facilités et difficultés défensives des équipe qui lui, n'a jamais été significatif. Quelque part cela signifie, qu'être productif offensivement augmente les chances de victoire tandis qu'être productif en défense (ce qui n'est pas toujours bon signe) n'a pas d'effet sur les chances de victoire (ni positif ni négatif). 

- La différence de valeur des effectis (0.005 sign) : 
	Sans surprise, et en accord avec le football moderne, avoir un effectif et donc des moyens plus élevé en valeur augmente significativement les chances de victoires. Si le coefficient semble faible c'est simplement car il s'agit de différences de l'ordre de la centaine (de millions dans notre cas). Il faut donc considérer qu'une équipe d'une valeur supérieur de 100 millions d'euros sur son adversaire a 50% de chances de victoire en plus. Ces différences sont très courantes et il suffit de se pencher sur les valeurs des équipes sur la saison 2021 - 2022 étudiée ici pour s'en rendre compte. Par exemple, l'équipe avec la valeur la plus élevée selon Transfermarkt était la juve avec un montant total de 642 millions d'euros contre 70 millions d'euros pour la Salernitana qui est tout en bas de ce classement. Par conséquent, avant même d'avoir joué le match et fait quoi que ce soit, la Juve a déjà 300% de chances de victoires sur la Salernitana.

- L'effet passes tentées (0.006 à 6%) :
	Le coefficient concernant le nombre de passes tentées par l'équipe est significatif à 10 %. Il est lié à la possession évidemment et traduit une fois de plus la domination de certaines grosses équipes. cependant, le fait qu'il soit positif tandis que le coefficient de la possession est négatif soulève quelques questions. Ma première intuition serait liée à l'effet croisé possession X score moyen des milieux et rejoindrait les conclusions tirées à ce moment là. A savoir, que la possession est un phénomène positif lorsque votre milieu maitrise son sujet et propose un niveau de jeu garantissant une certaine réussite dans les passes et de la création de qualité. J'imagine toujours la situation de nos deux équipes de milieu de tableau qui sont construites autours du jeu en contre et qui s'affronte : celle qui a la possession se retrouve acculée par son adversaire habitué à ne pas tenir le ballon et se retrouve vite en difficulté car ses propres milieux n'arrivent pas à tenir la pression car ils n'y sont tout bonnement pas habitués.

- L'effet age (-0.2 à 12%) :
	Malgré sa significativité douteuse, cet indicateur reste interessant puisqu'il nous montre avec son signe que l'expérience c'est bien mais ça peut tendre à baisser les chances de victoires. J'imagine assez facilement que lorsqu'il s'agit d'une équipe qui prends la possession et qui a besoin de bons milieux, les joueurs plus expérimentés sont plus intéressant mais pour tout le reste, pour les cas de figure où il faut partir vite en contre et défendre dur, avoir un effectif un peu plus jeune semble bénéfique. 

- L'effet tirs cadrés (0.43 sign) :
	A l'image de l'indicateur sur le nombre de tirs, ce coefficient reste logique puisqu'il indique simplement qu'un plus grand nombre de tirs cadrés augmente significativement (et très fortement) les chances de victoires. Supposons une équipe qui prenne 2 tirs cadrés contre une qui n'en prends pas un, la première a 86% de chances de victoires en plus. 

- L'effet score moyen défenseurs (-0.63 sign) :
	Voilà le coefficient qui vient justifier le fait que les milieux et les attaquants, en plus de leurs missions offensives, ont un rôle à jouer pour faciliter la tâche des défenseurs. En effet, si on en croit ce coefficient, un défenseur plus productif en moyenne a plus de chances de jouer dans une équipe qui perd plus. Le fait que ce coefficient soit négatif et significatif reflète deux choses pour moi. La première, limiter la sollicitation des défenseurs permets de les garder alertes et énergique sur les quelques phases défensives qu'ils auront à jouer. Le seconde, les équipes moins fortes qui se font dominer techniquement, doivent esperer de la réussite sur leur secteur défensif car plus ils seront attaqués, plus ils produiront des stats (et le score moyen augmente) et plus les chances de défaites augmentent. Cela parait putôt normal, mais à lui seul ce coefficient nous prouve que laisser jouer l'adversaire et refuser la possession, nécessite quand même un investissement fort de tous les joueurs pour limiter l'accès à leur but à l'adversaire sans quoi, les défenseurs seront plus souvent sollicité et donc finiront par fatiguer et c'est l'équipe entière qui se fera dominer techniquement mais aussi physiquement et mentalement par l'adversaire. Il faut constituer un groupe solide avec un milieu consistant et qui participe en défense pour éviter ce phénomène. d'où la défense à 3 qui permet d'ajouter deux milieux latéraux à la défense et éventuellement d'avoir 2 milieux défensifs en plus (surtout sur un 3-5-2 ou un 3-4-2-1). L'équipe a donc 3 centraux, 2 latéraux et 2 milieux def (ou 1 ) disponibles sur les phases défensives soit 7 joueurs contrairement à un 4-4-2 par exemple où on ne trouvera que 5 joueurs disponibles au maximum avant de ne faire redescendre l'intégralité du groupe, à savoir, les milieux latéraux et le milieu offensif.

- L'effet repos (0.05 à 4%) :
	L'effet repos, est un effet commun à tous les sports puisqu'il indique simplement qu'un groupe qui a eu le temps de marquer une pause entre deux matchs et de récupérer sera plus à même de remporter un match. Ici, si on en croit le coefficient, un jour de repos supplémentaire augment de 0.05% les chances de victoires. Les équipes en Champions league ou europa league jouant 2 matchs par semaine la plupart du temps, elles arrivent souvent le week-end avec seulement 3 ou 4 jours de repos quant les équipes sans compétitions européennes en auront 7. Ce phénomène est très souvent compensé par le fait que les équipes en champions league par exemple sont les gros budget et qu'elle parte avec un avantage sur la saison mais aussi, qu'elles reposent certains joueurs. Cependant, cela pourrait aussi expliquer le phénomène automnal vu plus tôt. Comme en début de saison, toutes les équipe sont fraîche et participe à des coupes nationales ou aux qualification aux coupes européennes, elles sont toutes sur le même pied d'égalité tandis qu'en hiver et au printemps, les grosses écurie toujours en liste dans les compétitions européennes arrivent le week-end avec des joueurs plus fatigués et/ou blessé et donc, laisse passer plus de matchs nuls avec des remplaçants pour préserver les meilleurs joueurs pour les compétitions qui les intéresse.

COMMENCER LA REDACTION ET COMPLETER AU FUR ET A MESURE AVEC LES EVOLUTION ET LES TESTS QUE TU ¨PEUX FAIRE

    VIF Factor                                           features
0   966.400789                                          Intercept
1     1.093727                                       C(home)[T.1]
2     1.105869                                 C(saison)[T.reste]
3     1.114959                                         C(PK)[T.1]
4     1.090169                                         C(PK)[T.2]
5     1.066641                                       C(CrdR)[T.1]
6     1.075106                                       C(CrdR)[T.2]
7     7.537896                              C(Formation)[T.3-5-2]
8     7.309916                              C(Formation)[T.4-3-3]
9     7.704611                              C(Formation)[T.4-5-1]
10    6.589363  C(opp_Formation, Treatment(reference="4-5-1"))...
11    8.063332  C(opp_Formation, Treatment(reference="4-5-1"))...
12    8.628143  C(opp_Formation, Treatment(reference="4-5-1"))...
13    7.417237  C(opp_Formation, Treatment(reference="4-5-1"))...
14    3.843984  C(Formation)[T.3-5-2]:C(opp_Formation, Treatme...
15    2.836671  C(Formation)[T.4-3-3]:C(opp_Formation, Treatme...
16    3.483964  C(Formation)[T.4-5-1]:C(opp_Formation, Treatme...
17    3.799749  C(Formation)[T.3-5-2]:C(opp_Formation, Treatme...
18    4.713228  C(Formation)[T.4-3-3]:C(opp_Formation, Treatme...
19    4.919775  C(Formation)[T.4-5-1]:C(opp_Formation, Treatme...
20    5.339513  C(Formation)[T.3-5-2]:C(opp_Formation, Treatme...
21    3.399206  C(Formation)[T.4-3-3]:C(opp_Formation, Treatme...
22    4.624251  C(Formation)[T.4-5-1]:C(opp_Formation, Treatme...
23    3.600126  C(Formation)[T.3-5-2]:C(opp_Formation, Treatme...
24    3.301694  C(Formation)[T.4-3-3]:C(opp_Formation, Treatme...
25    4.170473  C(Formation)[T.4-5-1]:C(opp_Formation, Treatme...
26    1.471634                                                FDD
27    2.350560                                                FDA
28    1.256918                                                age
29    1.368227                                               Dist
30    1.580966                                                SoT
31    1.474980                                         diff_value
32    1.377487                                                Int



#####################################################################


TESTS SUR LES POSTES

#####################################################################

En remplaçant les milieux défensifs par les top gardiens 

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Thu, 23 Feb 2023   Pseudo R-squ.:                  0.2859
Time:                        20:20:18   Log-Likelihood:                -285.83
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 7.666e-35
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                4.8190      3.612      1.334      0.182      -2.261      11.899
C(home)[T.1]                             1.6136      0.553      2.916      0.004       0.529       2.698
C(saison)[T.reste]                      -0.1949      0.227     -0.858      0.391      -0.640       0.251
C(PK)[T.1]                               1.0408      0.328      3.171      0.002       0.397       1.684
C(PK)[T.2]                               1.9934      0.930      2.143      0.032       0.170       3.816
C(CrdR)[T.1]                            -0.7212      0.369     -1.953      0.051      -1.445       0.002
C(CrdR)[T.2]                            -0.2507      1.201     -0.209      0.835      -2.604       2.103
C(Formation)[T.3-5-2]                   -0.3316      0.361     -0.919      0.358      -1.039       0.376
C(Formation)[T.4-3-3]                   -0.7452      0.452     -1.647      0.100      -1.632       0.142
C(Formation)[T.4-5-1]                   -0.3208      0.382     -0.840      0.401      -1.070       0.428
C(top_GK)[T.1]                          -1.1922      1.236     -0.965      0.335      -3.614       1.230
C(Formation)[T.3-5-2]:C(top_GK)[T.1]     1.4570      1.393      1.046      0.295      -1.272       4.186
C(Formation)[T.4-3-3]:C(top_GK)[T.1]     1.8276      1.321      1.383      0.167      -0.762       4.417
C(Formation)[T.4-5-1]:C(top_GK)[T.1]     1.4049      1.303      1.078      0.281      -1.149       3.959
Sh                                      -0.0784      0.044     -1.765      0.078      -0.165       0.009
C(home)[T.1]:Sh                         -0.1001      0.039     -2.592      0.010      -0.176      -0.024
Poss                                    -0.1570      0.039     -4.024      0.000      -0.234      -0.081
score_mf_mean                           -0.7484      0.646     -1.159      0.246      -2.014       0.517
Poss:score_mf_mean                       0.0182      0.013      1.428      0.153      -0.007       0.043
FDA                                      0.8597      0.449      1.915      0.055      -0.020       1.739
diff_value                               0.0047      0.001      6.846      0.000       0.003       0.006
Att                                      0.0059      0.002      2.567      0.010       0.001       0.010
age                                     -0.0889      0.125     -0.712      0.476      -0.333       0.156
SoT                                      0.4261      0.064      6.685      0.000       0.301       0.551
score_df_mean                           -0.5288      0.163     -3.241      0.001      -0.849      -0.209
repos                                    0.0468      0.026      1.799      0.072      -0.004       0.098
========================================================================================================
"""
Aucun coefficient significatif, baisse du LL et baisse du R²== Les gardiens n'ont pas de liens ni d'effet croisé avec la formation sur le résultat final. Rien d'étonnant en vrai puisqu'il n'y a qu'un gardien par équipe et qu'il est toujours présent. Il n'est d'ailleurs jamais mentionné dans les systèmes puisqu'il est obligatoirement présent.
Ce premier essai faisait office de test sur le fait que les milieux défensifs ont un effet croisé avec la formation sur le résultat. Je m'attendais à rien avec les gardiens et c'est exactement ce qu'il s'est passé. Je peux continuer sur les autres postes.

AVEC LES DEFENSEURS  :

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Thu, 23 Feb 2023   Pseudo R-squ.:                  0.2850
Time:                        20:25:01   Log-Likelihood:                -286.18
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.054e-34
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                5.9530      3.639      1.636      0.102      -1.180      13.086
C(home)[T.1]                             1.6344      0.556      2.939      0.003       0.544       2.724
C(saison)[T.reste]                      -0.2249      0.228     -0.986      0.324      -0.672       0.222
C(PK)[T.1]                               1.0687      0.330      3.235      0.001       0.421       1.716
C(PK)[T.2]                               1.8758      0.924      2.029      0.042       0.064       3.688
C(CrdR)[T.1]                            -0.7116      0.370     -1.921      0.055      -1.438       0.014
C(CrdR)[T.2]                            -0.1920      1.180     -0.163      0.871      -2.505       2.121
C(Formation)[T.3-5-2]                    0.2152      0.568      0.379      0.705      -0.897       1.328
C(Formation)[T.4-3-3]                    0.1339      0.499      0.268      0.788      -0.844       1.112
C(Formation)[T.4-5-1]                    0.3891      0.553      0.703      0.482      -0.696       1.474
C(top_DF)[T.1]                           0.8372      0.552      1.516      0.130      -0.245       1.920
C(Formation)[T.3-5-2]:C(top_DF)[T.1]    -0.7053      0.697     -1.011      0.312      -2.072       0.662
C(Formation)[T.4-3-3]:C(top_DF)[T.1]    -1.0267      0.728     -1.410      0.158      -2.453       0.400
C(Formation)[T.4-5-1]:C(top_DF)[T.1]    -0.9138      0.711     -1.285      0.199      -2.308       0.480
Sh                                      -0.0748      0.045     -1.671      0.095      -0.163       0.013
C(home)[T.1]:Sh                         -0.1017      0.039     -2.623      0.009      -0.178      -0.026
Poss                                    -0.1551      0.040     -3.925      0.000      -0.233      -0.078
score_mf_mean                           -0.7303      0.650     -1.124      0.261      -2.004       0.544
Poss:score_mf_mean                       0.0186      0.013      1.448      0.148      -0.007       0.044
FDA                                      0.8283      0.448      1.847      0.065      -0.051       1.707
diff_value                               0.0047      0.001      6.920      0.000       0.003       0.006
Att                                      0.0052      0.002      2.294      0.022       0.001       0.010
age                                     -0.1375      0.129     -1.067      0.286      -0.390       0.115
SoT                                      0.4259      0.064      6.701      0.000       0.301       0.550
score_df_mean                           -0.6938      0.208     -3.341      0.001      -1.101      -0.287
repos                                    0.0509      0.026      1.950      0.051      -0.000       0.102
========================================================================================================
"""

C'est presque pire que les gardiens. R² descend, LL aussi et les coeff ne sont pas significatifs ==> Par conséquent pas d'impact de la formation sur les défenseurs et leur productivité qui ait un effet sur la victoire. Les défenseurs ne sont donc pas dans la même situation que les défenseurs centraux et leur productivité ne dépend pas de la formation. Par contre on sait que leur nombre est important et que lorsqu'ils sont trop productifs cela signifie qu'il y a un soucis plus général (souvent le fait de subir les attaques d'un adversaire plus fort).

AVEC LES MILIEUX :
 
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Thu, 23 Feb 2023   Pseudo R-squ.:                  0.2832
Time:                        20:28:21   Log-Likelihood:                -286.91
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 2.025e-34
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                4.8884      3.768      1.297      0.195      -2.497      12.274
C(home)[T.1]                             1.5927      0.551      2.890      0.004       0.513       2.673
C(saison)[T.reste]                      -0.1976      0.227     -0.872      0.383      -0.642       0.247
C(PK)[T.1]                               1.0503      0.327      3.207      0.001       0.408       1.692
C(PK)[T.2]                               2.0611      0.918      2.244      0.025       0.261       3.861
C(CrdR)[T.1]                            -0.7142      0.368     -1.941      0.052      -1.435       0.007
C(CrdR)[T.2]                            -0.2710      1.202     -0.225      0.822      -2.628       2.086
C(Formation)[T.3-5-2]                    0.1909      0.704      0.271      0.786      -1.190       1.572
C(Formation)[T.4-3-3]                    0.2557      0.740      0.346      0.730      -1.195       1.706
C(Formation)[T.4-5-1]                    0.2955      0.701      0.421      0.673      -1.079       1.670
C(top_MF)[T.1]                           0.5289      0.762      0.694      0.488      -0.965       2.023
C(Formation)[T.3-5-2]:C(top_MF)[T.1]    -0.4903      0.815     -0.602      0.547      -2.087       1.106
C(Formation)[T.4-3-3]:C(top_MF)[T.1]    -0.9087      0.866     -1.050      0.294      -2.606       0.788
C(Formation)[T.4-5-1]:C(top_MF)[T.1]    -0.5830      0.826     -0.706      0.480      -2.202       1.036
Sh                                      -0.0796      0.044     -1.802      0.072      -0.166       0.007
C(home)[T.1]:Sh                         -0.0991      0.038     -2.581      0.010      -0.174      -0.024
Poss                                    -0.1636      0.039     -4.161      0.000      -0.241      -0.087
score_mf_mean                           -0.8405      0.655     -1.284      0.199      -2.124       0.443
Poss:score_mf_mean                       0.0200      0.013      1.569      0.117      -0.005       0.045
FDA                                      0.9042      0.447      2.022      0.043       0.028       1.780
diff_value                               0.0048      0.001      6.999      0.000       0.003       0.006
Att                                      0.0059      0.002      2.545      0.011       0.001       0.010
age                                     -0.0986      0.128     -0.771      0.441      -0.349       0.152
SoT                                      0.4245      0.064      6.661      0.000       0.300       0.549
score_df_mean                           -0.5601      0.162     -3.468      0.001      -0.877      -0.244
repos                                    0.0494      0.026      1.904      0.057      -0.001       0.100
========================================================================================================
"""

Idem encore une fois, pas d'effet croisé de la formation sur la productivité des milieux. cependant la présence du score moyen de productivité des milieux dans le modèle joue peut-être contre eux. Je retest sans cette variable :

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      582
Method:                           MLE   Df Model:                           23
Date:                Thu, 23 Feb 2023   Pseudo R-squ.:                  0.2793
Time:                        20:30:05   Log-Likelihood:                -288.45
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 8.255e-35
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                1.1811      3.089      0.382      0.702      -4.874       7.236
C(home)[T.1]                             1.5749      0.554      2.844      0.004       0.490       2.660
C(saison)[T.reste]                      -0.1777      0.225     -0.788      0.430      -0.619       0.264
C(PK)[T.1]                               1.0242      0.325      3.147      0.002       0.386       1.662
C(PK)[T.2]                               2.0439      0.903      2.264      0.024       0.275       3.813
C(CrdR)[T.1]                            -0.6874      0.367     -1.872      0.061      -1.407       0.032
C(CrdR)[T.2]                            -0.3031      1.205     -0.252      0.801      -2.664       2.058
C(Formation)[T.3-5-2]                    0.2157      0.703      0.307      0.759      -1.161       1.593
C(Formation)[T.4-3-3]                    0.3437      0.730      0.471      0.638      -1.086       1.774
C(Formation)[T.4-5-1]                    0.3665      0.691      0.531      0.596      -0.987       1.720
C(top_MF)[T.1]                           0.7993      0.687      1.164      0.244      -0.546       2.145
C(Formation)[T.3-5-2]:C(top_MF)[T.1]    -0.6081      0.808     -0.753      0.452      -2.191       0.975
C(Formation)[T.4-3-3]:C(top_MF)[T.1]    -1.1559      0.829     -1.394      0.163      -2.782       0.470
C(Formation)[T.4-5-1]:C(top_MF)[T.1]    -0.6685      0.796     -0.840      0.401      -2.228       0.891
Sh                                      -0.0758      0.044     -1.733      0.083      -0.161       0.010
C(home)[T.1]:Sh                         -0.0974      0.039     -2.528      0.011      -0.173      -0.022
Poss                                    -0.1242      0.027     -4.530      0.000      -0.178      -0.070
FDA                                      0.8731      0.436      2.003      0.045       0.019       1.728
diff_value                               0.0050      0.001      7.663      0.000       0.004       0.006
Att                                      0.0068      0.002      3.086      0.002       0.002       0.011
age                                     -0.0364      0.120     -0.304      0.761      -0.271       0.199
SoT                                      0.4186      0.063      6.593      0.000       0.294       0.543
score_df_mean                           -0.5200      0.158     -3.282      0.001      -0.831      -0.209
repos                                    0.0455      0.026      1.758      0.079      -0.005       0.096
========================================================================================================
"""
Non ça ne change rien.

AVEC LES ATTAQUANTS

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Thu, 23 Feb 2023   Pseudo R-squ.:                  0.2818
Time:                        20:30:46   Log-Likelihood:                -287.46
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.333e-34
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                6.0184      3.791      1.588      0.112      -1.412      13.448
C(home)[T.1]                             1.6016      0.552      2.903      0.004       0.520       2.683
C(saison)[T.reste]                      -0.2106      0.227     -0.928      0.353      -0.655       0.234
C(PK)[T.1]                               1.0339      0.327      3.163      0.002       0.393       1.675
C(PK)[T.2]                               2.0780      0.923      2.252      0.024       0.270       3.886
C(CrdR)[T.1]                            -0.6842      0.366     -1.867      0.062      -1.402       0.034
C(CrdR)[T.2]                            -0.2791      1.199     -0.233      0.816      -2.628       2.070
C(Formation)[T.3-5-2]                   -0.2600      0.405     -0.642      0.521      -1.054       0.534
C(Formation)[T.4-3-3]                   -0.3610      0.415     -0.870      0.384      -1.174       0.452
C(Formation)[T.4-5-1]                   -0.2713      0.433     -0.627      0.531      -1.120       0.577
C(top_FW)[T.1]                          -0.0714      0.703     -0.102      0.919      -1.449       1.307
C(Formation)[T.3-5-2]:C(top_FW)[T.1]     0.1758      0.765      0.230      0.818      -1.324       1.676
C(Formation)[T.4-3-3]:C(top_FW)[T.1]     0.0680      0.832      0.082      0.935      -1.563       1.699
C(Formation)[T.4-5-1]:C(top_FW)[T.1]     0.2424      0.741      0.327      0.743      -1.209       1.694
Sh                                      -0.0795      0.044     -1.793      0.073      -0.166       0.007
C(home)[T.1]:Sh                         -0.1004      0.039     -2.608      0.009      -0.176      -0.025
Poss                                    -0.1583      0.040     -3.989      0.000      -0.236      -0.081
score_mf_mean                           -0.8683      0.650     -1.335      0.182      -2.143       0.406
Poss:score_mf_mean                       0.0206      0.013      1.596      0.111      -0.005       0.046
FDA                                      0.9138      0.446      2.048      0.041       0.039       1.788
diff_value                               0.0047      0.001      6.972      0.000       0.003       0.006
Att                                      0.0054      0.002      2.376      0.018       0.001       0.010
age                                     -0.1259      0.130     -0.965      0.335      -0.382       0.130
SoT                                      0.4182      0.063      6.592      0.000       0.294       0.543
score_df_mean                           -0.5587      0.174     -3.212      0.001      -0.900      -0.218
repos                                    0.0482      0.026      1.845      0.065      -0.003       0.099
========================================================================================================
"""

Rien de significatif non plus du côté des attaquants. Si cela semble confirmer le résultat sur les milieux défenseif il rest un point qui est criticable sur cette méthode. En effet, pour les milieux défensifs j'ai utilisé uniquement les joueurs dont c'est réellement le poste. Pour les 3 autres postes (donc pas les gardiens évidemment) j'ai procédé à des regroupements. Afin de réaliser des tests plus crédibles, je vais chercher des listes de joueurs sur certains postes qui pourraient être pertinents (milieux offensifs, milieux latéraux, défenseurs latéraux :: n'existe pas sur le site donc je prends aussi les ailliers à la place) et refaire des tests de régression.

RECUPERATION DES JOUEURS SUR LES 3 POSTES RETENUS DEPUIS LE SITE OU J AI TROUVE LES MILIEUX DEF
(football-critic.com)
Normalement c'est bon j'ai ajouté 3 variables MO, MIL et AIL qui sont dans le DF reg qui se charge au début du script pour faire les régressions.

TEST AVEC LES AILLIERS == Marche pas (singular matrix y a une couille dans le potage)

TEST AVEC LES MILIEUX OFF ::

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Fri, 24 Feb 2023   Pseudo R-squ.:                  0.2853
Time:                        17:38:27   Log-Likelihood:                -286.05
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 9.380e-35
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                8.5087      4.004      2.125      0.034       0.660      16.357
C(home)[T.1]                             1.5667      0.553      2.831      0.005       0.482       2.652
C(saison)[T.reste]                      -0.2025      0.227     -0.894      0.371      -0.647       0.242
C(PK)[T.1]                               1.0781      0.328      3.282      0.001       0.434       1.722
C(PK)[T.2]                               2.0186      0.901      2.241      0.025       0.253       3.784
C(CrdR)[T.1]                            -0.7235      0.367     -1.973      0.048      -1.442      -0.005
C(CrdR)[T.2]                            -0.2518      1.198     -0.210      0.833      -2.600       2.096
C(Formation)[T.3-5-2]                   -0.1391      0.382     -0.364      0.716      -0.888       0.610
C(Formation)[T.4-3-3]                   -0.0409      0.428     -0.096      0.924      -0.879       0.797
C(Formation)[T.4-5-1]                   -0.0873      0.360     -0.242      0.809      -0.794       0.619
C(top_MO)[T.1]                          -0.7664      0.771     -0.995      0.320      -2.277       0.744
C(Formation)[T.3-5-2]:C(top_MO)[T.1]    -0.1419      0.915     -0.155      0.877      -1.935       1.651
C(Formation)[T.4-3-3]:C(top_MO)[T.1]    -0.4786      0.841     -0.569      0.569      -2.127       1.170
C(Formation)[T.4-5-1]:C(top_MO)[T.1]     0.2747      0.760      0.362      0.718      -1.214       1.764
Sh                                      -0.0801      0.044     -1.804      0.071      -0.167       0.007
C(home)[T.1]:Sh                         -0.0987      0.039     -2.550      0.011      -0.174      -0.023
Poss                                    -0.1733      0.041     -4.208      0.000      -0.254      -0.093
score_mf_mean                           -0.7578      0.656     -1.155      0.248      -2.043       0.528
Poss:score_mf_mean                       0.0232      0.013      1.748      0.081      -0.003       0.049
FDA                                      0.9279      0.448      2.073      0.038       0.051       1.805
diff_value                               0.0048      0.001      7.101      0.000       0.004       0.006
Att                                      0.0058      0.002      2.540      0.011       0.001       0.010
age                                     -0.2433      0.147     -1.652      0.098      -0.532       0.045
SoT                                      0.4166      0.064      6.520      0.000       0.291       0.542
score_df_mean                           -0.3715      0.201     -1.845      0.065      -0.766       0.023
repos                                    0.0489      0.026      1.869      0.062      -0.002       0.100
========================================================================================================
"""

R² et LL pas fou
Rien de significatif

TEST AVEC LES MILIEUX ::

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      582
Method:                           MLE   Df Model:                           23
Date:                Fri, 24 Feb 2023   Pseudo R-squ.:                  0.2816
Time:                        17:40:23   Log-Likelihood:                -287.56
converged:                      False   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 3.680e-35
=========================================================================================================
                                            coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------
Intercept                                 2.2689      3.628      0.625      0.532      -4.841       9.379
C(home)[T.1]                              1.5334      0.556      2.756      0.006       0.443       2.624
C(saison)[T.reste]                       -0.1607      0.225     -0.713      0.476      -0.602       0.281
C(PK)[T.1]                                0.9865      0.325      3.037      0.002       0.350       1.623
C(PK)[T.2]                                2.0436      0.920      2.221      0.026       0.240       3.847
C(CrdR)[T.1]                             -0.6676      0.363     -1.838      0.066      -1.379       0.044
C(CrdR)[T.2]                             -0.2895      1.201     -0.241      0.810      -2.644       2.065
C(Formation)[T.3-5-2]                    -0.4695      0.335     -1.402      0.161      -1.126       0.187
C(Formation)[T.4-3-3]                    -0.3627      0.465     -0.780      0.435      -1.274       0.548
C(Formation)[T.4-5-1]                    -0.3757      0.321     -1.172      0.241      -1.004       0.253
C(top_MIL)[T.1]                         -16.8161   2843.724     -0.006      0.995   -5590.412    5556.780
C(Formation)[T.3-5-2]:C(top_MIL)[T.1]    17.0555   2843.724      0.006      0.995   -5556.541    5590.652
C(Formation)[T.4-3-3]:C(top_MIL)[T.1]    16.4854   2843.724      0.006      0.995   -5557.111    5590.081
C(Formation)[T.4-5-1]:C(top_MIL)[T.1]    17.0977   2843.724      0.006      0.995   -5556.498    5590.694
Sh                                       -0.0828      0.044     -1.871      0.061      -0.170       0.004
C(home)[T.1]:Sh                          -0.0959      0.039     -2.471      0.013      -0.172      -0.020
Poss                                     -0.1196      0.027     -4.419      0.000      -0.173      -0.067
FDA                                       0.9360      0.438      2.138      0.032       0.078       1.794
diff_value                                0.0049      0.001      7.185      0.000       0.004       0.006
Att                                       0.0067      0.002      3.046      0.002       0.002       0.011
age                                      -0.0512      0.145     -0.353      0.724      -0.335       0.233
SoT                                       0.4086      0.063      6.493      0.000       0.285       0.532
score_df_mean                            -0.5722      0.165     -3.467      0.001      -0.896      -0.249
repos                                     0.0445      0.026      1.718      0.086      -0.006       0.095
=========================================================================================================
"""

Problème au niveau de la variable. Elle doit se comporter bizarrement. Pourtant elle a bien deux valeurs (0 et 1) et est bien remplie pour chaque ligne. Impossible de faire tourner le modèle sur les variablas MIL et AIL. Je ne sais pas si c'est juste parce que ce n'est pas significatif du tout ou s'il y a un problème ailleurs. dans la construction de la variable j'ai utilisé les même méthode que pour mes top_DM etc...

Les variables fonctionnent lorsqu'elles ne sont pas liées à la formation. C'est à dire que vis à vis de la formation elles se comportent de manière étrange
Seule, la variable top_AIL n'est pas significative et top_MIL non plus (0.84 et 0.66 respectivement en p-value)

Rien de particulier dans les tests du chi 2 entre les variables et la variable formation.
Test avec les sorties graphiques peut -être.

###################COMMENTAIRES SUR LES SORTIES GRAPHIQUES

Tous les top ailliers sont sur des 4-5-1 :: probablement car il n'y a que dans cette formation qu'ils exite ==> D'où le problème de matrice singulière

Les MF sont intéressants, ils sont  absents des 3-4-3 et sont plus souvent sur les 4-3-3 (--> Système qui demande plus d'activité de la part des milieux ?)

Les MIL (donc autres que les milieux off ou def et lles ailliers selon le site football-critic) ne ressortent que sur le 4-3-3 == Un lien à faire avec les MF



Les scores moyens des ailliers sont plus élevés dans les 4-3-3 alors que le top AIL y sont absents :: loouche ?

Les scores DF_mean sont en moyenne plus élevés sur les 3-5-2 et les 4-5-1, étonamment ils sont plus faibles sur les systèmes à 3 attaquants (3-4-3 et 4-3-3) alors que justement, ce sont des systèmes qui à priori désavantage le secteur défensif

En moyenne les gardiens ont plus de taff sur les défenses à 4. C'est assez contre intuitif aussi

Les milieux ont des scores moyens plus faibles et plus dispersés sur les milieux à 5 (logique puisqu'ils sont plus nombreux à se partager le travail. Leur score est plus concentré autour de la moyenne sur les 3-4-3 et les 4-3-3
Les milieux de football-critic sont plus produtcif en moyenne sur le 4-3-3 (certainement car ils y sont moins nombreux)

Les scores moyens des DM sont plus concentrés sur les 3-4-3 et les 4-5-1
Et ils sont répartis de manières similaire sur les formations


Test sur les scores en fonction des formations des adversaires

Sur les formations adverses, les scores des ailliers sont les mêmes
Idem pour les df
Idem pour les fw
Idem pour les gk
Idem pour les mf
idem pour les mil
Idem pour les dm


BOXPLOT SUR LES VICTOIRES ET LES SCORES MOYENS POSTES (virer les 0 peut-être)
HISTOGRAMME REPARTITION DES SCORES MOYENS POUR CONSTATER LA NORMALITE

BOXPLOT sur victoire

score ailliers moyen == pas de différence notable
score df_moyen == Un score moyen légèrement plus faible sur les victoires mais plus dispersé aussi
score dm _moyen == pas de différence forte. Un peu plus faible dans les victoires mais rien de fou
score_fw_mean == score plus élevé pour les victoires (logique en soi puisque je prends les buts comme variable dans le calculde leur score et que sans but :: pas de victoire)
score gardiens == score plus élevé dans les victoires ==> Ce ne serait donc pas forcément les équipes avec les meilleures défenses qui gagnent et si le gardien fait des perfs cela peut engendrer la victoire.

score_mf_mean == comme les attaquants
score_mil_mean == très dispersé sur les victoires donc pas forcément différents des défaites.

Histogrammes ::
score ail == pas très normal
score df == pas fou y a des trous
score dm == pas dingue
score fw == ...
score gk == s'en approche de loin mais trop de trousq
score mf == no
score mil == non 

LOG
score ail == non
score df == pas fou y a des trous
score dm == Aaahhh non
score fw == ...
score gk == c'était mieux sans log
score mf == no
score mil == non 



REFAIRE TOURNER LE CALCUL DES SCORES DES MIL AIL ET MO CA SORT N IMPORTE QUOI ==== PENSER A VERIFIER AU FUR ET A MESURE DE L EXECUTION DU SCORE QUE JE PERDS PAS JOUEURS ET QUE J OBTIENS BIEN UN RESULTAT	.

NOUVEAU CALCUL POUR LES POSTES PRECIS :: j'ai pris la même limite que pour les milieux def c'est à dire mini 2 fois 90 minutes jouées
INTER 4 top milieux
Cagliari 3 top mil
lazio 3 top mil
atalanta 2 top mo

OK les graphiques sont déjà mieux.
Tests sur le modèle !!Warning , les MO ont l'air d'être très peu nombreux

MO
                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 06 Mar 2023   Pseudo R-squ.:                  0.2839
Time:                        17:49:52   Log-Likelihood:                -286.65
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 1.600e-34
========================================================================================================
                                           coef    std err          z      P>|z|      [0.025      0.975]
--------------------------------------------------------------------------------------------------------
Intercept                                7.5376      4.014      1.878      0.060      -0.330      15.405
C(home)[T.1]                             1.6154      0.554      2.915      0.004       0.529       2.701
C(saison)[T.reste]                      -0.2111      0.226     -0.933      0.351      -0.654       0.232
C(PK)[T.1]                               1.0550      0.329      3.205      0.001       0.410       1.700
C(PK)[T.2]                               2.0355      0.926      2.197      0.028       0.220       3.851
C(CrdR)[T.1]                            -0.7122      0.367     -1.939      0.052      -1.432       0.008
C(CrdR)[T.2]                            -0.3543      1.188     -0.298      0.766      -2.683       1.975
C(Formation)[T.3-5-2]                   -0.1268      0.426     -0.298      0.766      -0.961       0.707
C(Formation)[T.4-3-3]                   -0.3326      0.430     -0.774      0.439      -1.175       0.510
C(Formation)[T.4-5-1]                   -0.2869      0.390     -0.737      0.461      -1.050       0.477
C(top_MO)[T.1]                          -0.3167      0.513     -0.617      0.537      -1.322       0.689
C(Formation)[T.3-5-2]:C(top_MO)[T.1]    -0.2702      0.748     -0.361      0.718      -1.737       1.196
C(Formation)[T.4-3-3]:C(top_MO)[T.1]     0.0812      0.759      0.107      0.915      -1.406       1.568
C(Formation)[T.4-5-1]:C(top_MO)[T.1]     0.5760      0.650      0.886      0.376      -0.698       1.850
Sh                                      -0.0795      0.044     -1.804      0.071      -0.166       0.007
C(home)[T.1]:Sh                         -0.1016      0.039     -2.634      0.008      -0.177      -0.026
Poss                                    -0.1622      0.040     -4.013      0.000      -0.241      -0.083
score_mf_mean                           -0.8045      0.661     -1.217      0.224      -2.100       0.491
Poss:score_mf_mean                       0.0209      0.013      1.579      0.114      -0.005       0.047
FDA                                      0.9442      0.444      2.128      0.033       0.074       1.814
diff_value                               0.0046      0.001      6.834      0.000       0.003       0.006
Att                                      0.0056      0.002      2.463      0.014       0.001       0.010
age                                     -0.1920      0.142     -1.356      0.175      -0.470       0.086
SoT                                      0.4186      0.063      6.595      0.000       0.294       0.543
score_df_mean                           -0.5556      0.166     -3.339      0.001      -0.882      -0.229
repos                                    0.0486      0.026      1.865      0.062      -0.002       0.100
========================================================================================================
"""

Plus d'erreur le modèle tourne c'est cool

MIL

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 06 Mar 2023   Pseudo R-squ.:                  0.2994
Time:                        17:50:29   Log-Likelihood:                -280.43
converged:                      False   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 5.854e-37
=========================================================================================================
                                            coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------
Intercept                                 9.9720      4.094      2.436      0.015       1.948      17.996
C(home)[T.1]                              1.5779      0.559      2.822      0.005       0.482       2.674
C(saison)[T.reste]                       -0.2038      0.230     -0.887      0.375      -0.654       0.247
C(PK)[T.1]                                1.0569      0.336      3.148      0.002       0.399       1.715
C(PK)[T.2]                                2.0503      0.952      2.154      0.031       0.185       3.916
C(CrdR)[T.1]                             -0.7030      0.370     -1.900      0.057      -1.428       0.022
C(CrdR)[T.2]                             -0.3936      1.235     -0.319      0.750      -2.813       2.026
C(Formation)[T.3-5-2]                    -0.9351      0.442     -2.115      0.034      -1.802      -0.069
C(Formation)[T.4-3-3]                    -0.5440      0.489     -1.114      0.265      -1.502       0.414
C(Formation)[T.4-5-1]                    -0.1094      0.357     -0.306      0.759      -0.809       0.591
C(top_MIL)[T.1]                         -18.7078   5094.789     -0.004      0.997      -1e+04    9966.895
C(Formation)[T.3-5-2]:C(top_MIL)[T.1]    19.8136   5094.789      0.004      0.997   -9965.789       1e+04
C(Formation)[T.4-3-3]:C(top_MIL)[T.1]    18.9539   5094.789      0.004      0.997   -9966.649       1e+04
C(Formation)[T.4-5-1]:C(top_MIL)[T.1]    17.9360   5094.789      0.004      0.997   -9967.667       1e+04
Sh                                       -0.0833      0.044     -1.887      0.059      -0.170       0.003
C(home)[T.1]:Sh                          -0.1004      0.039     -2.578      0.010      -0.177      -0.024
Poss                                     -0.1712      0.040     -4.278      0.000      -0.250      -0.093
score_mf_mean                            -0.9419      0.658     -1.432      0.152      -2.231       0.348
Poss:score_mf_mean                        0.0219      0.013      1.690      0.091      -0.003       0.047
FDA                                       0.9571      0.451      2.124      0.034       0.074       1.840
diff_value                                0.0047      0.001      6.991      0.000       0.003       0.006
Att                                       0.0062      0.002      2.694      0.007       0.002       0.011
age                                      -0.2702      0.147     -1.836      0.066      -0.559       0.018
SoT                                       0.4205      0.064      6.610      0.000       0.296       0.545
score_df_mean                            -0.6009      0.171     -3.520      0.000      -0.935      -0.266
repos                                     0.0526      0.026      1.988      0.047       0.001       0.105
=========================================================================================================
"""
Toujours aussi chelou celui la

AIL ::

                           Logit Regression Results                           
==============================================================================
Dep. Variable:               victoire   No. Observations:                  606
Model:                          Logit   Df Residuals:                      580
Method:                           MLE   Df Model:                           25
Date:                Mon, 06 Mar 2023   Pseudo R-squ.:                  0.2871
Time:                        17:51:11   Log-Likelihood:                -285.34
converged:                       True   LL-Null:                       -400.26
Covariance Type:            nonrobust   LLR p-value:                 4.938e-35
=========================================================================================================
                                            coef    std err          z      P>|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------
Intercept                                 6.9424      3.734      1.859      0.063      -0.377      14.261
C(home)[T.1]                              1.6226      0.555      2.926      0.003       0.536       2.710
C(saison)[T.reste]                       -0.1930      0.227     -0.851      0.395      -0.638       0.252
C(PK)[T.1]                                1.0939      0.330      3.319      0.001       0.448       1.740
C(PK)[T.2]                                2.0029      0.927      2.161      0.031       0.187       3.819
C(CrdR)[T.1]                             -0.6614      0.369     -1.792      0.073      -1.385       0.062
C(CrdR)[T.2]                             -0.1406      1.247     -0.113      0.910      -2.584       2.303
C(Formation)[T.3-5-2]                    -0.1963      0.408     -0.481      0.630      -0.995       0.603
C(Formation)[T.4-3-3]                    -0.3856      0.486     -0.793      0.427      -1.338       0.567
C(Formation)[T.4-5-1]                    -0.4804      0.418     -1.148      0.251      -1.300       0.340
C(top_AIL)[T.1]                          -0.4253      0.524     -0.812      0.417      -1.452       0.602
C(Formation)[T.3-5-2]:C(top_AIL)[T.1]    -0.5161      0.782     -0.660      0.510      -2.050       1.017
C(Formation)[T.4-3-3]:C(top_AIL)[T.1]     0.0989      0.706      0.140      0.889      -1.284       1.482
C(Formation)[T.4-5-1]:C(top_AIL)[T.1]     0.7779      0.657      1.183      0.237      -0.511       2.066
Sh                                       -0.0797      0.045     -1.787      0.074      -0.167       0.008
C(home)[T.1]:Sh                          -0.1013      0.039     -2.626      0.009      -0.177      -0.026
Poss                                     -0.1622      0.039     -4.115      0.000      -0.239      -0.085
score_mf_mean                            -0.8586      0.646     -1.330      0.184      -2.124       0.407
Poss:score_mf_mean                        0.0203      0.013      1.594      0.111      -0.005       0.045
FDA                                       0.8618      0.450      1.915      0.055      -0.020       1.744
diff_value                                0.0049      0.001      7.115      0.000       0.004       0.006
Att                                       0.0056      0.002      2.434      0.015       0.001       0.010
age                                      -0.1412      0.131     -1.081      0.280      -0.397       0.115
SoT                                       0.4222      0.064      6.642      0.000       0.298       0.547
score_df_mean                            -0.6752      0.183     -3.698      0.000      -1.033      -0.317
repos                                     0.0454      0.026      1.739      0.082      -0.006       0.097
=========================================================================================================
"""
Il marche aussi super! 
 

RESTE A COMMENTER DANS L ETUDE